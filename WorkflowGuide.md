# Руководство по рабочему процессу разработки плагинов Rust

Это руководство описывает рабочий процесс организации разработки плагинов Rust, где каждый плагин представляет собой отдельный проект C#.

## Подготовка окружения

### 1. Создание основного решения

```
dotnet new sln -n RustPlugins
```

### 2. Установка шаблона плагина

```
dotnet new install ./RustPluginTemplate/template/
```

### 3. Структура директорий

Рекомендуемая структура:
```
/RustPlugins
    /Managed            # Общая директория для библиотек Rust и Oxide
    /.rust-analyzer     # Файлы конфигурации для rust-analyzer
    RustPlugins.sln     # Общее решение
    /Plugin1            # Отдельная директория для каждого плагина
    /Plugin2
    /...
```

### 4. Копирование библиотек

Скопируйте все необходимые библиотеки (DLL) в директорию `/Managed`. Эти библиотеки будут использоваться всеми плагинами:
- Библиотеки Rust сервера из `RustDedicated_Data/Managed`
- Библиотеки Oxide/uMod

## Создание нового плагина

### 1. Создание проекта плагина

```
dotnet new rustplugin -n ИмяПлагина --PluginAuthor "Ваше Имя" --PluginDescription "Описание плагина"
```

### 2. Добавление плагина в решение

```
dotnet sln add ИмяПлагина/ИмяПлагина.csproj
```

### 3. Структура плагина

Каждый плагин будет иметь следующую структуру:
```
/ИмяПлагина
    ИмяПлагина.csproj   # Файл проекта
    ИмяПлагина.cs       # Код плагина
    README.md           # Документация плагина
```

## Компиляция и развертывание

### 1. Компиляция одного плагина

```
cd ИмяПлагина
dotnet build
```

### 2. Компиляция всех плагинов

```
dotnet build RustPlugins.sln
```

### 3. Копирование скомпилированного плагина на сервер

Скопируйте скомпилированный файл `ИмяПлагина.dll` из директории `bin/Debug/net48/` в директорию `oxide/plugins/` вашего сервера Rust.

## Рекомендации

1. **Ссылки на библиотеки**: В каждом `.csproj` файле используйте относительные пути к общим библиотекам:
   ```xml
   <Reference Include="$(SolutionDir)Managed\*.dll">
     <Private>False</Private>
   </Reference>
   ```

2. **Версионирование**: Используйте атрибут `[Info]` для указания версии плагина.

3. **Документация**: Поддерживайте README.md файл каждого плагина в актуальном состоянии.

4. **Отладка**: Для отладки используйте логирование через `Puts()` или `PrintError()`.

5. **Пакетная обработка**: Для удобства создания и компиляции множества плагинов можно создать скрипты автоматизации (`.bat` для Windows или `.sh` для Linux).
