using System.Collections.Generic;
using UnityEngine;

public static class ArgEx
{
	public static BasePlayer Player(this Arg arg)
	{
		if (arg == null || arg.Connection == null)
		{
			return null;
		}
		return arg.Connection.player as BasePlayer;
	}

	public static BasePlayer GetPlayer(this Arg arg, int iArgNum)
	{
		string @string = arg.GetString(iArgNum, (string)null);
		if (@string == null)
		{
			return null;
		}
		return BasePlayer.Find(@string);
	}

	public static List<BasePlayer> GetPlayerArgs(this Arg arg, int startArgIndex)
	{
		List<BasePlayer> list = new List<BasePlayer>();
		int num = arg.Args.Length - startArgIndex;
		if (num <= 0)
		{
			return list;
		}
		for (int i = 0; i < num; i++)
		{
			BasePlayer player = arg.GetPlayer(startArgIndex + i);
			if ((Object)(object)player != (Object)null)
			{
				list.Add(player);
				Debug.Log((object)("Added player " + player.displayName));
			}
		}
		return list;
	}

	public static BasePlayer GetSleeper(this Arg arg, int iArgNum)
	{
		string @string = arg.GetString(iArgNum, "");
		if (@string == null)
		{
			return null;
		}
		return BasePlayer.FindSleeping(@string);
	}

	public static BasePlayer GetPlayerOrSleeper(this Arg arg, int iArgNum)
	{
		string @string = arg.GetString(iArgNum, "");
		if (@string == null)
		{
			return null;
		}
		return BasePlayer.FindAwakeOrSleeping(@string);
	}

	public static BasePlayer GetPlayerOrSleeperOrBot(this Arg arg, int iArgNum)
	{
		uint num = default(uint);
		if (arg.TryGetUInt(iArgNum, ref num))
		{
			return BasePlayer.FindBot(num);
		}
		return arg.GetPlayerOrSleeper(iArgNum);
	}

	public static NetworkableId GetEntityID(this Arg arg, int iArg, NetworkableId def = default(NetworkableId))
	{
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		return new NetworkableId(arg.GetUInt64(iArg, def.Value));
	}

	public static ItemId GetItemID(this Arg arg, int iArg, ItemId def = default(ItemId))
	{
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		return new ItemId(arg.GetUInt64(iArg, def.Value));
	}
}
