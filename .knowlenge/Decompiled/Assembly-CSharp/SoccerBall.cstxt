using UnityEngine;

public class SoccerBall : BaseCombatEntity
{
	[SerializeField]
	[Header("Soccer Ball")]
	private Rigidbody rigidBody;

	[SerializeField]
	private float additionalForceMultiplier = 0.2f;

	[SerializeField]
	private float upForceMultiplier = 0.15f;

	[SerializeField]
	private DamageRenderer damageRenderer;

	[SerializeField]
	private float explosionForceMultiplier = 40f;

	[SerializeField]
	private float otherForceMultiplier = 10f;

	protected void OnCollisionEnter(Collision collision)
	{
		//IL_000a: Unknown result type (might be due to invalid IL or missing references)
		//IL_000f: Unknown result type (might be due to invalid IL or missing references)
		//IL_004c: Unknown result type (might be due to invalid IL or missing references)
		//IL_005c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0061: Unknown result type (might be due to invalid IL or missing references)
		//IL_0066: Unknown result type (might be due to invalid IL or missing references)
		//IL_0068: Unknown result type (might be due to invalid IL or missing references)
		//IL_006d: Unknown result type (might be due to invalid IL or missing references)
		//IL_007c: Unknown result type (might be due to invalid IL or missing references)
		//IL_007e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0089: Unknown result type (might be due to invalid IL or missing references)
		//IL_008e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0094: Unknown result type (might be due to invalid IL or missing references)
		//IL_009f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		if (!base.isClient)
		{
			Vector3 impulse = collision.impulse;
			if (((Vector3)(ref impulse)).magnitude > 0f && (Object)(object)collision.collider.attachedRigidbody != (Object)null && !((Component)(object)collision.collider.attachedRigidbody).HasComponent<SoccerBall>())
			{
				Vector3 val = rigidBody.position - collision.collider.attachedRigidbody.position;
				impulse = collision.impulse;
				float magnitude = ((Vector3)(ref impulse)).magnitude;
				rigidBody.AddForce(val * magnitude * additionalForceMultiplier + Vector3.up * magnitude * upForceMultiplier, (ForceMode)1);
			}
		}
	}

	public override void Hurt(HitInfo info)
	{
		//IL_005a: Unknown result type (might be due to invalid IL or missing references)
		//IL_005f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0093: Unknown result type (might be due to invalid IL or missing references)
		//IL_0072: Unknown result type (might be due to invalid IL or missing references)
		//IL_0078: Unknown result type (might be due to invalid IL or missing references)
		if (base.isClient)
		{
			return;
		}
		float num = 0f;
		float[] types = info.damageTypes.types;
		foreach (float num2 in types)
		{
			num = (((int)num2 != 16 && (int)num2 != 22) ? (num + num2 * otherForceMultiplier) : (num + num2 * explosionForceMultiplier));
		}
		if (num > 3f)
		{
			if (info.attackNormal != Vector3.zero)
			{
				rigidBody.AddForce(info.attackNormal * num, (ForceMode)1);
			}
			else
			{
				rigidBody.AddExplosionForce(num * 5f, info.HitPositionWorld, 0.25f, 0.25f);
			}
		}
		base.Hurt(info);
	}
}
