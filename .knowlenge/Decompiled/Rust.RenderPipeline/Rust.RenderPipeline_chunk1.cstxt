using System.CodeDom.Compiler;
using System.ComponentModel;
using System.Runtime.CompilerServices;

[CompilerGenerated]
[EditorBrowsable(EditorBrowsableState.Never)]
[GeneratedCode("Unity.MonoScriptGenerator.MonoScriptInfoGenerator", null)]
internal class UnitySourceGeneratedAssemblyMonoScriptTypes_v1
{
	private struct MonoScriptData
	{
		public byte[] FilePathsData;

		public byte[] TypesData;

		public int TotalTypes;

		public int TotalFiles;

		public bool IsEditorOnly;
	}

	[MethodImpl(MethodImplOptions.AggressiveInlining)]
	private static MonoScriptData Get()
	{
		MonoScriptData result = default(MonoScriptData);
		result.FilePathsData = new byte[3178]
		{
			0, 0, 0, 2, 0, 0, 0, 61, 92, 80,
			97, 99, 107, 97, 103, 101, 115, 92, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 92, 82, 117,
			110, 116, 105, 109, 101, 92, 67, 97, 109, 101,
			114, 97, 66, 117, 102, 102, 101, 114, 83, 101,
			116, 116, 105, 110, 103, 115, 46, 99, 115, 0,
			0, 0, 1, 0, 0, 0, 55, 92, 80, 97,
			99, 107, 97, 103, 101, 115, 92, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 92, 82, 117, 110,
			116, 105, 109, 101, 92, 67, 97, 109, 101, 114,
			97, 68, 101, 98, 117, 103, 103, 101, 114, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 55,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 67, 97,
			109, 101, 114, 97, 82, 101, 110, 100, 101, 114,
			101, 114, 46, 99, 115, 0, 0, 0, 1, 0,
			0, 0, 61, 92, 80, 97, 99, 107, 97, 103,
			101, 115, 92, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 92, 82, 117, 110, 116, 105, 109, 101,
			92, 67, 97, 109, 101, 114, 97, 82, 101, 110,
			100, 101, 114, 101, 114, 67, 111, 112, 105, 101,
			114, 46, 99, 115, 0, 0, 0, 2, 0, 0,
			0, 55, 92, 80, 97, 99, 107, 97, 103, 101,
			115, 92, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 92, 82, 117, 110, 116, 105, 109, 101, 92,
			67, 97, 109, 101, 114, 97, 83, 101, 116, 116,
			105, 110, 103, 115, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 55, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 67, 97, 109, 101, 114, 97, 84,
			101, 120, 116, 117, 114, 101, 115, 46, 99, 115,
			0, 0, 0, 1, 0, 0, 0, 60, 92, 80,
			97, 99, 107, 97, 103, 101, 115, 92, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 92, 82, 117,
			110, 116, 105, 109, 101, 92, 70, 111, 114, 119,
			97, 114, 100, 80, 108, 117, 115, 83, 101, 116,
			116, 105, 110, 103, 115, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 56, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 71, 66, 117, 102, 102, 101,
			114, 84, 101, 120, 116, 117, 114, 101, 115, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 67,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 67, 111, 112, 121, 65,
			116, 116, 97, 99, 104, 109, 101, 110, 116, 115,
			80, 97, 115, 115, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 57, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			68, 101, 98, 117, 103, 80, 97, 115, 115, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 57,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 70, 105, 110, 97, 108,
			80, 97, 115, 115, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 59, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			71, 66, 117, 102, 102, 101, 114, 80, 97, 115,
			115, 46, 99, 115, 0, 0, 0, 1, 0, 0,
			0, 60, 92, 80, 97, 99, 107, 97, 103, 101,
			115, 92, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 92, 82, 117, 110, 116, 105, 109, 101, 92,
			80, 97, 115, 115, 101, 115, 92, 71, 101, 111,
			109, 101, 116, 114, 121, 80, 97, 115, 115, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 58,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 71, 105, 122, 109, 111,
			115, 80, 97, 115, 115, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 76, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 80, 97, 115, 115, 101, 115,
			92, 76, 105, 103, 104, 116, 105, 110, 103, 92,
			65, 100, 100, 105, 116, 105, 111, 110, 97, 108,
			76, 105, 103, 104, 116, 68, 97, 116, 97, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 77,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 76, 105, 103, 104, 116,
			105, 110, 103, 92, 65, 100, 100, 105, 116, 105,
			111, 110, 97, 108, 83, 104, 97, 100, 111, 119,
			68, 97, 116, 97, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 85, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			76, 105, 103, 104, 116, 105, 110, 103, 92, 68,
			101, 102, 101, 114, 114, 101, 100, 73, 110, 100,
			105, 114, 101, 99, 116, 76, 105, 103, 104, 116,
			105, 110, 103, 80, 97, 115, 115, 46, 99, 115,
			0, 0, 0, 1, 0, 0, 0, 89, 92, 80,
			97, 99, 107, 97, 103, 101, 115, 92, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 92, 82, 117,
			110, 116, 105, 109, 101, 92, 80, 97, 115, 115,
			101, 115, 92, 76, 105, 103, 104, 116, 105, 110,
			103, 92, 68, 101, 102, 101, 114, 114, 101, 100,
			73, 110, 100, 105, 114, 101, 99, 116, 76, 105,
			103, 104, 116, 105, 110, 103, 84, 101, 120, 116,
			117, 114, 101, 115, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 77, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			76, 105, 103, 104, 116, 105, 110, 103, 92, 68,
			101, 102, 101, 114, 114, 101, 100, 76, 105, 103,
			104, 116, 105, 110, 103, 80, 97, 115, 115, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 77,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 76, 105, 103, 104, 116,
			105, 110, 103, 92, 68, 105, 114, 101, 99, 116,
			105, 111, 110, 97, 108, 76, 105, 103, 104, 116,
			68, 97, 116, 97, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 81, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			76, 105, 103, 104, 116, 105, 110, 103, 92, 68,
			105, 114, 101, 99, 116, 105, 111, 110, 97, 108,
			83, 104, 97, 100, 111, 119, 67, 97, 115, 99,
			97, 100, 101, 46, 99, 115, 0, 0, 0, 1,
			0, 0, 0, 76, 92, 80, 97, 99, 107, 97,
			103, 101, 115, 92, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 92, 82, 117, 110, 116, 105, 109,
			101, 92, 80, 97, 115, 115, 101, 115, 92, 76,
			105, 103, 104, 116, 105, 110, 103, 92, 70, 111,
			114, 119, 97, 114, 100, 80, 108, 117, 115, 84,
			105, 108, 101, 115, 74, 111, 98, 46, 99, 115,
			0, 0, 0, 1, 0, 0, 0, 69, 92, 80,
			97, 99, 107, 97, 103, 101, 115, 92, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 92, 82, 117,
			110, 116, 105, 109, 101, 92, 80, 97, 115, 115,
			101, 115, 92, 76, 105, 103, 104, 116, 105, 110,
			103, 92, 76, 105, 103, 104, 116, 105, 110, 103,
			80, 97, 115, 115, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 71, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 80, 97, 115, 115, 101, 115, 92,
			76, 105, 103, 104, 116, 105, 110, 103, 92, 76,
			105, 103, 104, 116, 82, 101, 115, 111, 117, 114,
			99, 101, 115, 46, 99, 115, 0, 0, 0, 1,
			0, 0, 0, 72, 92, 80, 97, 99, 107, 97,
			103, 101, 115, 92, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 92, 82, 117, 110, 116, 105, 109,
			101, 92, 80, 97, 115, 115, 101, 115, 92, 76,
			105, 103, 104, 116, 105, 110, 103, 92, 83, 104,
			97, 100, 111, 119, 82, 101, 115, 111, 117, 114,
			99, 101, 115, 46, 99, 115, 0, 0, 0, 3,
			0, 0, 0, 64, 92, 80, 97, 99, 107, 97,
			103, 101, 115, 92, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 92, 82, 117, 110, 116, 105, 109,
			101, 92, 80, 97, 115, 115, 101, 115, 92, 76,
			105, 103, 104, 116, 105, 110, 103, 92, 83, 104,
			97, 100, 111, 119, 115, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 72, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 80, 97, 115, 115, 101, 115,
			92, 80, 111, 115, 116, 80, 114, 111, 99, 101,
			115, 115, 105, 110, 103, 92, 66, 108, 111, 111,
			109, 80, 97, 115, 115, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 75, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 80, 97, 115, 115, 101, 115,
			92, 80, 111, 115, 116, 80, 114, 111, 99, 101,
			115, 115, 105, 110, 103, 92, 67, 111, 108, 111,
			114, 76, 117, 116, 80, 97, 115, 115, 46, 99,
			115, 0, 0, 0, 1, 0, 0, 0, 73, 92,
			80, 97, 99, 107, 97, 103, 101, 115, 92, 82,
			117, 115, 116, 46, 82, 101, 110, 100, 101, 114,
			80, 105, 112, 101, 108, 105, 110, 101, 92, 82,
			117, 110, 116, 105, 109, 101, 92, 80, 97, 115,
			115, 101, 115, 92, 80, 111, 115, 116, 80, 114,
			111, 99, 101, 115, 115, 105, 110, 103, 92, 80,
			111, 115, 116, 70, 88, 80, 97, 115, 115, 46,
			99, 115, 0, 0, 0, 1, 0, 0, 0, 74,
			92, 80, 97, 99, 107, 97, 103, 101, 115, 92,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 92,
			82, 117, 110, 116, 105, 109, 101, 92, 80, 97,
			115, 115, 101, 115, 92, 80, 111, 115, 116, 80,
			114, 111, 99, 101, 115, 115, 105, 110, 103, 92,
			80, 111, 115, 116, 70, 88, 83, 116, 97, 99,
			107, 46, 99, 115, 0, 0, 0, 1, 0, 0,
			0, 57, 92, 80, 97, 99, 107, 97, 103, 101,
			115, 92, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 92, 82, 117, 110, 116, 105, 109, 101, 92,
			80, 97, 115, 115, 101, 115, 92, 83, 101, 116,
			117, 112, 80, 97, 115, 115, 46, 99, 115, 0,
			0, 0, 1, 0, 0, 0, 58, 92, 80, 97,
			99, 107, 97, 103, 101, 115, 92, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 92, 82, 117, 110,
			116, 105, 109, 101, 92, 80, 97, 115, 115, 101,
			115, 92, 83, 107, 121, 98, 111, 120, 80, 97,
			115, 115, 46, 99, 115, 0, 0, 0, 1, 0,
			0, 0, 70, 92, 80, 97, 99, 107, 97, 103,
			101, 115, 92, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 92, 82, 117, 110, 116, 105, 109, 101,
			92, 80, 97, 115, 115, 101, 115, 92, 85, 110,
			115, 117, 112, 112, 111, 114, 116, 101, 100, 83,
			104, 97, 100, 101, 114, 115, 80, 97, 115, 115,
			46, 99, 115, 0, 0, 0, 1, 0, 0, 0,
			54, 92, 80, 97, 99, 107, 97, 103, 101, 115,
			92, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			92, 82, 117, 110, 116, 105, 109, 101, 92, 80,
			105, 112, 101, 108, 105, 110, 101, 85, 116, 105,
			108, 115, 46, 99, 115, 0, 0, 0, 8, 0,
			0, 0, 55, 92, 80, 97, 99, 107, 97, 103,
			101, 115, 92, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 92, 82, 117, 110, 116, 105, 109, 101,
			92, 80, 111, 115, 116, 70, 88, 83, 101, 116,
			116, 105, 110, 103, 115, 46, 99, 115, 0, 0,
			0, 2, 0, 0, 0, 62, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 82, 101, 105, 110, 116, 101,
			114, 112, 114, 101, 116, 69, 120, 116, 101, 110,
			115, 105, 111, 110, 115, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 73, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 82, 101, 110, 100, 101, 114,
			105, 110, 103, 76, 97, 121, 101, 114, 77, 97,
			115, 107, 70, 105, 101, 108, 100, 65, 116, 116,
			114, 105, 98, 117, 116, 101, 46, 99, 115, 0,
			0, 0, 2, 0, 0, 0, 59, 92, 80, 97,
			99, 107, 97, 103, 101, 115, 92, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 92, 82, 117, 110,
			116, 105, 109, 101, 92, 82, 117, 115, 116, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 46, 99, 115, 0, 0, 0, 1,
			0, 0, 0, 64, 92, 80, 97, 99, 107, 97,
			103, 101, 115, 92, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 92, 82, 117, 110, 116, 105, 109,
			101, 92, 82, 117, 115, 116, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			65, 115, 115, 101, 116, 46, 99, 115, 0, 0,
			0, 1, 0, 0, 0, 71, 92, 80, 97, 99,
			107, 97, 103, 101, 115, 92, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 92, 82, 117, 110, 116,
			105, 109, 101, 92, 82, 117, 115, 116, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 65, 115, 115, 101, 116, 46, 69, 100,
			105, 116, 111, 114, 46, 99, 115, 0, 0, 0,
			1, 0, 0, 0, 65, 92, 80, 97, 99, 107,
			97, 103, 101, 115, 92, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 92, 82, 117, 110, 116, 105,
			109, 101, 92, 82, 117, 115, 116, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 67, 97, 109, 101, 114, 97, 46, 99, 115,
			0, 0, 0, 2, 0, 0, 0, 67, 92, 80,
			97, 99, 107, 97, 103, 101, 115, 92, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 92, 82, 117,
			110, 116, 105, 109, 101, 92, 82, 117, 115, 116,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 83, 101, 116, 116, 105, 110,
			103, 115, 46, 99, 115, 0, 0, 0, 3, 0,
			0, 0, 55, 92, 80, 97, 99, 107, 97, 103,
			101, 115, 92, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 92, 82, 117, 110, 116, 105, 109, 101,
			92, 83, 104, 97, 100, 111, 119, 83, 101, 116,
			116, 105, 110, 103, 115, 46, 99, 115
		};
		result.TypesData = new byte[3570]
		{
			0, 0, 0, 0, 48, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 124, 67, 97, 109, 101, 114, 97, 66,
			117, 102, 102, 101, 114, 83, 101, 116, 116, 105,
			110, 103, 115, 0, 0, 0, 0, 41, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 46, 124, 70, 120, 97,
			97, 83, 101, 116, 116, 105, 110, 103, 115, 0,
			0, 0, 0, 42, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 46, 82, 117, 110, 116, 105, 109,
			101, 124, 67, 97, 109, 101, 114, 97, 68, 101,
			98, 117, 103, 103, 101, 114, 0, 0, 0, 0,
			42, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 124, 67,
			97, 109, 101, 114, 97, 82, 101, 110, 100, 101,
			114, 101, 114, 0, 0, 0, 0, 48, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 124, 67, 97, 109, 101,
			114, 97, 82, 101, 110, 100, 101, 114, 101, 114,
			67, 111, 112, 105, 101, 114, 0, 0, 0, 0,
			42, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 124, 67,
			97, 109, 101, 114, 97, 83, 101, 116, 116, 105,
			110, 103, 115, 0, 0, 0, 0, 57, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 46, 67, 97, 109, 101,
			114, 97, 83, 101, 116, 116, 105, 110, 103, 115,
			124, 70, 105, 110, 97, 108, 66, 108, 101, 110,
			100, 77, 111, 100, 101, 0, 0, 0, 0, 42,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 46,
			82, 117, 110, 116, 105, 109, 101, 124, 67, 97,
			109, 101, 114, 97, 84, 101, 120, 116, 117, 114,
			101, 115, 0, 0, 0, 0, 47, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 124, 70, 111, 114, 119, 97,
			114, 100, 80, 108, 117, 115, 83, 101, 116, 116,
			105, 110, 103, 115, 0, 0, 0, 0, 43, 82,
			117, 115, 116, 46, 82, 101, 110, 100, 101, 114,
			80, 105, 112, 101, 108, 105, 110, 101, 46, 82,
			117, 110, 116, 105, 109, 101, 124, 71, 66, 117,
			102, 102, 101, 114, 84, 101, 120, 116, 117, 114,
			101, 115, 0, 0, 0, 0, 54, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 124, 67, 111, 112, 121, 65, 116, 116, 97,
			99, 104, 109, 101, 110, 116, 115, 80, 97, 115,
			115, 0, 0, 0, 0, 44, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 46, 82, 117, 110, 116,
			105, 109, 101, 46, 80, 97, 115, 115, 101, 115,
			124, 68, 101, 98, 117, 103, 80, 97, 115, 115,
			0, 0, 0, 0, 44, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 97, 115, 115, 101, 115, 124,
			70, 105, 110, 97, 108, 80, 97, 115, 115, 0,
			0, 0, 0, 46, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 46, 82, 117, 110, 116, 105, 109,
			101, 46, 80, 97, 115, 115, 101, 115, 124, 71,
			66, 117, 102, 102, 101, 114, 80, 97, 115, 115,
			0, 0, 0, 0, 47, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 97, 115, 115, 101, 115, 124,
			71, 101, 111, 109, 101, 116, 114, 121, 80, 97,
			115, 115, 0, 0, 0, 0, 45, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 124, 71, 105, 122, 109, 111, 115, 80, 97,
			115, 115, 0, 0, 0, 0, 63, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 46, 76, 105, 103, 104, 116, 105, 110, 103,
			124, 65, 100, 100, 105, 116, 105, 111, 110, 97,
			108, 76, 105, 103, 104, 116, 68, 97, 116, 97,
			0, 0, 0, 0, 64, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 97, 115, 115, 101, 115, 46,
			76, 105, 103, 104, 116, 105, 110, 103, 124, 65,
			100, 100, 105, 116, 105, 111, 110, 97, 108, 83,
			104, 97, 100, 111, 119, 68, 97, 116, 97, 0,
			0, 0, 0, 72, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 46, 82, 117, 110, 116, 105, 109,
			101, 46, 80, 97, 115, 115, 101, 115, 46, 76,
			105, 103, 104, 116, 105, 110, 103, 124, 68, 101,
			102, 101, 114, 114, 101, 100, 73, 110, 100, 105,
			114, 101, 99, 116, 76, 105, 103, 104, 116, 105,
			110, 103, 80, 97, 115, 115, 0, 0, 0, 0,
			76, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 46, 80,
			97, 115, 115, 101, 115, 46, 76, 105, 103, 104,
			116, 105, 110, 103, 124, 68, 101, 102, 101, 114,
			114, 101, 100, 73, 110, 100, 105, 114, 101, 99,
			116, 76, 105, 103, 104, 116, 105, 110, 103, 84,
			101, 120, 116, 117, 114, 101, 115, 0, 0, 0,
			0, 64, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 46, 82, 117, 110, 116, 105, 109, 101, 46,
			80, 97, 115, 115, 101, 115, 46, 76, 105, 103,
			104, 116, 105, 110, 103, 124, 68, 101, 102, 101,
			114, 114, 101, 100, 76, 105, 103, 104, 116, 105,
			110, 103, 80, 97, 115, 115, 0, 0, 0, 0,
			64, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 46, 80,
			97, 115, 115, 101, 115, 46, 76, 105, 103, 104,
			116, 105, 110, 103, 124, 68, 105, 114, 101, 99,
			116, 105, 111, 110, 97, 108, 76, 105, 103, 104,
			116, 68, 97, 116, 97, 0, 0, 0, 0, 68,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 46,
			82, 117, 110, 116, 105, 109, 101, 46, 80, 97,
			115, 115, 101, 115, 46, 76, 105, 103, 104, 116,
			105, 110, 103, 124, 68, 105, 114, 101, 99, 116,
			105, 111, 110, 97, 108, 83, 104, 97, 100, 111,
			119, 67, 97, 115, 99, 97, 100, 101, 0, 0,
			0, 0, 63, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 46, 82, 117, 110, 116, 105, 109, 101,
			46, 80, 97, 115, 115, 101, 115, 46, 76, 105,
			103, 104, 116, 105, 110, 103, 124, 70, 111, 114,
			119, 97, 114, 100, 80, 108, 117, 115, 84, 105,
			108, 101, 115, 74, 111, 98, 0, 0, 0, 0,
			56, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 46, 80,
			97, 115, 115, 101, 115, 46, 76, 105, 103, 104,
			116, 105, 110, 103, 124, 76, 105, 103, 104, 116,
			105, 110, 103, 80, 97, 115, 115, 0, 0, 0,
			0, 58, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 46, 82, 117, 110, 116, 105, 109, 101, 46,
			80, 97, 115, 115, 101, 115, 46, 76, 105, 103,
			104, 116, 105, 110, 103, 124, 76, 105, 103, 104,
			116, 82, 101, 115, 111, 117, 114, 99, 101, 115,
			0, 0, 0, 0, 59, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 97, 115, 115, 101, 115, 46,
			76, 105, 103, 104, 116, 105, 110, 103, 124, 83,
			104, 97, 100, 111, 119, 82, 101, 115, 111, 117,
			114, 99, 101, 115, 0, 0, 0, 0, 51, 82,
			117, 115, 116, 46, 82, 101, 110, 100, 101, 114,
			80, 105, 112, 101, 108, 105, 110, 101, 46, 82,
			117, 110, 116, 105, 109, 101, 46, 80, 97, 115,
			115, 101, 115, 46, 76, 105, 103, 104, 116, 105,
			110, 103, 124, 83, 104, 97, 100, 111, 119, 115,
			0, 0, 0, 0, 76, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 97, 115, 115, 101, 115, 46,
			76, 105, 103, 104, 116, 105, 110, 103, 46, 83,
			104, 97, 100, 111, 119, 115, 124, 83, 104, 97,
			100, 111, 119, 101, 100, 68, 105, 114, 101, 99,
			116, 105, 111, 110, 97, 108, 76, 105, 103, 104,
			116, 0, 0, 0, 0, 75, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 46, 82, 117, 110, 116,
			105, 109, 101, 46, 80, 97, 115, 115, 101, 115,
			46, 76, 105, 103, 104, 116, 105, 110, 103, 46,
			83, 104, 97, 100, 111, 119, 115, 124, 83, 104,
			97, 100, 111, 119, 101, 100, 65, 100, 100, 105,
			116, 105, 111, 110, 97, 108, 76, 105, 103, 104,
			116, 0, 0, 0, 0, 59, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 46, 82, 117, 110, 116,
			105, 109, 101, 46, 80, 97, 115, 115, 101, 115,
			46, 80, 111, 115, 116, 80, 114, 111, 99, 101,
			115, 115, 105, 110, 103, 124, 66, 108, 111, 111,
			109, 80, 97, 115, 115, 0, 0, 0, 0, 62,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 46,
			82, 117, 110, 116, 105, 109, 101, 46, 80, 97,
			115, 115, 101, 115, 46, 80, 111, 115, 116, 80,
			114, 111, 99, 101, 115, 115, 105, 110, 103, 124,
			67, 111, 108, 111, 114, 76, 117, 116, 80, 97,
			115, 115, 0, 0, 0, 0, 60, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 46, 80, 111, 115, 116, 80, 114, 111, 99,
			101, 115, 115, 105, 110, 103, 124, 80, 111, 115,
			116, 70, 88, 80, 97, 115, 115, 0, 0, 0,
			0, 61, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 46, 82, 117, 110, 116, 105, 109, 101, 46,
			80, 97, 115, 115, 101, 115, 46, 80, 111, 115,
			116, 80, 114, 111, 99, 101, 115, 115, 105, 110,
			103, 124, 80, 111, 115, 116, 70, 88, 83, 116,
			97, 99, 107, 0, 0, 0, 0, 44, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 46, 80, 97, 115, 115,
			101, 115, 124, 83, 101, 116, 117, 112, 80, 97,
			115, 115, 0, 0, 0, 0, 45, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 124, 83, 107, 121, 98, 111, 120, 80, 97,
			115, 115, 0, 0, 0, 0, 57, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 46, 80, 97, 115, 115, 101,
			115, 124, 85, 110, 115, 117, 112, 112, 111, 114,
			116, 101, 100, 83, 104, 97, 100, 101, 114, 115,
			80, 97, 115, 115, 0, 0, 0, 0, 41, 82,
			117, 115, 116, 46, 82, 101, 110, 100, 101, 114,
			80, 105, 112, 101, 108, 105, 110, 101, 46, 82,
			117, 110, 116, 105, 109, 101, 124, 80, 105, 112,
			101, 108, 105, 110, 101, 85, 116, 105, 108, 115,
			0, 0, 0, 0, 42, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 124, 80, 111, 115, 116, 70, 88, 83,
			101, 116, 116, 105, 110, 103, 115, 0, 0, 0,
			0, 56, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 46, 82, 117, 110, 116, 105, 109, 101, 46,
			80, 111, 115, 116, 70, 88, 83, 101, 116, 116,
			105, 110, 103, 115, 124, 66, 108, 111, 111, 109,
			83, 101, 116, 116, 105, 110, 103, 115, 0, 0,
			0, 0, 67, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 46, 82, 117, 110, 116, 105, 109, 101,
			46, 80, 111, 115, 116, 70, 88, 83, 101, 116,
			116, 105, 110, 103, 115, 124, 67, 111, 108, 111,
			114, 65, 100, 106, 117, 115, 116, 109, 101, 110,
			116, 115, 83, 101, 116, 116, 105, 110, 103, 115,
			0, 0, 0, 0, 63, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 111, 115, 116, 70, 88, 83,
			101, 116, 116, 105, 110, 103, 115, 124, 67, 104,
			97, 110, 110, 101, 108, 77, 105, 120, 101, 114,
			83, 101, 116, 116, 105, 110, 103, 115, 0, 0,
			0, 0, 63, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 46, 82, 117, 110, 116, 105, 109, 101,
			46, 80, 111, 115, 116, 70, 88, 83, 101, 116,
			116, 105, 110, 103, 115, 124, 87, 104, 105, 116,
			101, 66, 97, 108, 97, 110, 99, 101, 83, 101,
			116, 116, 105, 110, 103, 115, 0, 0, 0, 0,
			62, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 46, 80,
			111, 115, 116, 70, 88, 83, 101, 116, 116, 105,
			110, 103, 115, 124, 83, 112, 108, 105, 116, 84,
			111, 110, 105, 110, 103, 83, 101, 116, 116, 105,
			110, 103, 115, 0, 0, 0, 0, 62, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 46, 80, 111, 115, 116,
			70, 88, 83, 101, 116, 116, 105, 110, 103, 115,
			124, 84, 111, 110, 101, 77, 97, 112, 112, 105,
			110, 103, 83, 101, 116, 116, 105, 110, 103, 115,
			0, 0, 0, 0, 76, 82, 117, 115, 116, 46,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 46, 82, 117, 110, 116, 105,
			109, 101, 46, 80, 111, 115, 116, 70, 88, 83,
			101, 116, 116, 105, 110, 103, 115, 124, 83, 104,
			97, 100, 111, 119, 115, 77, 105, 100, 116, 111,
			110, 101, 115, 72, 105, 103, 104, 108, 105, 103,
			104, 116, 115, 83, 101, 116, 116, 105, 110, 103,
			115, 0, 0, 0, 0, 49, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 46, 82, 117, 110, 116,
			105, 109, 101, 124, 82, 101, 105, 110, 116, 101,
			114, 112, 114, 101, 116, 69, 120, 116, 101, 110,
			115, 105, 111, 110, 115, 0, 0, 0, 0, 58,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 46,
			82, 117, 110, 116, 105, 109, 101, 46, 82, 101,
			105, 110, 116, 101, 114, 112, 114, 101, 116, 69,
			120, 116, 101, 110, 115, 105, 111, 110, 115, 124,
			73, 110, 116, 70, 108, 111, 97, 116, 0, 0,
			0, 0, 60, 82, 117, 115, 116, 46, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 46, 82, 117, 110, 116, 105, 109, 101,
			124, 82, 101, 110, 100, 101, 114, 105, 110, 103,
			76, 97, 121, 101, 114, 77, 97, 115, 107, 70,
			105, 101, 108, 100, 65, 116, 116, 114, 105, 98,
			117, 116, 101, 0, 0, 0, 0, 46, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 124, 82, 117, 115, 116,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 0, 0, 0, 0, 64, 82,
			117, 115, 116, 46, 82, 101, 110, 100, 101, 114,
			80, 105, 112, 101, 108, 105, 110, 101, 46, 82,
			117, 110, 116, 105, 109, 101, 46, 82, 117, 115,
			116, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 124, 80, 105, 112, 101,
			108, 105, 110, 101, 77, 97, 116, 101, 114, 105,
			97, 108, 115, 1, 0, 0, 0, 51, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 124, 82, 117, 115, 116,
			82, 101, 110, 100, 101, 114, 80, 105, 112, 101,
			108, 105, 110, 101, 65, 115, 115, 101, 116, 1,
			0, 0, 0, 51, 82, 117, 115, 116, 46, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 46, 82, 117, 110, 116, 105, 109,
			101, 124, 82, 117, 115, 116, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			65, 115, 115, 101, 116, 0, 0, 0, 0, 52,
			82, 117, 115, 116, 46, 82, 101, 110, 100, 101,
			114, 80, 105, 112, 101, 108, 105, 110, 101, 46,
			82, 117, 110, 116, 105, 109, 101, 124, 82, 117,
			115, 116, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 67, 97, 109, 101,
			114, 97, 0, 0, 0, 0, 54, 82, 117, 115,
			116, 46, 82, 101, 110, 100, 101, 114, 80, 105,
			112, 101, 108, 105, 110, 101, 46, 82, 117, 110,
			116, 105, 109, 101, 124, 82, 117, 115, 116, 82,
			101, 110, 100, 101, 114, 80, 105, 112, 101, 108,
			105, 110, 101, 83, 101, 116, 116, 105, 110, 103,
			115, 0, 0, 0, 0, 70, 82, 117, 115, 116,
			46, 82, 101, 110, 100, 101, 114, 80, 105, 112,
			101, 108, 105, 110, 101, 46, 82, 117, 110, 116,
			105, 109, 101, 46, 82, 117, 115, 116, 82, 101,
			110, 100, 101, 114, 80, 105, 112, 101, 108, 105,
			110, 101, 83, 101, 116, 116, 105, 110, 103, 115,
			124, 80, 105, 112, 101, 108, 105, 110, 101, 83,
			104, 97, 100, 101, 114, 115, 0, 0, 0, 0,
			42, 82, 117, 115, 116, 46, 82, 101, 110, 100,
			101, 114, 80, 105, 112, 101, 108, 105, 110, 101,
			46, 82, 117, 110, 116, 105, 109, 101, 124, 83,
			104, 97, 100, 111, 119, 83, 101, 116, 116, 105,
			110, 103, 115, 0, 0, 0, 0, 59, 82, 117,
			115, 116, 46, 82, 101, 110, 100, 101, 114, 80,
			105, 112, 101, 108, 105, 110, 101, 46, 82, 117,
			110, 116, 105, 109, 101, 46, 83, 104, 97, 100,
			111, 119, 83, 101, 116, 116, 105, 110, 103, 115,
			124, 68, 105, 114, 101, 99, 116, 105, 111, 110,
			97, 108, 76, 105, 103, 104, 116, 0, 0, 0,
			0, 58, 82, 117, 115, 116, 46, 82, 101, 110,
			100, 101, 114, 80, 105, 112, 101, 108, 105, 110,
			101, 46, 82, 117, 110, 116, 105, 109, 101, 46,
			83, 104, 97, 100, 111, 119, 83, 101, 116, 116,
			105, 110, 103, 115, 124, 65, 100, 100, 105, 116,
			105, 111, 110, 97, 108, 76, 105, 103, 104, 116
		};
		result.TotalFiles = 43;
		result.TotalTypes = 59;
		result.IsEditorOnly = false;
		return result;
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;

[Serializable]
public struct CameraBufferSettings
{
	[Serializable]
	public struct FxaaSettings
	{
		public enum Quality
		{
			Low,
			Medium,
			High
		}

		public bool enabled;

		public Quality quality;

		[Range(0.0312f, 0.0833f)]
		public float fixedThreshold;

		[Range(0.063f, 0.333f)]
		public float relativeThreshold;

		[Range(0f, 1f)]
		public float subpixelBlending;
	}

	public enum BicubicRescalingMode
	{
		Off,
		UpOnly,
		UpAndDown
	}

	public bool allowHDR;

	public bool copyColor;

	public bool copyColorReflection;

	public bool copyDepth;

	public bool copyDepthReflection;

	[Range(0.1f, 2f)]
	public float renderScale;

	public BicubicRescalingMode bicubicRescaling;

	public FxaaSettings fxaaSettings;
}


using System.Diagnostics;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class CameraDebugger
{
	private const string FORWARD_PLUS_PANEL_NAME = "Forward+";

	private static readonly int opacityID = Shader.PropertyToID("_DebugOpacity");

	private static Material material;

	private static bool showTiles;

	private static float opacity = 0.5f;

	public static bool IsActive
	{
		get
		{
			if (showTiles)
			{
				return opacity > 0f;
			}
			return false;
		}
	}

	[Conditional("DEVELOPMENT_BUILD")]
	[Conditional("UNITY_EDITOR")]
	public static void Initialize(Material cameraDebuggerMaterial)
	{
		//IL_0025: Unknown result type (might be due to invalid IL or missing references)
		//IL_002a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0035: Unknown result type (might be due to invalid IL or missing references)
		//IL_0040: Unknown result type (might be due to invalid IL or missing references)
		//IL_0065: Unknown result type (might be due to invalid IL or missing references)
		//IL_008a: Unknown result type (might be due to invalid IL or missing references)
		//IL_00af: Expected O, but got Unknown
		//IL_00af: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d4: Expected O, but got Unknown
		//IL_00d5: Expected O, but got Unknown
		//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
		//IL_0117: Expected O, but got Unknown
		//IL_0117: Unknown result type (might be due to invalid IL or missing references)
		//IL_013c: Expected O, but got Unknown
		//IL_013d: Expected O, but got Unknown
		material = cameraDebuggerMaterial;
		ObservableList<Widget> children = DebugManager.instance.GetPanel("Forward+", true, 0, false).children;
		Widget[] array = new Widget[2];
		FloatField val = new FloatField
		{
			displayName = "Opacity",
			tooltip = "Opacity of the debug overlay.",
			min = () => 0f,
			max = () => 1f
		};
		((Field<float>)val).getter = () => opacity;
		((Field<float>)val).setter = delegate(float value)
		{
			opacity = value;
		};
		array[0] = (Widget)val;
		BoolField val2 = new BoolField
		{
			displayName = "Show Tiles",
			tooltip = "Whether the debug overlay is shown."
		};
		((Field<bool>)val2).getter = () => showTiles;
		((Field<bool>)val2).setter = delegate(bool value)
		{
			showTiles = value;
		};
		array[1] = (Widget)val2;
		children.Add((Widget[])(object)array);
	}

	[Conditional("DEVELOPMENT_BUILD")]
	[Conditional("UNITY_EDITOR")]
	public static void Render(RenderGraphContext context)
	{
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.SetGlobalFloat(opacityID, opacity);
		cmd.DrawProcedural(Matrix4x4.identity, material, 0, (MeshTopology)0, 3);
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
	}

	[Conditional("DEVELOPMENT_BUILD")]
	[Conditional("UNITY_EDITOR")]
	public static void Cleanup()
	{
		DebugManager.instance.RemovePanel("Forward+");
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using Rust.RenderPipeline.Runtime.Passes.PostProcessing;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class CameraRenderer
{
	public const float RENDERSCALE_MIN = 0.1f;

	public const float RENDERSCALE_MAX = 2f;

	private static readonly CameraSettings defaultCameraSettings = new CameraSettings();

	private readonly PostFXStack postFXStack = new PostFXStack();

	private readonly RustRenderPipeline.PipelineMaterials pipelineMaterials;

	public CameraRenderer(RustRenderPipeline.PipelineMaterials pipelineMaterials)
	{
		this.pipelineMaterials = pipelineMaterials;
	}

	public void Render(RenderGraph renderGraph, ScriptableRenderContext context, Camera camera, RustRenderPipelineSettings settings)
	{
		//IL_0036: Unknown result type (might be due to invalid IL or missing references)
		//IL_0080: Unknown result type (might be due to invalid IL or missing references)
		//IL_0087: Invalid comparison between Unknown and I4
		//IL_0125: Unknown result type (might be due to invalid IL or missing references)
		//IL_012a: Unknown result type (might be due to invalid IL or missing references)
		//IL_013f: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b5: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ea: Unknown result type (might be due to invalid IL or missing references)
		//IL_01eb: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f2: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
		//IL_01fc: Unknown result type (might be due to invalid IL or missing references)
		//IL_021d: Unknown result type (might be due to invalid IL or missing references)
		//IL_021f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0269: Unknown result type (might be due to invalid IL or missing references)
		//IL_027c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0235: Unknown result type (might be due to invalid IL or missing references)
		//IL_0237: Unknown result type (might be due to invalid IL or missing references)
		CameraBufferSettings cameraBuffer = settings.cameraBuffer;
		PostFXSettings postFXSettings = settings.postFXSettings;
		ShadowSettings shadows = settings.shadows;
		RustRenderPipelineCamera rustRenderPipelineCamera = default(RustRenderPipelineCamera);
		ProfilingSampler val;
		CameraSettings settings2;
		if (((Component)camera).TryGetComponent<RustRenderPipelineCamera>(ref rustRenderPipelineCamera))
		{
			val = rustRenderPipelineCamera.Sampler;
			settings2 = rustRenderPipelineCamera.Settings;
		}
		else
		{
			val = ProfilingSampler.Get<CameraType>(camera.cameraType);
			settings2 = defaultCameraSettings;
		}
		if (settings2.overridePostFX)
		{
			postFXSettings = settings2.postFXSettings;
		}
		bool hasActivePostFX = settings.postProcessingEnabled && settings2.postProcessingEnabled && (Object)(object)postFXSettings != (Object)null && PostFXSettings.AreApplicableTo(camera);
		bool useColorTexture;
		bool useDepthTexture;
		if ((int)camera.cameraType == 16)
		{
			useColorTexture = cameraBuffer.copyColorReflection;
			useDepthTexture = cameraBuffer.copyDepthReflection || settings.renderPath == RustRenderPipelineSettings.RenderPath.Deferred;
		}
		else
		{
			useColorTexture = cameraBuffer.copyColor && settings2.copyColor;
			useDepthTexture = (cameraBuffer.copyDepth && settings2.copyDepth) || settings.renderPath == RustRenderPipelineSettings.RenderPath.Deferred;
		}
		float renderScale = settings2.GetRenderScale(cameraBuffer.renderScale);
		bool flag = !Mathf.Approximately(renderScale, 1f);
		ScriptableCullingParameters val2 = default(ScriptableCullingParameters);
		if (!camera.TryGetCullingParameters(ref val2))
		{
			return;
		}
		((ScriptableCullingParameters)(ref val2)).shadowDistance = Mathf.Min(shadows.maxDistance, camera.farClipPlane);
		CullingResults cullingResults = ((ScriptableRenderContext)(ref context)).Cull(ref val2);
		cameraBuffer.allowHDR &= camera.allowHDR;
		Vector2Int cameraBufferSize = default(Vector2Int);
		if (flag)
		{
			renderScale = Mathf.Clamp(renderScale, 0.1f, 2f);
			((Vector2Int)(ref cameraBufferSize)).x = (int)((float)camera.pixelWidth * renderScale);
			((Vector2Int)(ref cameraBufferSize)).y = (int)((float)camera.pixelHeight * renderScale);
		}
		else
		{
			((Vector2Int)(ref cameraBufferSize)).x = camera.pixelWidth;
			((Vector2Int)(ref cameraBufferSize)).y = camera.pixelHeight;
		}
		cameraBuffer.fxaaSettings.enabled &= settings2.allowFXAA;
		RenderGraphParameters val3 = default(RenderGraphParameters);
		val3.commandBuffer = CommandBufferPool.Get();
		val3.currentFrameIndex = Time.frameCount;
		val3.executionName = val.name;
		val3.rendererListCulling = true;
		val3.scriptableRenderContext = context;
		RenderGraphParameters val4 = val3;
		RenderGraphExecution val5 = renderGraph.RecordAndExecute(ref val4);
		try
		{
			RenderGraphProfilingScope val6 = default(RenderGraphProfilingScope);
			((RenderGraphProfilingScope)(ref val6))..ctor(renderGraph, val);
			try
			{
				switch (settings.renderPath)
				{
				case RustRenderPipelineSettings.RenderPath.ForwardPlus:
					ForwardPlusRenderPath(renderGraph, cullingResults, cameraBufferSize, settings, camera, settings2, hasActivePostFX, useColorTexture, useDepthTexture);
					break;
				case RustRenderPipelineSettings.RenderPath.Deferred:
					DeferredRenderPath(renderGraph, cullingResults, cameraBufferSize, settings, camera, settings2, hasActivePostFX, useColorTexture, useDepthTexture);
					break;
				}
			}
			finally
			{
				((IDisposable)(RenderGraphProfilingScope)(ref val6)/*cast due to .constrained prefix*/).Dispose();
			}
		}
		finally
		{
			((IDisposable)(RenderGraphExecution)(ref val5)/*cast due to .constrained prefix*/).Dispose();
		}
		((ScriptableRenderContext)(ref context)).ExecuteCommandBuffer(val4.commandBuffer);
		((ScriptableRenderContext)(ref context)).Submit();
		CommandBufferPool.Release(val4.commandBuffer);
	}

	private void ForwardPlusRenderPath(RenderGraph renderGraph, CullingResults cullingResults, Vector2Int cameraBufferSize, RustRenderPipelineSettings settings, Camera camera, CameraSettings cameraSettings, bool hasActivePostFX, bool useColorTexture, bool useDepthTexture)
	{
		//IL_0019: Unknown result type (might be due to invalid IL or missing references)
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0047: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_009c: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
		CameraBufferSettings cameraBuffer = settings.cameraBuffer;
		PostFXSettings postFXSettings = settings.postFXSettings;
		ShadowSettings shadows = settings.shadows;
		LightResources lightResources = LightingPass.Record(renderGraph, cullingResults, cameraBufferSize, settings.forwardPlus, shadows, cameraSettings.maskLights ? cameraSettings.renderingLayerMask : (-1));
		CameraTextures textures = SetupPass.Record(renderGraph, useColorTexture, useDepthTexture, cameraBuffer.allowHDR, cameraBufferSize, camera);
		GeometryPass.Record(renderGraph, camera, cullingResults, cameraSettings.renderingLayerMask, opaque: true, in textures, in lightResources);
		SkyboxPass.Record(renderGraph, camera, in textures);
		CameraRendererCopier copier = new CameraRendererCopier(pipelineMaterials.cameraRendererMaterial, camera, cameraSettings.finalBlendMode);
		CopyAttachmentsPass.Record(renderGraph, useColorTexture, useDepthTexture, copier, in textures);
		GeometryPass.Record(renderGraph, camera, cullingResults, cameraSettings.renderingLayerMask, opaque: false, in textures, in lightResources);
		if (hasActivePostFX)
		{
			postFXStack.CameraBufferSettings = cameraBuffer;
			postFXStack.CameraBufferSize = cameraBufferSize;
			postFXStack.Camera = camera;
			postFXStack.FinalBlendMode = cameraSettings.finalBlendMode;
			postFXStack.Settings = postFXSettings;
			PostFXPass.Record(renderGraph, postFXStack, (int)settings.colorLutResolution, cameraSettings.keepAlpha, in textures);
		}
		else
		{
			FinalPass.Record(renderGraph, copier, in textures);
		}
	}

	private void DeferredRenderPath(RenderGraph renderGraph, CullingResults cullingResults, Vector2Int cameraBufferSize, RustRenderPipelineSettings settings, Camera camera, CameraSettings cameraSettings, bool hasActivePostFX, bool useColorTexture, bool useDepthTexture)
	{
		//IL_0034: Unknown result type (might be due to invalid IL or missing references)
		//IL_0035: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_0077: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00db: Unknown result type (might be due to invalid IL or missing references)
		//IL_0108: Unknown result type (might be due to invalid IL or missing references)
		//IL_0130: Unknown result type (might be due to invalid IL or missing references)
		CameraBufferSettings cameraBuffer = settings.cameraBuffer;
		PostFXSettings postFXSettings = settings.postFXSettings;
		ShadowSettings shadows = settings.shadows;
		CameraRendererCopier copier = new CameraRendererCopier(pipelineMaterials.cameraRendererMaterial, camera, cameraSettings.finalBlendMode);
		LightResources lightResources = LightingPass.Record(renderGraph, cullingResults, cameraBufferSize, settings.forwardPlus, shadows, cameraSettings.maskLights ? cameraSettings.renderingLayerMask : (-1));
		CameraTextures textures = SetupPass.Record(renderGraph, useColorTexture, useDepthTexture, cameraBuffer.allowHDR, cameraBufferSize, camera);
		GBufferTextures gBufferTextures = GBufferPass.Record(renderGraph, camera, cameraBufferSize, cameraBuffer.allowHDR, cullingResults, cameraSettings.renderingLayerMask, in textures);
		CopyAttachmentsPass.Record(renderGraph, copyColor: false, useDepthTexture, copier, in textures);
		DeferredIndirectLightingTextures indirectLightingTextures = DeferredIndirectLightingPass.Record_DrawIndirectLighting(renderGraph, camera, pipelineMaterials.deferredIndirectLightingMaterial, textures, gBufferTextures, cameraBufferSize, cameraBuffer.allowHDR);
		DeferredIndirectLightingPass.Record_CombineIndirectLighting(renderGraph, textures, camera, pipelineMaterials.deferredIndirectLightingMaterial, indirectLightingTextures);
		DeferredLightingPass.Record(renderGraph, pipelineMaterials.deferredLightingMaterial, in textures, in gBufferTextures, cullingResults, shadows, cameraSettings.renderingLayerMask, camera, cameraSettings, lightResources);
		SkyboxPass.Record(renderGraph, camera, in textures);
		CopyAttachmentsPass.Record(renderGraph, useColorTexture, copyDepth: false, copier, in textures);
		GeometryPass.Record(renderGraph, camera, cullingResults, cameraSettings.renderingLayerMask, opaque: false, in textures, in lightResources);
		if (hasActivePostFX)
		{
			postFXStack.CameraBufferSettings = cameraBuffer;
			postFXStack.CameraBufferSize = cameraBufferSize;
			postFXStack.Camera = camera;
			postFXStack.FinalBlendMode = cameraSettings.finalBlendMode;
			postFXStack.Settings = postFXSettings;
			PostFXPass.Record(renderGraph, postFXStack, (int)settings.colorLutResolution, cameraSettings.keepAlpha, in textures);
		}
		else
		{
			FinalPass.Record(renderGraph, copier, in textures);
		}
	}

	public static void ExecuteCameraEventCommandBuffers(RenderGraphContext context, Camera camera, CameraEvent cameraEvent)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Invalid comparison between Unknown and I4
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_001f: Unknown result type (might be due to invalid IL or missing references)
		if ((int)camera.cameraType != 16)
		{
			if (!PipelineUtils.CameraEventToString.TryGetValue(cameraEvent, out var value))
			{
				Debug.LogError((object)$"CameraEvent string not found for camera event {cameraEvent}!");
			}
			context.cmd.BeginSample(value);
			((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
			context.cmd.Clear();
			CommandBuffer[] commandBuffers = camera.GetCommandBuffers(cameraEvent);
			foreach (CommandBuffer val in commandBuffers)
			{
				((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(val);
				val.Clear();
			}
			context.cmd.EndSample(value);
			((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
			context.cmd.Clear();
		}
	}

	public void Dispose()
	{
	}
}


using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Rendering;

public readonly struct CameraRendererCopier
{
	private static readonly bool copyTextureSupported = (int)SystemInfo.copyTextureSupport > 0;

	private static readonly Rect fullViewRect = new Rect(0f, 0f, 1f, 1f);

	private static readonly int sourceTextureId = Shader.PropertyToID("_SourceTexture");

	private static readonly int srcBlendId = Shader.PropertyToID("_CameraSrcBlend");

	private static readonly int dstBlendId = Shader.PropertyToID("_CameraDstBlend");

	private readonly CameraSettings.FinalBlendMode finalBlendMode;

	private readonly Material material;

	private readonly Camera camera;

	public static bool RequiresRenderTargetResetAfterCopy => !copyTextureSupported;

	public Camera Camera => camera;

	public CameraRendererCopier(Material material, Camera camera, CameraSettings.FinalBlendMode finalBlendMode)
	{
		this.material = material;
		this.camera = camera;
		this.finalBlendMode = finalBlendMode;
	}

	public void Copy(CommandBuffer commandBuffer, RenderTargetIdentifier from, RenderTargetIdentifier to, bool isDepth)
	{
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		if (copyTextureSupported)
		{
			commandBuffer.CopyTexture(from, to);
		}
		else
		{
			CopyByDrawing(commandBuffer, from, to, isDepth);
		}
	}

	public void CopyByDrawing(CommandBuffer commandBuffer, RenderTargetIdentifier from, RenderTargetIdentifier to, bool isDepth)
	{
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer.SetGlobalTexture(sourceTextureId, from);
		commandBuffer.SetRenderTarget(to, (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		commandBuffer.SetViewport(camera.pixelRect);
		commandBuffer.DrawProcedural(Matrix4x4.identity, material, isDepth ? 1 : 0, (MeshTopology)0, 3);
	}

	public void CopyToCameraTarget(CommandBuffer commandBuffer, RenderTargetIdentifier from)
	{
		//IL_000c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0023: Unknown result type (might be due to invalid IL or missing references)
		//IL_0034: Unknown result type (might be due to invalid IL or missing references)
		//IL_003c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0047: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_0059: Unknown result type (might be due to invalid IL or missing references)
		//IL_0076: Unknown result type (might be due to invalid IL or missing references)
		//IL_0081: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer.SetGlobalFloat(srcBlendId, (float)finalBlendMode.source);
		commandBuffer.SetGlobalFloat(dstBlendId, (float)finalBlendMode.destination);
		commandBuffer.SetGlobalTexture(sourceTextureId, from);
		commandBuffer.SetRenderTarget(RenderTargetIdentifier.op_Implicit((BuiltinRenderTextureType)2), (RenderBufferLoadAction)(((int)finalBlendMode.destination == 0 && camera.rect == fullViewRect) ? 2 : 0), (RenderBufferStoreAction)0);
		commandBuffer.SetViewport(camera.pixelRect);
		commandBuffer.DrawProcedural(Matrix4x4.identity, material, 0, (MeshTopology)0, 3);
		commandBuffer.SetGlobalFloat(srcBlendId, 1f);
		commandBuffer.SetGlobalFloat(dstBlendId, 0f);
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Rendering;

[Serializable]
public class CameraSettings
{
	public enum RenderScaleMode
	{
		Inherit,
		Multiply,
		Override
	}

	[Serializable]
	public struct FinalBlendMode
	{
		public BlendMode source;

		public BlendMode destination;
	}

	public bool copyColor = true;

	public bool copyDepth = true;

	[RenderingLayerMaskField]
	public int renderingLayerMask = -1;

	public bool maskLights;

	public RenderScaleMode renderScaleMode;

	[Range(0.1f, 2f)]
	public float renderScale = 1f;

	public bool postProcessingEnabled = true;

	public bool overridePostFX;

	public PostFXSettings postFXSettings;

	public FinalBlendMode finalBlendMode = new FinalBlendMode
	{
		source = (BlendMode)1,
		destination = (BlendMode)0
	};

	public bool allowFXAA;

	[Tooltip("Alpha is used to store Luma by default, which makes FXAA look better. Ticking this maintains transparency in the alpha channel after color grading")]
	public bool keepAlpha;

	public float GetRenderScale(float scale)
	{
		return renderScaleMode switch
		{
			RenderScaleMode.Inherit => scale, 
			RenderScaleMode.Override => renderScale, 
			RenderScaleMode.Multiply => scale * renderScale, 
			_ => scale, 
		};
	}
}


using UnityEngine.Experimental.Rendering.RenderGraphModule;

public readonly ref struct CameraTextures
{
	public readonly TextureHandle colorAttachment;

	public readonly TextureHandle depthAttachment;

	public readonly TextureHandle colorCopy;

	public readonly TextureHandle depthCopy;

	public CameraTextures(TextureHandle colorAttachment, TextureHandle depthAttachment, TextureHandle colorCopy, TextureHandle depthCopy)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		//IL_000f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		this.colorAttachment = colorAttachment;
		this.depthAttachment = depthAttachment;
		this.colorCopy = colorCopy;
		this.depthCopy = depthCopy;
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;

[Serializable]
public struct ForwardPlusSettings
{
	public enum TileSize
	{
		Default = 0,
		_16 = 0x10,
		_32 = 0x20,
		_64 = 0x40,
		_128 = 0x80,
		_256 = 0x100
	}

	[Tooltip("Tile size in pixels per dimension, default is 64.")]
	public TileSize tileSize;

	[Range(0f, 99f)]
	[Tooltip("Maximum allowed lights per tile, 0 means default, which is 31.")]
	public int maxLightsPerTile;
}


using System;
using UnityEngine.Experimental.Rendering.RenderGraphModule;

public readonly ref struct GBufferTextures
{
	public const int GBUFFER_TEXTURE_COUNT = 4;

	public readonly TextureHandle[] gBufferTextureHandles;

	public GBufferTextures(TextureHandle[] gBufferTextureHandles)
	{
		this.gBufferTextureHandles = (TextureHandle[])(object)new TextureHandle[4];
		Array.Copy(gBufferTextureHandles, this.gBufferTextureHandles, 4);
	}
}


using System;
using System.Collections.Generic;
using System.Linq;
using UnityEngine.Rendering;

public static class PipelineUtils
{
	private static Dictionary<CameraEvent, string> cameraEventToString;

	public static Dictionary<CameraEvent, string> CameraEventToString
	{
		get
		{
			if (cameraEventToString != null)
			{
				return cameraEventToString;
			}
			cameraEventToString = Enum.GetValues(typeof(CameraEvent)).Cast<CameraEvent>().ToDictionary((CameraEvent k) => k, (CameraEvent v) => ((object)(CameraEvent)(ref v)/*cast due to .constrained prefix*/).ToString());
			return cameraEventToString;
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;

[CreateAssetMenu(menuName = "Rendering/Rust Post FX Settings")]
public class PostFXSettings : ScriptableObject
{
	[Serializable]
	public struct BloomSettings
	{
		public enum Mode
		{
			Additive,
			Scattering
		}

		public bool ignoreRenderScale;

		[Range(0f, 16f)]
		public int maxIterations;

		[Min(1f)]
		public int downscaleLimit;

		public bool bicubicUpsampling;

		[Min(0f)]
		public float threshold;

		[Range(0f, 1f)]
		public float thresholdKnee;

		[Min(0f)]
		public float intensity;

		public bool fadeFireflies;

		public Mode mode;

		[Range(0.05f, 0.95f)]
		public float scatter;
	}

	[Serializable]
	public struct ColorAdjustmentsSettings
	{
		public float postExposure;

		[Range(-100f, 100f)]
		public float contrast;

		[ColorUsage(false, true)]
		public Color colorFilter;

		[Range(-180f, 180f)]
		public float hueShift;

		[Range(-100f, 100f)]
		public float saturation;
	}

	[Serializable]
	public struct ChannelMixerSettings
	{
		public Vector3 red;

		public Vector3 green;

		public Vector3 blue;
	}

	[Serializable]
	public struct WhiteBalanceSettings
	{
		[Range(-100f, 100f)]
		public float temperature;

		[Range(-100f, 100f)]
		public float tint;
	}

	[Serializable]
	public struct SplitToningSettings
	{
		[ColorUsage(false)]
		public Color shadows;

		[ColorUsage(false)]
		public Color highlights;

		[Range(-100f, 100f)]
		public float balance;
	}

	[Serializable]
	public struct ToneMappingSettings
	{
		public enum Mode
		{
			None,
			ACES,
			Neutral,
			Reinhard
		}

		public Mode mode;
	}

	[Serializable]
	public struct ShadowsMidtonesHighlightsSettings
	{
		[ColorUsage(false, true)]
		public Color shadows;

		[ColorUsage(false, true)]
		public Color midtones;

		[ColorUsage(false, true)]
		public Color highlights;

		[Range(0f, 2f)]
		public float shadowsStart;

		[Range(0f, 2f)]
		public float shadowsEnd;

		[Range(0f, 2f)]
		public float highlightsStart;

		[Range(0f, 2f)]
		public float highLightsEnd;
	}

	[SerializeField]
	private Shader shader;

	[NonSerialized]
	private Material material;

	public Material Material
	{
		get
		{
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_0035: Expected O, but got Unknown
			if ((Object)(object)material == (Object)null && (Object)(object)shader != (Object)null)
			{
				material = new Material(shader)
				{
					hideFlags = (HideFlags)61
				};
			}
			return material;
		}
	}

	[field: SerializeField]
	public BloomSettings Bloom { get; private set; } = new BloomSettings
	{
		scatter = 0.7f
	};

	[field: SerializeField]
	public ColorAdjustmentsSettings ColorAdjustments { get; private set; } = new ColorAdjustmentsSettings
	{
		colorFilter = Color.white
	};

	[field: SerializeField]
	public WhiteBalanceSettings WhiteBalance { get; private set; }

	[field: SerializeField]
	public SplitToningSettings SplitToning { get; private set; } = new SplitToningSettings
	{
		shadows = Color.gray,
		highlights = Color.gray
	};

	[field: SerializeField]
	public ChannelMixerSettings ChannelMixer { get; private set; } = new ChannelMixerSettings
	{
		red = Vector3.right,
		green = Vector3.up,
		blue = Vector3.forward
	};

	[field: SerializeField]
	public ShadowsMidtonesHighlightsSettings ShadowsMidtonesHighlights { get; private set; } = new ShadowsMidtonesHighlightsSettings
	{
		shadows = Color.white,
		midtones = Color.white,
		highlights = Color.white,
		shadowsEnd = 0.3f,
		highlightsStart = 0.55f,
		highLightsEnd = 1f
	};

	[field: SerializeField]
	public ToneMappingSettings ToneMapping { get; private set; }

	public static bool AreApplicableTo(Camera camera)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0007: Invalid comparison between Unknown and I4
		return (int)camera.cameraType <= 2;
	}
}


using System.Runtime.InteropServices;
using Rust.RenderPipeline.Runtime;

public static class ReinterpretExtensions
{
	[StructLayout(LayoutKind.Explicit)]
	private struct IntFloat
	{
		[FieldOffset(0)]
		public int intValue;

		[FieldOffset(0)]
		public float floatValue;
	}

	public static float ReinterpretAsFloat(this int value)
	{
		IntFloat intFloat = default(IntFloat);
		intFloat.intValue = value;
		return intFloat.floatValue;
	}
}


using UnityEngine;

public class RenderingLayerMaskFieldAttribute : PropertyAttribute
{
}


using System.Collections.Generic;
using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class RustRenderPipeline : RenderPipeline
{
	public readonly struct PipelineMaterials
	{
		public readonly Material cameraRendererMaterial;

		public readonly Material cameraDebuggerMaterial;

		public readonly Material deferredLightingMaterial;

		public readonly Material deferredIndirectLightingMaterial;

		public PipelineMaterials(RustRenderPipelineSettings.PipelineShaders pipelineShaders)
		{
			cameraRendererMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.cameraRendererShader);
			cameraDebuggerMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.cameraDebuggerShader);
			deferredLightingMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.deferredLightingShader);
			deferredIndirectLightingMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.deferredIndirectLightingShader);
		}

		public void Dispose()
		{
			CoreUtils.Destroy((Object)(object)cameraRendererMaterial);
			CoreUtils.Destroy((Object)(object)cameraDebuggerMaterial);
			CoreUtils.Destroy((Object)(object)deferredLightingMaterial);
			CoreUtils.Destroy((Object)(object)deferredIndirectLightingMaterial);
		}
	}

	private readonly RenderGraph renderGraph = new RenderGraph("Rust SRP Render Graph");

	private readonly CameraRenderer cameraRenderer;

	private readonly RustRenderPipelineSettings settings;

	private readonly PipelineMaterials pipelineMaterials;

	public RustRenderPipeline(RustRenderPipelineSettings settings)
	{
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_0010: Expected O, but got Unknown
		this.settings = settings;
		GraphicsSettings.useScriptableRenderPipelineBatching = settings.useSrpBatching;
		GraphicsSettings.lightsUseLinearIntensity = true;
		pipelineMaterials = new PipelineMaterials(settings.pipelineShaders);
		cameraRenderer = new CameraRenderer(pipelineMaterials);
	}

	protected override void Render(ScriptableRenderContext context, List<Camera> cameras)
	{
		//IL_0000: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		RenderPipeline.BeginContextRendering(context, cameras);
		foreach (Camera camera in cameras)
		{
			RenderPipeline.BeginCameraRendering(context, camera);
			cameraRenderer.Render(renderGraph, context, camera, settings);
			RenderPipeline.EndCameraRendering(context, camera);
		}
		renderGraph.EndFrame();
		RenderPipeline.EndContextRendering(context, cameras);
	}

	protected override void Render(ScriptableRenderContext context, Camera[] cameras)
	{
	}

	protected override void Dispose(bool disposing)
	{
		((RenderPipeline)this).Dispose(disposing);
		cameraRenderer.Dispose();
		pipelineMaterials.Dispose();
		renderGraph.Cleanup();
	}
}


using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Rendering;

[CreateAssetMenu(menuName = "Rendering/Rust Render Pipeline Asset")]
public class RustRenderPipelineAsset : RenderPipelineAsset
{
	[SerializeField]
	private RustRenderPipelineSettings settings;

	protected override RenderPipeline CreatePipeline()
	{
		return (RenderPipeline)(object)new RustRenderPipeline(settings);
	}
}


using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Rendering;

[DisallowMultipleComponent]
[RequireComponent(typeof(Camera))]
public class RustRenderPipelineCamera : MonoBehaviour
{
	[SerializeField]
	private CameraSettings settings;

	private ProfilingSampler sampler;

	public CameraSettings Settings => settings ?? (settings = new CameraSettings());

	public ProfilingSampler Sampler
	{
		get
		{
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Expected O, but got Unknown
			//IL_0022: Expected O, but got Unknown
			ProfilingSampler obj = sampler;
			if (obj == null)
			{
				ProfilingSampler val = new ProfilingSampler(((Object)((Component)this).GetComponent<Camera>()).name);
				ProfilingSampler val2 = val;
				sampler = val;
				obj = val2;
			}
			return obj;
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;

[Serializable]
public class RustRenderPipelineSettings
{
	public enum ColorLutResolution
	{
		_16 = 0x10,
		_32 = 0x20,
		_64 = 0x40
	}

	public enum RenderPath
	{
		ForwardPlus,
		Deferred
	}

	[Serializable]
	public struct PipelineShaders
	{
		public Shader cameraRendererShader;

		public Shader cameraDebuggerShader;

		public Shader deferredLightingShader;

		public Shader deferredIndirectLightingShader;
	}

	public RenderPath renderPath;

	public CameraBufferSettings cameraBuffer = new CameraBufferSettings
	{
		allowHDR = true,
		renderScale = 1f,
		fxaaSettings = new CameraBufferSettings.FxaaSettings
		{
			fixedThreshold = 0.0833f,
			relativeThreshold = 0.166f,
			subpixelBlending = 0.75f
		}
	};

	public bool useSrpBatching = true;

	public ForwardPlusSettings forwardPlus;

	public ShadowSettings shadows;

	public bool postProcessingEnabled = true;

	public PostFXSettings postFXSettings;

	public ColorLutResolution colorLutResolution = ColorLutResolution._32;

	public PipelineShaders pipelineShaders;
}


using System;
using Rust.RenderPipeline.Runtime;
using UnityEngine;

[Serializable]
public class ShadowSettings
{
	public enum FilterQuality
	{
		Low,
		Medium,
		High
	}

	public enum MapSize
	{
		_256 = 0x100,
		_512 = 0x200,
		_1024 = 0x400,
		_2048 = 0x800,
		_4096 = 0x1000,
		_8192 = 0x2000
	}

	[Serializable]
	public struct DirectionalLight
	{
		public MapSize atlasSize;

		[Range(1f, 4f)]
		public int cascadeCount;

		[Range(0f, 1f)]
		public float cascadeRatio1;

		[Range(0f, 1f)]
		public float cascadeRatio2;

		[Range(0f, 1f)]
		public float cascadeRatio3;

		[Range(0.001f, 1f)]
		public float cascadeFade;

		public bool softCascadeBlend;

		public Vector3 CascadeRatios => new Vector3(cascadeRatio1, cascadeRatio2, cascadeRatio3);
	}

	[Serializable]
	public struct AdditionalLight
	{
		public MapSize atlasSize;

		public FilterMode filter;
	}

	[Min(0.001f)]
	public float maxDistance = 100f;

	[Range(0.001f, 1f)]
	public float distanceFade = 0.1f;

	public DirectionalLight directional = new DirectionalLight
	{
		atlasSize = MapSize._1024,
		cascadeCount = 4,
		cascadeRatio1 = 0.1f,
		cascadeRatio2 = 0.25f,
		cascadeRatio3 = 0.5f,
		cascadeFade = 0.1f
	};

	public AdditionalLight additional = new AdditionalLight
	{
		atlasSize = MapSize._1024
	};

	public FilterQuality filterQuality = FilterQuality.Medium;

	public float DirectionalFilterSize => (float)filterQuality + 2f;

	public float AdditionalFilterSize => (float)filterQuality + 2f;
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class CopyAttachmentsPass
{
	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Copy Attachments");

	private static readonly int colorCopyID = Shader.PropertyToID("_CameraColorTexture");

	private static readonly int depthCopyID = Shader.PropertyToID("_CameraDepthTexture");

	private bool copyColor;

	private bool copyDepth;

	private CameraRendererCopier copier;

	private TextureHandle colorAttachment;

	private TextureHandle depthAttachment;

	private TextureHandle colorCopy;

	private TextureHandle depthCopy;

	private void Render(RenderGraphContext context)
	{
		//IL_0017: Unknown result type (might be due to invalid IL or missing references)
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0022: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		//IL_0039: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_005d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		//IL_0068: Unknown result type (might be due to invalid IL or missing references)
		//IL_007a: Unknown result type (might be due to invalid IL or missing references)
		//IL_007f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0092: Unknown result type (might be due to invalid IL or missing references)
		//IL_0097: Unknown result type (might be due to invalid IL or missing references)
		//IL_009f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		if (copyColor)
		{
			copier.Copy(cmd, TextureHandle.op_Implicit(colorAttachment), TextureHandle.op_Implicit(colorCopy), isDepth: false);
			cmd.SetGlobalTexture(colorCopyID, TextureHandle.op_Implicit(colorCopy));
		}
		if (copyDepth)
		{
			copier.Copy(cmd, TextureHandle.op_Implicit(depthAttachment), TextureHandle.op_Implicit(depthCopy), isDepth: true);
			cmd.SetGlobalTexture(depthCopyID, TextureHandle.op_Implicit(depthCopy));
		}
		if (CameraRendererCopier.RequiresRenderTargetResetAfterCopy)
		{
			cmd.SetRenderTarget(TextureHandle.op_Implicit(colorAttachment), (RenderBufferLoadAction)0, (RenderBufferStoreAction)0, TextureHandle.op_Implicit(depthAttachment), (RenderBufferLoadAction)0, (RenderBufferStoreAction)0);
		}
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
	}

	public static void Record(RenderGraph renderGraph, bool copyColor, bool copyDepth, CameraRendererCopier copier, in CameraTextures textures)
	{
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_001f: Unknown result type (might be due to invalid IL or missing references)
		//IL_003f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0044: Unknown result type (might be due to invalid IL or missing references)
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_006a: Unknown result type (might be due to invalid IL or missing references)
		//IL_006f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0081: Unknown result type (might be due to invalid IL or missing references)
		//IL_0086: Unknown result type (might be due to invalid IL or missing references)
		if (!(copyColor || copyDepth))
		{
			return;
		}
		CopyAttachmentsPass copyAttachmentsPass = default(CopyAttachmentsPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<CopyAttachmentsPass>(profilingSampler.name, ref copyAttachmentsPass, profilingSampler);
		try
		{
			copyAttachmentsPass.copyColor = copyColor;
			copyAttachmentsPass.copyDepth = copyDepth;
			copyAttachmentsPass.copier = copier;
			copyAttachmentsPass.colorAttachment = ((RenderGraphBuilder)(ref val)).ReadTexture(ref textures.colorAttachment);
			copyAttachmentsPass.depthAttachment = ((RenderGraphBuilder)(ref val)).ReadTexture(ref textures.depthAttachment);
			if (copyColor)
			{
				copyAttachmentsPass.colorCopy = ((RenderGraphBuilder)(ref val)).WriteTexture(ref textures.colorCopy);
			}
			if (copyDepth)
			{
				copyAttachmentsPass.depthCopy = ((RenderGraphBuilder)(ref val)).WriteTexture(ref textures.depthCopy);
			}
			((RenderGraphBuilder)(ref val)).SetRenderFunc<CopyAttachmentsPass>((RenderFunc<CopyAttachmentsPass>)delegate(CopyAttachmentsPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using System.Diagnostics;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class DebugPass
{
	private static readonly ProfilingSampler sampler = new ProfilingSampler("Debug");

	[Conditional("DEVELOPMENT_BUILD")]
	[Conditional("UNITY_EDITOR")]
	public static void Record(RenderGraph renderGraph, RustRenderPipelineSettings settings, Camera camera, in LightResources lightData)
	{
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000e: Invalid comparison between Unknown and I4
		//IL_0022: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		//IL_0030: Unknown result type (might be due to invalid IL or missing references)
		if (CameraDebugger.IsActive && (int)camera.cameraType <= 2)
		{
			DebugPass debugPass = default(DebugPass);
			RenderGraphBuilder val = renderGraph.AddRenderPass<DebugPass>(sampler.name, ref debugPass, sampler);
			try
			{
				((RenderGraphBuilder)(ref val)).ReadComputeBuffer(ref lightData.tilesBuffer);
				((RenderGraphBuilder)(ref val)).SetRenderFunc<DebugPass>((RenderFunc<DebugPass>)delegate
				{
				});
			}
			finally
			{
				((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
			}
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class FinalPass
{
	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Final");

	private CameraRendererCopier copier;

	private TextureHandle colorAttachment;

	private void Render(RenderGraphContext context)
	{
		//IL_000f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		copier.CopyToCameraTarget(cmd, TextureHandle.op_Implicit(colorAttachment));
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
	}

	public static void Record(RenderGraph renderGraph, CameraRendererCopier copier, in CameraTextures textures)
	{
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0023: Unknown result type (might be due to invalid IL or missing references)
		//IL_0028: Unknown result type (might be due to invalid IL or missing references)
		FinalPass finalPass = default(FinalPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<FinalPass>("Final", ref finalPass, profilingSampler);
		try
		{
			finalPass.copier = copier;
			finalPass.colorAttachment = ((RenderGraphBuilder)(ref val)).ReadTexture(ref textures.colorAttachment);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<FinalPass>((RenderFunc<FinalPass>)delegate(FinalPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;
using UnityEngine.Rendering.RendererUtils;

public class GBufferPass
{
	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("GBuffer");

	private static readonly ShaderTagId[] shaderTagIds = (ShaderTagId[])(object)new ShaderTagId[2]
	{
		new ShaderTagId("RustGBuffer"),
		new ShaderTagId("Deferred")
	};

	private readonly RenderTargetIdentifier[] gBufferRenderTargetIdentifiers = (RenderTargetIdentifier[])(object)new RenderTargetIdentifier[4];

	private RendererListHandle renderListHandle;

	private readonly TextureHandle[] gBufferTextureHandles = (TextureHandle[])(object)new TextureHandle[4];

	private TextureHandle depthAttachment;

	private Camera camera;

	private void Render(RenderGraphContext context)
	{
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0042: Unknown result type (might be due to invalid IL or missing references)
		//IL_005e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_0081: Unknown result type (might be due to invalid IL or missing references)
		//IL_0086: Unknown result type (might be due to invalid IL or missing references)
		//IL_0098: Unknown result type (might be due to invalid IL or missing references)
		//IL_009e: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
		CameraRenderer.ExecuteCameraEventCommandBuffers(context, camera, (CameraEvent)4);
		((ScriptableRenderContext)(ref context.renderContext)).SetupCameraProperties(camera, false);
		CommandBuffer cmd = context.cmd;
		for (int i = 0; i < gBufferRenderTargetIdentifiers.Length; i++)
		{
			gBufferRenderTargetIdentifiers[i] = TextureHandle.op_Implicit(gBufferTextureHandles[i]);
		}
		cmd.SetRenderTarget(gBufferRenderTargetIdentifiers, TextureHandle.op_Implicit(depthAttachment));
		cmd.ClearRenderTarget(true, true, Color.clear);
		context.cmd.DrawRendererList(RendererListHandle.op_Implicit(renderListHandle));
		cmd.SetRenderTarget(gBufferRenderTargetIdentifiers[3], TextureHandle.op_Implicit(depthAttachment));
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
		context.cmd.Clear();
		CameraRenderer.ExecuteCameraEventCommandBuffers(context, camera, (CameraEvent)5);
	}

	public static GBufferTextures Record(RenderGraph renderGraph, Camera camera, Vector2Int cameraBufferSize, bool useHDR, CullingResults cullingResults, int renderingLayerMask, in CameraTextures textures)
	{
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0017: Unknown result type (might be due to invalid IL or missing references)
		//IL_0021: Unknown result type (might be due to invalid IL or missing references)
		//IL_0024: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_002e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0036: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0042: Unknown result type (might be due to invalid IL or missing references)
		//IL_0052: Unknown result type (might be due to invalid IL or missing references)
		//IL_0057: Unknown result type (might be due to invalid IL or missing references)
		//IL_005b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0060: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_007d: Unknown result type (might be due to invalid IL or missing references)
		//IL_008d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0092: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00db: Unknown result type (might be due to invalid IL or missing references)
		//IL_00df: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
		//IL_0101: Unknown result type (might be due to invalid IL or missing references)
		//IL_0106: Unknown result type (might be due to invalid IL or missing references)
		//IL_010a: Unknown result type (might be due to invalid IL or missing references)
		//IL_010f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0124: Unknown result type (might be due to invalid IL or missing references)
		//IL_0135: Unknown result type (might be due to invalid IL or missing references)
		//IL_013a: Unknown result type (might be due to invalid IL or missing references)
		//IL_013e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0143: Unknown result type (might be due to invalid IL or missing references)
		//IL_015d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0162: Unknown result type (might be due to invalid IL or missing references)
		GBufferPass gBufferPass = default(GBufferPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<GBufferPass>(profilingSampler.name, ref gBufferPass, profilingSampler);
		try
		{
			GBufferPass gBufferPass2 = gBufferPass;
			RendererListDesc val2 = new RendererListDesc(shaderTagIds, cullingResults, camera)
			{
				sortingCriteria = (SortingCriteria)59,
				rendererConfiguration = (PerObjectData)3,
				renderQueueRange = RenderQueueRange.opaque,
				renderingLayerMask = (uint)renderingLayerMask
			};
			RendererListHandle val3 = renderGraph.CreateRendererList(ref val2);
			gBufferPass2.renderListHandle = ((RenderGraphBuilder)(ref val)).UseRendererList(ref val3);
			((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref textures.colorAttachment);
			((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref textures.depthAttachment);
			gBufferPass.camera = camera;
			gBufferPass.depthAttachment = textures.depthAttachment;
			TextureDesc val4 = new TextureDesc(((Vector2Int)(ref cameraBufferSize)).x, ((Vector2Int)(ref cameraBufferSize)).y, false, false);
			val4.name = "GBuffer0";
			val4.colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)0);
			TextureDesc val5 = val4;
			TextureHandle[] array = gBufferPass.gBufferTextureHandles;
			TextureHandle val6 = renderGraph.CreateTexture(ref val5);
			array[0] = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val6);
			val5.name = "GBuffer1";
			TextureHandle[] array2 = gBufferPass.gBufferTextureHandles;
			val6 = renderGraph.CreateTexture(ref val5);
			array2[1] = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val6);
			val5.name = "GBuffer2";
			val5.colorFormat = (GraphicsFormat)75;
			TextureHandle[] array3 = gBufferPass.gBufferTextureHandles;
			val6 = renderGraph.CreateTexture(ref val5);
			array3[2] = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val6);
			val5.name = "GBuffer3";
			gBufferPass.gBufferTextureHandles[3] = textures.colorAttachment;
			((RenderGraphBuilder)(ref val)).SetRenderFunc<GBufferPass>((RenderFunc<GBufferPass>)delegate(GBufferPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
			return new GBufferTextures(gBufferPass.gBufferTextureHandles);
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;
using UnityEngine.Rendering.RendererUtils;

public class GeometryPass
{
	private static readonly ProfilingSampler profilingSamplerOpaque = new ProfilingSampler("Opaque Geometry");

	private static readonly ProfilingSampler profilingSamplerTransparent = new ProfilingSampler("Transparent Geometry");

	private static readonly ShaderTagId[] shaderTagIds = (ShaderTagId[])(object)new ShaderTagId[4]
	{
		new ShaderTagId("SRPDefaultUnlit"),
		new ShaderTagId("RustLit"),
		new ShaderTagId("ForwardBase"),
		new ShaderTagId("Vertex")
	};

	private RendererListHandle renderListHandle;

	private void Render(RenderGraphContext context)
	{
		//IL_0007: Unknown result type (might be due to invalid IL or missing references)
		//IL_000c: Unknown result type (might be due to invalid IL or missing references)
		context.cmd.DrawRendererList(RendererListHandle.op_Implicit(renderListHandle));
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
		context.cmd.Clear();
	}

	public static void Record(RenderGraph renderGraph, Camera camera, CullingResults cullingResults, int renderingLayerMask, bool opaque, in CameraTextures textures, in LightResources lightResources)
	{
		//IL_001b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_002a: Unknown result type (might be due to invalid IL or missing references)
		//IL_002c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0031: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0046: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		//IL_005d: Unknown result type (might be due to invalid IL or missing references)
		//IL_006c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0071: Unknown result type (might be due to invalid IL or missing references)
		//IL_0075: Unknown result type (might be due to invalid IL or missing references)
		//IL_007a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0088: Unknown result type (might be due to invalid IL or missing references)
		//IL_0097: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
		//IL_0103: Unknown result type (might be due to invalid IL or missing references)
		//IL_0108: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
		//IL_0130: Unknown result type (might be due to invalid IL or missing references)
		//IL_0144: Unknown result type (might be due to invalid IL or missing references)
		//IL_0158: Unknown result type (might be due to invalid IL or missing references)
		//IL_016c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0180: Unknown result type (might be due to invalid IL or missing references)
		//IL_011c: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
		ProfilingSampler val = (opaque ? profilingSamplerOpaque : profilingSamplerTransparent);
		GeometryPass geometryPass = default(GeometryPass);
		RenderGraphBuilder val2 = renderGraph.AddRenderPass<GeometryPass>(val.name, ref geometryPass, val);
		try
		{
			GeometryPass geometryPass2 = geometryPass;
			RendererListDesc val3 = new RendererListDesc(shaderTagIds, cullingResults, camera)
			{
				sortingCriteria = (SortingCriteria)(opaque ? 59 : 23),
				rendererConfiguration = (PerObjectData)3,
				renderQueueRange = (opaque ? RenderQueueRange.opaque : RenderQueueRange.transparent),
				renderingLayerMask = (uint)renderingLayerMask
			};
			RendererListHandle val4 = renderGraph.CreateRendererList(ref val3);
			geometryPass2.renderListHandle = ((RenderGraphBuilder)(ref val2)).UseRendererList(ref val4);
			((RenderGraphBuilder)(ref val2)).ReadWriteTexture(ref textures.colorAttachment);
			((RenderGraphBuilder)(ref val2)).ReadWriteTexture(ref textures.depthAttachment);
			if (!opaque)
			{
				TextureHandle val5 = textures.colorCopy;
				if (((TextureHandle)(ref val5)).IsValid())
				{
					((RenderGraphBuilder)(ref val2)).ReadTexture(ref textures.colorCopy);
				}
				val5 = textures.depthCopy;
				if (((TextureHandle)(ref val5)).IsValid())
				{
					((RenderGraphBuilder)(ref val2)).ReadTexture(ref textures.depthCopy);
				}
			}
			((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.directionalLightDataBuffer);
			((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.additionalLightDataBuffer);
			ComputeBufferHandle tilesBuffer = lightResources.tilesBuffer;
			if (((ComputeBufferHandle)(ref tilesBuffer)).IsValid())
			{
				((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.tilesBuffer);
			}
			((RenderGraphBuilder)(ref val2)).ReadTexture(ref lightResources.shadowResources.directionalAtlas);
			((RenderGraphBuilder)(ref val2)).ReadTexture(ref lightResources.shadowResources.additionalAtlas);
			((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.shadowResources.directionalShadowCascadesBuffer);
			((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.shadowResources.directionalShadowMatricesBuffer);
			((RenderGraphBuilder)(ref val2)).ReadComputeBuffer(ref lightResources.shadowResources.additionalShadowDataBuffer);
			((RenderGraphBuilder)(ref val2)).SetRenderFunc<GeometryPass>((RenderFunc<GeometryPass>)delegate(GeometryPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val2)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System.Diagnostics;
using Rust.RenderPipeline.Runtime;
using UnityEngine.Experimental.Rendering.RenderGraphModule;

public class GizmosPass
{
	[Conditional("UNITY_EDITOR")]
	public static void Record(RenderGraph renderGraph, CameraRendererCopier copier, in CameraTextures textures)
	{
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class SetupPass
{
	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Setup");

	private static readonly int attachmentSizeID = Shader.PropertyToID("_CameraBufferSize");

	private TextureHandle colorAttachment;

	private TextureHandle depthAttachment;

	private Vector2Int attachmentSize;

	private Camera camera;

	private CameraClearFlags clearFlags;

	private void Render(RenderGraphContext context)
	{
		//IL_001b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_0028: Unknown result type (might be due to invalid IL or missing references)
		//IL_002d: Unknown result type (might be due to invalid IL or missing references)
		//IL_003b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0041: Invalid comparison between Unknown and I4
		//IL_0047: Unknown result type (might be due to invalid IL or missing references)
		//IL_004d: Invalid comparison between Unknown and I4
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_0059: Invalid comparison between Unknown and I4
		//IL_0068: Unknown result type (might be due to invalid IL or missing references)
		//IL_006d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_005b: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
		((ScriptableRenderContext)(ref context.renderContext)).SetupCameraProperties(camera, false);
		CommandBuffer cmd = context.cmd;
		cmd.SetRenderTarget(TextureHandle.op_Implicit(colorAttachment), (RenderBufferLoadAction)2, (RenderBufferStoreAction)0, TextureHandle.op_Implicit(depthAttachment), (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		bool num = (int)clearFlags <= 3;
		bool num2 = (int)clearFlags <= 2;
		Color val;
		if ((int)clearFlags != 2)
		{
			val = Color.clear;
		}
		else
		{
			Color backgroundColor = camera.backgroundColor;
			val = ((Color)(ref backgroundColor)).linear;
		}
		cmd.ClearRenderTarget(num, num2, val);
		cmd.SetGlobalVector(attachmentSizeID, new Vector4(1f / (float)((Vector2Int)(ref attachmentSize)).x, 1f / (float)((Vector2Int)(ref attachmentSize)).y, (float)((Vector2Int)(ref attachmentSize)).x, (float)((Vector2Int)(ref attachmentSize)).y));
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
	}

	public static CameraTextures Record(RenderGraph renderGraph, bool copyColor, bool copyDepth, bool useHDR, Vector2Int attachmentSize, Camera camera)
	{
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		//IL_0026: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0032: Unknown result type (might be due to invalid IL or missing references)
		//IL_003a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0041: Unknown result type (might be due to invalid IL or missing references)
		//IL_0047: Invalid comparison between Unknown and I4
		//IL_0060: Unknown result type (might be due to invalid IL or missing references)
		//IL_0065: Unknown result type (might be due to invalid IL or missing references)
		//IL_004b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_0075: Unknown result type (might be due to invalid IL or missing references)
		//IL_0086: Unknown result type (might be due to invalid IL or missing references)
		//IL_0088: Unknown result type (might be due to invalid IL or missing references)
		//IL_0090: Unknown result type (might be due to invalid IL or missing references)
		//IL_0095: Unknown result type (might be due to invalid IL or missing references)
		//IL_0099: Unknown result type (might be due to invalid IL or missing references)
		//IL_009e: Unknown result type (might be due to invalid IL or missing references)
		//IL_009f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00db: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
		//IL_0107: Unknown result type (might be due to invalid IL or missing references)
		//IL_010c: Unknown result type (might be due to invalid IL or missing references)
		//IL_013b: Unknown result type (might be due to invalid IL or missing references)
		//IL_013d: Unknown result type (might be due to invalid IL or missing references)
		//IL_013e: Unknown result type (might be due to invalid IL or missing references)
		SetupPass setupPass = default(SetupPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<SetupPass>("Setup", ref setupPass, profilingSampler);
		try
		{
			setupPass.attachmentSize = attachmentSize;
			setupPass.camera = camera;
			setupPass.clearFlags = camera.clearFlags;
			TextureHandle colorCopy = default(TextureHandle);
			TextureHandle depthCopy = default(TextureHandle);
			if ((int)setupPass.clearFlags > 2)
			{
				setupPass.clearFlags = (CameraClearFlags)2;
			}
			TextureDesc val2 = new TextureDesc(((Vector2Int)(ref attachmentSize)).x, ((Vector2Int)(ref attachmentSize)).y, false, false);
			val2.colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)(useHDR ? 1 : 0));
			val2.name = "Color Attachment";
			TextureDesc val3 = val2;
			SetupPass setupPass2 = setupPass;
			TextureHandle val4 = renderGraph.CreateTexture(ref val3);
			TextureHandle val5 = (setupPass2.colorAttachment = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val4));
			if (copyColor)
			{
				val3.name = "Color Copy";
				colorCopy = renderGraph.CreateTexture(ref val3);
			}
			val3.depthBufferBits = (DepthBits)32;
			val3.name = "Depth Attachment";
			SetupPass setupPass3 = setupPass;
			val4 = renderGraph.CreateTexture(ref val3);
			TextureHandle val6 = (setupPass3.depthAttachment = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val4));
			if (copyDepth)
			{
				val3.name = "Depth Copy";
				depthCopy = renderGraph.CreateTexture(ref val3);
			}
			((RenderGraphBuilder)(ref val)).AllowPassCulling(false);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<SetupPass>((RenderFunc<SetupPass>)delegate(SetupPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
			return new CameraTextures(val5, val6, colorCopy, depthCopy);
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class SkyboxPass
{
	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Skybox");

	private Camera camera;

	private void Render(RenderGraphContext context)
	{
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
		context.cmd.Clear();
		((ScriptableRenderContext)(ref context.renderContext)).DrawSkybox(camera);
	}

	public static void Record(RenderGraph renderGraph, Camera camera, in CameraTextures textures)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0007: Invalid comparison between Unknown and I4
		//IL_001b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_0030: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		if ((int)camera.clearFlags != 1)
		{
			return;
		}
		SkyboxPass skyboxPass = default(SkyboxPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<SkyboxPass>(profilingSampler.name, ref skyboxPass, profilingSampler);
		try
		{
			skyboxPass.camera = camera;
			((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref textures.colorAttachment);
			((RenderGraphBuilder)(ref val)).ReadTexture(ref textures.depthAttachment);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<SkyboxPass>((RenderFunc<SkyboxPass>)delegate(SkyboxPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System.Diagnostics;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class UnsupportedShadersPass
{
	[Conditional("UNITY_EDITOR")]
	public static void Record(RenderGraph renderGraph, Camera camera, CullingResults cullingResults)
	{
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.PostProcessing;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class BloomPass
{
	private const int MAX_BLOOM_PYRAMID_LEVELS = 16;

	private static readonly ProfilingSampler sampler = new ProfilingSampler("Bloom");

	private static readonly int bicubicUpsamplingId = Shader.PropertyToID("_BloomBicubicUpsampling");

	private static readonly int intensityId = Shader.PropertyToID("_BloomIntensity");

	private static readonly int thresholdId = Shader.PropertyToID("_BloomThreshold");

	private readonly TextureHandle[] pyramid = (TextureHandle[])(object)new TextureHandle[33];

	private TextureHandle colorSource;

	private TextureHandle bloomResult;

	private PostFXStack stack;

	private int stepCount;

	private void Render(RenderGraphContext context)
	{
		//IL_002c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0045: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_0073: Unknown result type (might be due to invalid IL or missing references)
		//IL_0081: Unknown result type (might be due to invalid IL or missing references)
		//IL_008f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0094: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00de: Unknown result type (might be due to invalid IL or missing references)
		//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_010a: Unknown result type (might be due to invalid IL or missing references)
		//IL_010f: Unknown result type (might be due to invalid IL or missing references)
		//IL_011c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0121: Unknown result type (might be due to invalid IL or missing references)
		//IL_0240: Unknown result type (might be due to invalid IL or missing references)
		//IL_0245: Unknown result type (might be due to invalid IL or missing references)
		//IL_025d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0262: Unknown result type (might be due to invalid IL or missing references)
		//IL_0268: Unknown result type (might be due to invalid IL or missing references)
		//IL_026d: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f5: Unknown result type (might be due to invalid IL or missing references)
		//IL_01fa: Unknown result type (might be due to invalid IL or missing references)
		//IL_0207: Unknown result type (might be due to invalid IL or missing references)
		//IL_020c: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		PostFXSettings.BloomSettings bloom = stack.Settings.Bloom;
		Vector4 val = default(Vector4);
		val.x = Mathf.GammaToLinearSpace(bloom.threshold);
		val.y = val.x * bloom.thresholdKnee;
		val.z = 2f * val.y;
		val.w = 0.25f / (val.y + 1E-05f);
		val.y -= val.x;
		cmd.SetGlobalVector(thresholdId, val);
		stack.Draw(cmd, TextureHandle.op_Implicit(colorSource), TextureHandle.op_Implicit(pyramid[0]), bloom.fadeFireflies ? PostFXStack.Pass.BloomPrefilterFireflies : PostFXStack.Pass.BloomPrefilter);
		int num = 0;
		int num2 = 2;
		int i;
		for (i = 0; i < stepCount; i++)
		{
			int num3 = num2 - 1;
			stack.Draw(cmd, TextureHandle.op_Implicit(pyramid[num]), TextureHandle.op_Implicit(pyramid[num3]), PostFXStack.Pass.BloomHorizontal);
			stack.Draw(cmd, TextureHandle.op_Implicit(pyramid[num3]), TextureHandle.op_Implicit(pyramid[num2]), PostFXStack.Pass.BloomVertical);
			num = num2;
			num2 += 2;
		}
		cmd.SetGlobalFloat(bicubicUpsamplingId, bloom.bicubicUpsampling ? 1f : 0f);
		PostFXStack.Pass pass2;
		PostFXStack.Pass pass;
		float num4;
		if (bloom.mode == PostFXSettings.BloomSettings.Mode.Additive)
		{
			pass2 = (pass = PostFXStack.Pass.BloomAdd);
			cmd.SetGlobalFloat(intensityId, 1f);
			num4 = bloom.intensity;
		}
		else
		{
			pass2 = PostFXStack.Pass.BloomScatter;
			pass = PostFXStack.Pass.BloomScatterFinal;
			cmd.SetGlobalFloat(intensityId, bloom.scatter);
			num4 = Mathf.Min(bloom.intensity, 1f);
		}
		if (i > 1)
		{
			num2 -= 5;
			for (i--; i > 0; i--)
			{
				cmd.SetGlobalTexture(PostFXStack.fxSource2Id, TextureHandle.op_Implicit(pyramid[num2 + 1]));
				stack.Draw(cmd, TextureHandle.op_Implicit(pyramid[num]), TextureHandle.op_Implicit(pyramid[num2]), pass2);
				num = num2;
				num2 -= 2;
			}
		}
		cmd.SetGlobalFloat(intensityId, num4);
		cmd.SetGlobalTexture(PostFXStack.fxSource2Id, TextureHandle.op_Implicit(colorSource));
		stack.Draw(cmd, TextureHandle.op_Implicit(pyramid[num]), TextureHandle.op_Implicit(bloomResult), pass);
	}

	public static TextureHandle Record(RenderGraph renderGraph, PostFXStack stack, in CameraTextures textures)
	{
		//IL_0032: Unknown result type (might be due to invalid IL or missing references)
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0076: Unknown result type (might be due to invalid IL or missing references)
		//IL_008e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0093: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00be: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0101: Unknown result type (might be due to invalid IL or missing references)
		//IL_0106: Unknown result type (might be due to invalid IL or missing references)
		//IL_010b: Unknown result type (might be due to invalid IL or missing references)
		//IL_010d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0112: Unknown result type (might be due to invalid IL or missing references)
		//IL_01c5: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
		//IL_01db: Unknown result type (might be due to invalid IL or missing references)
		//IL_01e0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0200: Unknown result type (might be due to invalid IL or missing references)
		//IL_0205: Unknown result type (might be due to invalid IL or missing references)
		//IL_0209: Unknown result type (might be due to invalid IL or missing references)
		//IL_020e: Unknown result type (might be due to invalid IL or missing references)
		//IL_023a: Unknown result type (might be due to invalid IL or missing references)
		//IL_023f: Unknown result type (might be due to invalid IL or missing references)
		//IL_016f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0174: Unknown result type (might be due to invalid IL or missing references)
		//IL_018f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0194: Unknown result type (might be due to invalid IL or missing references)
		//IL_0199: Unknown result type (might be due to invalid IL or missing references)
		//IL_019b: Unknown result type (might be due to invalid IL or missing references)
		//IL_01a0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0251: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.BloomSettings bloom = stack.Settings.Bloom;
		Vector2Int val = (Vector2Int)(bloom.ignoreRenderScale ? new Vector2Int(stack.Camera.pixelWidth, stack.Camera.pixelHeight) : stack.CameraBufferSize) / 2;
		if (bloom.maxIterations == 0 || bloom.intensity <= 0f || ((Vector2Int)(ref val)).y < bloom.downscaleLimit * 2 || ((Vector2Int)(ref val)).x < bloom.downscaleLimit * 2)
		{
			return textures.colorAttachment;
		}
		BloomPass bloomPass = default(BloomPass);
		RenderGraphBuilder val2 = renderGraph.AddRenderPass<BloomPass>(sampler.name, ref bloomPass, sampler);
		try
		{
			bloomPass.stack = stack;
			bloomPass.colorSource = ((RenderGraphBuilder)(ref val2)).ReadTexture(ref textures.colorAttachment);
			TextureDesc val3 = new TextureDesc(((Vector2Int)(ref val)).x, ((Vector2Int)(ref val)).y, false, false);
			val3.colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)(stack.CameraBufferSettings.allowHDR ? 1 : 0));
			val3.name = "Bloom Prefilter";
			TextureDesc val4 = val3;
			TextureHandle[] array = bloomPass.pyramid;
			array[0] = ((RenderGraphBuilder)(ref val2)).CreateTransientTexture(ref val4);
			val /= 2;
			int num = 1;
			int num2 = 0;
			while (num2 < bloom.maxIterations && ((Vector2Int)(ref val)).y >= bloom.downscaleLimit && ((Vector2Int)(ref val)).x >= bloom.downscaleLimit)
			{
				val4.width = ((Vector2Int)(ref val)).x;
				val4.height = ((Vector2Int)(ref val)).y;
				val4.name = "Bloom Pyramid H";
				array[num] = ((RenderGraphBuilder)(ref val2)).CreateTransientTexture(ref val4);
				val4.name = "Bloom Pyramid V";
				array[num + 1] = ((RenderGraphBuilder)(ref val2)).CreateTransientTexture(ref val4);
				val /= 2;
				num2++;
				num += 2;
			}
			bloomPass.stepCount = num2;
			Vector2Int cameraBufferSize = stack.CameraBufferSize;
			val4.width = ((Vector2Int)(ref cameraBufferSize)).x;
			cameraBufferSize = stack.CameraBufferSize;
			val4.height = ((Vector2Int)(ref cameraBufferSize)).y;
			val4.name = "Bloom Result";
			BloomPass bloomPass2 = bloomPass;
			TextureHandle val5 = renderGraph.CreateTexture(ref val4);
			bloomPass2.bloomResult = ((RenderGraphBuilder)(ref val2)).WriteTexture(ref val5);
			((RenderGraphBuilder)(ref val2)).SetRenderFunc<BloomPass>((RenderFunc<BloomPass>)delegate(BloomPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
			return bloomPass.bloomResult;
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val2)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.PostProcessing;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class ColorLutPass
{
	private static readonly ProfilingSampler sampler = new ProfilingSampler("Color LUT");

	private static readonly int colorGradingLutId = Shader.PropertyToID("_ColorGradingLUT");

	private static readonly int colorAdjustmentsId = Shader.PropertyToID("_ColorAdjustments");

	private static readonly int colorFilterId = Shader.PropertyToID("_ColorFilter");

	private static readonly int whiteBalanceId = Shader.PropertyToID("_WhiteBalance");

	private static readonly int splitToningShadowsId = Shader.PropertyToID("_SplitToningShadows");

	private static readonly int splitToningHighlightsId = Shader.PropertyToID("_SplitToningHighlights");

	private static readonly int channelMixerRedId = Shader.PropertyToID("_ChannelMixerRed");

	private static readonly int channelMixerGreenId = Shader.PropertyToID("_ChannelMixerGreen");

	private static readonly int channelMixerBlueId = Shader.PropertyToID("_ChannelMixerBlue");

	private static readonly int smhShadowsId = Shader.PropertyToID("_SMHShadows");

	private static readonly int smhMidtonesId = Shader.PropertyToID("_SMHMidtones");

	private static readonly int smhHighlightsId = Shader.PropertyToID("_SMHHighlights");

	private static readonly int smhRangeId = Shader.PropertyToID("_SMHRange");

	private static readonly int colorGradingLutParametersId = Shader.PropertyToID("_ColorGradingLUTParameters");

	private static readonly int colorGradingLutInLogCId = Shader.PropertyToID("_ColorGradingLUTInLogC");

	private static readonly GraphicsFormat colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)1);

	private PostFXStack stack;

	private int colorLutResolution;

	private TextureHandle colorLut;

	private void ConfigureColorAdjustments(CommandBuffer commandBuffer, PostFXSettings settings)
	{
		//IL_004d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0064: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.ColorAdjustmentsSettings colorAdjustments = settings.ColorAdjustments;
		commandBuffer.SetGlobalVector(colorAdjustmentsId, new Vector4(Mathf.Pow(2f, colorAdjustments.postExposure), colorAdjustments.contrast * 0.01f + 1f, colorAdjustments.hueShift * 0.0027777778f, colorAdjustments.saturation * 0.01f + 1f));
		commandBuffer.SetGlobalColor(colorFilterId, ((Color)(ref colorAdjustments.colorFilter)).linear);
	}

	private void ConfigureWhiteBalance(CommandBuffer commandBuffer, PostFXSettings settings)
	{
		//IL_0019: Unknown result type (might be due to invalid IL or missing references)
		//IL_001e: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.WhiteBalanceSettings whiteBalance = settings.WhiteBalance;
		commandBuffer.SetGlobalVector(whiteBalanceId, Vector4.op_Implicit(ColorUtils.ColorBalanceToLMSCoeffs(whiteBalance.temperature, whiteBalance.tint)));
	}

	private void ConfigureSplitToning(CommandBuffer commandBuffer, PostFXSettings settings)
	{
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		//IL_0034: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.SplitToningSettings splitToning = settings.SplitToning;
		Color shadows = splitToning.shadows;
		shadows.a = splitToning.balance * 0.01f;
		commandBuffer.SetGlobalColor(splitToningShadowsId, shadows);
		commandBuffer.SetGlobalColor(splitToningHighlightsId, splitToning.highlights);
	}

	private void ConfigureChannelMixer(CommandBuffer commandBuffer, PostFXSettings settings)
	{
		//IL_000e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_0024: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_003a: Unknown result type (might be due to invalid IL or missing references)
		//IL_003f: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.ChannelMixerSettings channelMixer = settings.ChannelMixer;
		commandBuffer.SetGlobalVector(channelMixerRedId, Vector4.op_Implicit(channelMixer.red));
		commandBuffer.SetGlobalVector(channelMixerGreenId, Vector4.op_Implicit(channelMixer.green));
		commandBuffer.SetGlobalVector(channelMixerBlueId, Vector4.op_Implicit(channelMixer.blue));
	}

	private void ConfigureShadowsMidtonesHighlights(CommandBuffer commandBuffer, PostFXSettings settings)
	{
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0042: Unknown result type (might be due to invalid IL or missing references)
		//IL_006a: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings.ShadowsMidtonesHighlightsSettings shadowsMidtonesHighlights = settings.ShadowsMidtonesHighlights;
		commandBuffer.SetGlobalColor(smhShadowsId, ((Color)(ref shadowsMidtonesHighlights.shadows)).linear);
		commandBuffer.SetGlobalColor(smhMidtonesId, ((Color)(ref shadowsMidtonesHighlights.midtones)).linear);
		commandBuffer.SetGlobalColor(smhHighlightsId, ((Color)(ref shadowsMidtonesHighlights.highlights)).linear);
		commandBuffer.SetGlobalVector(smhRangeId, new Vector4(shadowsMidtonesHighlights.shadowsStart, shadowsMidtonesHighlights.shadowsEnd, shadowsMidtonesHighlights.highlightsStart, shadowsMidtonesHighlights.highLightsEnd));
	}

	private void Render(RenderGraphContext context)
	{
		//IL_0069: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
		//IL_0101: Unknown result type (might be due to invalid IL or missing references)
		PostFXSettings settings = stack.Settings;
		CommandBuffer cmd = context.cmd;
		ConfigureColorAdjustments(cmd, settings);
		ConfigureWhiteBalance(cmd, settings);
		ConfigureSplitToning(cmd, settings);
		ConfigureChannelMixer(cmd, settings);
		ConfigureShadowsMidtonesHighlights(cmd, settings);
		int num = colorLutResolution;
		int num2 = num * num;
		cmd.SetGlobalVector(colorGradingLutParametersId, new Vector4((float)num, 0.5f / (float)num2, 0.5f / (float)num, (float)num / ((float)num - 1f)));
		PostFXSettings.ToneMappingSettings.Mode mode = settings.ToneMapping.mode;
		PostFXStack.Pass pass = (PostFXStack.Pass)(7 + mode);
		cmd.SetGlobalFloat(colorGradingLutInLogCId, (stack.CameraBufferSettings.allowHDR && pass != PostFXStack.Pass.ColorGradingNone) ? 1f : 0f);
		stack.Draw(cmd, TextureHandle.op_Implicit(colorLut), pass);
		cmd.SetGlobalVector(colorGradingLutParametersId, new Vector4(1f / (float)num2, 1f / (float)num, (float)num - 1f));
		cmd.SetGlobalTexture(colorGradingLutId, TextureHandle.op_Implicit(colorLut));
	}

	public static TextureHandle Record(RenderGraph renderGraph, PostFXStack stack, int colorLutResolution)
	{
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0017: Unknown result type (might be due to invalid IL or missing references)
		//IL_0030: Unknown result type (might be due to invalid IL or missing references)
		//IL_0035: Unknown result type (might be due to invalid IL or missing references)
		//IL_0039: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		//IL_004f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		//IL_0059: Unknown result type (might be due to invalid IL or missing references)
		//IL_005e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0062: Unknown result type (might be due to invalid IL or missing references)
		//IL_0067: Unknown result type (might be due to invalid IL or missing references)
		//IL_0093: Unknown result type (might be due to invalid IL or missing references)
		//IL_0098: Unknown result type (might be due to invalid IL or missing references)
		//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
		ColorLutPass colorLutPass = default(ColorLutPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<ColorLutPass>(sampler.name, ref colorLutPass, sampler);
		try
		{
			colorLutPass.stack = stack;
			colorLutPass.colorLutResolution = colorLutResolution;
			int num = colorLutResolution * colorLutResolution;
			TextureDesc val2 = new TextureDesc(num, colorLutResolution, false, false);
			val2.colorFormat = colorFormat;
			val2.name = "Color LUT";
			TextureDesc val3 = val2;
			ColorLutPass colorLutPass2 = colorLutPass;
			TextureHandle val4 = renderGraph.CreateTexture(ref val3);
			colorLutPass2.colorLut = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val4);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<ColorLutPass>((RenderFunc<ColorLutPass>)delegate(ColorLutPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
			return colorLutPass.colorLut;
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.PostProcessing;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class PostFXPass
{
	private enum ScaleMode
	{
		None,
		Bilinear,
		Bicubic
	}

	private static readonly ProfilingSampler groupSampler = new ProfilingSampler("Post FX");

	private static readonly ProfilingSampler finalSampler = new ProfilingSampler("Final Post FX");

	private static readonly int copyBicubicId = Shader.PropertyToID("_CopyBicubic");

	private static readonly int fxaaConfigId = Shader.PropertyToID("_FXAAConfig");

	private static readonly GlobalKeyword fxaaLowKeyword = GlobalKeyword.Create("FXAA_QUALITY_LOW");

	private static readonly GlobalKeyword fxaaMediumKeyword = GlobalKeyword.Create("FXAA_QUALITY_MEDIUM");

	private static readonly GraphicsFormat colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)0);

	private PostFXStack postFXStack;

	private bool keepAlpha;

	private ScaleMode scaleMode;

	private TextureHandle colorSource;

	private TextureHandle colorGradingResult;

	private TextureHandle scaledResult;

	private void ConfigureFxaa(CommandBuffer commandBuffer)
	{
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		CameraBufferSettings.FxaaSettings fxaaSettings = postFXStack.CameraBufferSettings.fxaaSettings;
		commandBuffer.SetKeyword(ref fxaaLowKeyword, fxaaSettings.quality == CameraBufferSettings.FxaaSettings.Quality.Low);
		commandBuffer.SetKeyword(ref fxaaMediumKeyword, fxaaSettings.quality == CameraBufferSettings.FxaaSettings.Quality.Medium);
		commandBuffer.SetGlobalVector(fxaaConfigId, new Vector4(fxaaSettings.fixedThreshold, fxaaSettings.relativeThreshold, fxaaSettings.subpixelBlending));
	}

	private void Render(RenderGraphContext context)
	{
		//IL_0089: Unknown result type (might be due to invalid IL or missing references)
		//IL_008e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0093: Unknown result type (might be due to invalid IL or missing references)
		//IL_003f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0044: Unknown result type (might be due to invalid IL or missing references)
		//IL_0049: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
		//IL_0068: Unknown result type (might be due to invalid IL or missing references)
		//IL_006d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0072: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.SetGlobalFloat(PostFXStack.finalSrcBlendId, 1f);
		cmd.SetGlobalFloat(PostFXStack.finalDstBlendId, 0f);
		RenderTargetIdentifier val;
		PostFXStack.Pass pass;
		if (postFXStack.CameraBufferSettings.fxaaSettings.enabled)
		{
			val = TextureHandle.op_Implicit(colorGradingResult);
			pass = (keepAlpha ? PostFXStack.Pass.FXAA : PostFXStack.Pass.FXAAWithLuma);
			ConfigureFxaa(cmd);
			postFXStack.Draw(cmd, TextureHandle.op_Implicit(colorSource), val, keepAlpha ? PostFXStack.Pass.ApplyColorGrading : PostFXStack.Pass.ApplyColorGradingWithLuma);
		}
		else
		{
			val = TextureHandle.op_Implicit(colorSource);
			pass = PostFXStack.Pass.ApplyColorGrading;
		}
		if (scaleMode == ScaleMode.None)
		{
			postFXStack.DrawFinal(cmd, val, pass);
		}
		else
		{
			postFXStack.Draw(cmd, val, TextureHandle.op_Implicit(scaledResult), pass);
			cmd.SetGlobalFloat(copyBicubicId, (scaleMode == ScaleMode.Bicubic) ? 1f : 0f);
			postFXStack.DrawFinal(cmd, TextureHandle.op_Implicit(scaledResult), PostFXStack.Pass.FinalRescale);
		}
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
	}

	public static void Record(RenderGraph renderGraph, PostFXStack postFXStack, int colorLutResolution, bool keepAlpha, in CameraTextures textures)
	{
		//IL_0011: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_001f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0032: Unknown result type (might be due to invalid IL or missing references)
		//IL_0037: Unknown result type (might be due to invalid IL or missing references)
		//IL_004e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_005c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		//IL_0068: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
		//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
		//IL_010a: Unknown result type (might be due to invalid IL or missing references)
		//IL_010f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0113: Unknown result type (might be due to invalid IL or missing references)
		//IL_0118: Unknown result type (might be due to invalid IL or missing references)
		//IL_011d: Unknown result type (might be due to invalid IL or missing references)
		//IL_011f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0137: Unknown result type (might be due to invalid IL or missing references)
		//IL_013c: Unknown result type (might be due to invalid IL or missing references)
		//IL_015c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0161: Unknown result type (might be due to invalid IL or missing references)
		RenderGraphProfilingScope val = default(RenderGraphProfilingScope);
		((RenderGraphProfilingScope)(ref val))..ctor(renderGraph, groupSampler);
		try
		{
			TextureHandle val2 = BloomPass.Record(renderGraph, postFXStack, in textures);
			TextureHandle val3 = ColorLutPass.Record(renderGraph, postFXStack, colorLutResolution);
			PostFXPass postFXPass = default(PostFXPass);
			RenderGraphBuilder val4 = renderGraph.AddRenderPass<PostFXPass>(finalSampler.name, ref postFXPass, finalSampler);
			try
			{
				postFXPass.keepAlpha = keepAlpha;
				postFXPass.postFXStack = postFXStack;
				postFXPass.colorSource = ((RenderGraphBuilder)(ref val4)).ReadTexture(ref val2);
				((RenderGraphBuilder)(ref val4)).ReadTexture(ref val3);
				Vector2Int cameraBufferSize = postFXStack.CameraBufferSize;
				if (((Vector2Int)(ref cameraBufferSize)).x == postFXStack.Camera.pixelWidth)
				{
					postFXPass.scaleMode = ScaleMode.None;
					goto IL_00cb;
				}
				PostFXPass postFXPass2 = postFXPass;
				if (postFXStack.CameraBufferSettings.bicubicRescaling == CameraBufferSettings.BicubicRescalingMode.UpAndDown)
				{
					goto IL_00c5;
				}
				if (postFXStack.CameraBufferSettings.bicubicRescaling == CameraBufferSettings.BicubicRescalingMode.UpOnly)
				{
					cameraBufferSize = postFXStack.CameraBufferSize;
					if (((Vector2Int)(ref cameraBufferSize)).x < postFXStack.Camera.pixelWidth)
					{
						goto IL_00c5;
					}
				}
				int num = 1;
				goto IL_00c6;
				IL_00c5:
				num = 2;
				goto IL_00c6;
				IL_00c6:
				postFXPass2.scaleMode = (ScaleMode)num;
				goto IL_00cb;
				IL_00cb:
				bool enabled = postFXStack.CameraBufferSettings.fxaaSettings.enabled;
				if (enabled || postFXPass.scaleMode != 0)
				{
					cameraBufferSize = postFXStack.CameraBufferSize;
					int x = ((Vector2Int)(ref cameraBufferSize)).x;
					cameraBufferSize = postFXStack.CameraBufferSize;
					TextureDesc val5 = new TextureDesc(x, ((Vector2Int)(ref cameraBufferSize)).y, false, false);
					val5.colorFormat = colorFormat;
					TextureDesc val6 = val5;
					if (enabled)
					{
						val6.name = "Color Grading Result";
						postFXPass.colorGradingResult = ((RenderGraphBuilder)(ref val4)).CreateTransientTexture(ref val6);
					}
					if (postFXPass.scaleMode != 0)
					{
						val6.name = "Scaled Result";
						postFXPass.scaledResult = ((RenderGraphBuilder)(ref val4)).CreateTransientTexture(ref val6);
					}
				}
				((RenderGraphBuilder)(ref val4)).SetRenderFunc<PostFXPass>((RenderFunc<PostFXPass>)delegate(PostFXPass pass, RenderGraphContext context)
				{
					pass.Render(context);
				});
			}
			finally
			{
				((IDisposable)(RenderGraphBuilder)(ref val4)/*cast due to .constrained prefix*/).Dispose();
			}
		}
		finally
		{
			((IDisposable)(RenderGraphProfilingScope)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.PostProcessing;
using UnityEngine;
using UnityEngine.Rendering;

public class PostFXStack
{
	public enum Pass
	{
		BloomPrefilter,
		BloomPrefilterFireflies,
		BloomHorizontal,
		BloomVertical,
		BloomAdd,
		BloomScatter,
		BloomScatterFinal,
		ColorGradingNone,
		ColorGradingACES,
		ColorGradingNeutral,
		ColorGradingReinhard,
		ApplyColorGrading,
		ApplyColorGradingWithLuma,
		FXAA,
		FXAAWithLuma,
		FinalRescale,
		Copy
	}

	public static readonly int fxSourceId = Shader.PropertyToID("_PostFXSource");

	public static readonly int fxSource2Id = Shader.PropertyToID("_PostFXSource2");

	public static readonly int finalSrcBlendId = Shader.PropertyToID("_FinalSrcBlend");

	public static readonly int finalDstBlendId = Shader.PropertyToID("_FinalDstBlend");

	private static readonly Rect fullViewRect = new Rect(0f, 0f, 1f, 1f);

	public CameraBufferSettings CameraBufferSettings { get; set; }

	public Vector2Int CameraBufferSize { get; set; }

	public Camera Camera { get; set; }

	public CameraSettings.FinalBlendMode FinalBlendMode { get; set; }

	public PostFXSettings Settings { get; set; }

	public void Draw(CommandBuffer commandBuffer, RenderTargetIdentifier to, Pass pass)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_000a: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer.SetRenderTarget(to, (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		commandBuffer.DrawProcedural(Matrix4x4.identity, Settings.Material, (int)pass, (MeshTopology)0, 3);
	}

	public void Draw(CommandBuffer commandBuffer, RenderTargetIdentifier from, RenderTargetIdentifier to, Pass pass)
	{
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer.SetGlobalTexture(fxSourceId, from);
		commandBuffer.SetRenderTarget(to, (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		commandBuffer.DrawProcedural(Matrix4x4.identity, Settings.Material, (int)pass, (MeshTopology)0, 3);
	}

	public void DrawFinal(CommandBuffer commandBuffer, RenderTargetIdentifier from, Pass pass)
	{
		//IL_000c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0023: Unknown result type (might be due to invalid IL or missing references)
		//IL_0034: Unknown result type (might be due to invalid IL or missing references)
		//IL_003c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0047: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_0059: Unknown result type (might be due to invalid IL or missing references)
		//IL_0076: Unknown result type (might be due to invalid IL or missing references)
		//IL_0081: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer.SetGlobalFloat(finalSrcBlendId, (float)FinalBlendMode.source);
		commandBuffer.SetGlobalFloat(finalDstBlendId, (float)FinalBlendMode.destination);
		commandBuffer.SetGlobalTexture(fxSourceId, from);
		commandBuffer.SetRenderTarget(RenderTargetIdentifier.op_Implicit((BuiltinRenderTextureType)2), (RenderBufferLoadAction)(((int)FinalBlendMode.destination == 0 && Camera.rect == fullViewRect) ? 2 : 0), (RenderBufferStoreAction)0);
		commandBuffer.SetViewport(Camera.pixelRect);
		commandBuffer.DrawProcedural(Matrix4x4.identity, Settings.Material, (int)pass, (MeshTopology)0, 3);
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Rendering;

public struct AdditionalLightData
{
	public const int STRIDE = 80;

	public Vector4 color;

	public Vector4 position;

	public Vector4 directionAndMask;

	public Vector4 spotAngle;

	public Vector4 shadowData;

	public static AdditionalLightData CreatePointLight(ref VisibleLight visibleLight, Light light, Vector4 shadowData)
	{
		//IL_0003: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_001e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0023: Unknown result type (might be due to invalid IL or missing references)
		//IL_005d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0062: Unknown result type (might be due to invalid IL or missing references)
		//IL_0069: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_008c: Unknown result type (might be due to invalid IL or missing references)
		//IL_008d: Unknown result type (might be due to invalid IL or missing references)
		AdditionalLightData result = default(AdditionalLightData);
		result.color = Color.op_Implicit(((VisibleLight)(ref visibleLight)).finalColor);
		Matrix4x4 localToWorldMatrix = ((VisibleLight)(ref visibleLight)).localToWorldMatrix;
		result.position = ((Matrix4x4)(ref localToWorldMatrix)).GetColumn(3);
		result.position.w = 1f / Mathf.Max(((VisibleLight)(ref visibleLight)).range * ((VisibleLight)(ref visibleLight)).range, 1E-05f);
		result.spotAngle = new Vector4(0f, 1f);
		result.directionAndMask = Vector4.zero;
		result.directionAndMask.w = light.renderingLayerMask.ReinterpretAsFloat();
		result.shadowData = shadowData;
		return result;
	}

	public static AdditionalLightData CreateSpotLight(ref VisibleLight visibleLight, Light light, Vector4 shadowData)
	{
		//IL_0003: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_001f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0024: Unknown result type (might be due to invalid IL or missing references)
		//IL_0055: Unknown result type (might be due to invalid IL or missing references)
		//IL_005a: Unknown result type (might be due to invalid IL or missing references)
		//IL_005f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0064: Unknown result type (might be due to invalid IL or missing references)
		//IL_0069: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
		AdditionalLightData result = default(AdditionalLightData);
		result.color = Color.op_Implicit(((VisibleLight)(ref visibleLight)).finalColor);
		Matrix4x4 localToWorldMatrix = ((VisibleLight)(ref visibleLight)).localToWorldMatrix;
		result.position = ((Matrix4x4)(ref localToWorldMatrix)).GetColumn(3);
		result.position.w = 1f / Mathf.Max(((VisibleLight)(ref visibleLight)).range * ((VisibleLight)(ref visibleLight)).range, 1E-05f);
		localToWorldMatrix = ((VisibleLight)(ref visibleLight)).localToWorldMatrix;
		result.directionAndMask = -((Matrix4x4)(ref localToWorldMatrix)).GetColumn(2);
		result.directionAndMask.w = light.renderingLayerMask.ReinterpretAsFloat();
		float num = Mathf.Cos((float)Math.PI / 360f * light.innerSpotAngle);
		float num2 = Mathf.Cos((float)Math.PI / 360f * ((VisibleLight)(ref visibleLight)).spotAngle);
		float num3 = 1f / Mathf.Max(num - num2, 0.001f);
		result.spotAngle = new Vector4(num3, (0f - num2) * num3);
		result.shadowData = shadowData;
		return result;
	}
}


using UnityEngine;

public struct AdditionalShadowData
{
	public const int STRIDE = 80;

	public Vector4 tileData;

	public Matrix4x4 shadowMatrix;

	public AdditionalShadowData(Vector2 offset, float scale, float bias, float border, Matrix4x4 matrix)
	{
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_004b: Unknown result type (might be due to invalid IL or missing references)
		//IL_004d: Unknown result type (might be due to invalid IL or missing references)
		tileData.x = offset.x * scale + border;
		tileData.y = offset.y * scale + border;
		tileData.z = scale - border - border;
		tileData.w = bias;
		shadowMatrix = matrix;
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Experimental.Rendering;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class DeferredIndirectLightingPass
{
	private enum Pass
	{
		IndirectLighting,
		Combine
	}

	private static readonly ProfilingSampler drawIndirectLightingSampler = new ProfilingSampler("Draw Indirect Lighting");

	private static readonly ProfilingSampler combineIndirectLightingSampler = new ProfilingSampler("Combine Indirect Lighting");

	private static readonly int indirectDiffuseTextureId = Shader.PropertyToID("_IndirectDiffuseTexture");

	private static readonly int indirectSpecularTextureId = Shader.PropertyToID("_IndirectSpecularTexture");

	private static readonly int inverseViewProjectionMatrixId = Shader.PropertyToID("_InvViewProjection");

	private static readonly int gBuffer0Id = Shader.PropertyToID("_CameraGBufferTexture0");

	private static readonly int gBuffer1Id = Shader.PropertyToID("_CameraGBufferTexture1");

	private static readonly int gBuffer2Id = Shader.PropertyToID("_CameraGBufferTexture2");

	private static readonly int gBuffer3Id = Shader.PropertyToID("_CameraGBufferTexture3");

	private readonly RenderTargetIdentifier[] indirectLightingRenderTargets = (RenderTargetIdentifier[])(object)new RenderTargetIdentifier[2];

	private readonly TextureHandle[] gBufferTextureHandles = (TextureHandle[])(object)new TextureHandle[4];

	private TextureHandle indirectDiffuseHandle;

	private TextureHandle indirectSpecularHandle;

	private TextureHandle cameraColorHandle;

	private TextureHandle cameraDepthHandle;

	private Camera camera;

	private Material material;

	private void Setup(Camera camera, Material material)
	{
		this.camera = camera;
		this.material = material;
	}

	private void DrawIndirectLighting(RenderGraphContext context)
	{
		//IL_000c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0022: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		//IL_002a: Unknown result type (might be due to invalid IL or missing references)
		//IL_002f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0042: Unknown result type (might be due to invalid IL or missing references)
		//IL_004f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_0059: Unknown result type (might be due to invalid IL or missing references)
		//IL_0064: Unknown result type (might be due to invalid IL or missing references)
		//IL_0097: Unknown result type (might be due to invalid IL or missing references)
		//IL_009c: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0107: Unknown result type (might be due to invalid IL or missing references)
		//IL_010c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0118: Unknown result type (might be due to invalid IL or missing references)
		//IL_0128: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		Matrix4x4 val = GL.GetGPUProjectionMatrix(camera.projectionMatrix, true) * camera.worldToCameraMatrix;
		Matrix4x4 inverse = ((Matrix4x4)(ref val)).inverse;
		indirectLightingRenderTargets[0] = TextureHandle.op_Implicit(indirectDiffuseHandle);
		indirectLightingRenderTargets[1] = TextureHandle.op_Implicit(indirectSpecularHandle);
		cmd.SetGlobalMatrix(inverseViewProjectionMatrixId, inverse);
		cmd.GetTemporaryRT(indirectSpecularTextureId, camera.pixelWidth, camera.pixelHeight, 0, (FilterMode)0, (GraphicsFormat)48);
		cmd.SetRenderTarget(indirectLightingRenderTargets, TextureHandle.op_Implicit(cameraDepthHandle));
		cmd.SetGlobalTexture(gBuffer0Id, TextureHandle.op_Implicit(gBufferTextureHandles[0]));
		cmd.SetGlobalTexture(gBuffer1Id, TextureHandle.op_Implicit(gBufferTextureHandles[1]));
		cmd.SetGlobalTexture(gBuffer2Id, TextureHandle.op_Implicit(gBufferTextureHandles[2]));
		cmd.SetGlobalTexture(gBuffer3Id, TextureHandle.op_Implicit(gBufferTextureHandles[3]));
		cmd.ClearRenderTarget((RTClearFlags)1, Color.clear, 1f, 0u);
		cmd.DrawProcedural(Matrix4x4.identity, material, 0, (MeshTopology)0, 3);
	}

	private void CombineIndirectLighting(RenderGraphContext context)
	{
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_002e: Unknown result type (might be due to invalid IL or missing references)
		//IL_003f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0044: Unknown result type (might be due to invalid IL or missing references)
		//IL_004e: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.SetRenderTarget(TextureHandle.op_Implicit(cameraColorHandle), TextureHandle.op_Implicit(cameraDepthHandle));
		cmd.SetGlobalTexture(indirectDiffuseTextureId, TextureHandle.op_Implicit(indirectDiffuseHandle));
		cmd.SetGlobalTexture(indirectSpecularTextureId, TextureHandle.op_Implicit(indirectSpecularHandle));
		cmd.DrawProcedural(Matrix4x4.identity, material, 1, (MeshTopology)0, 3);
	}

	private static bool SkipPass(Camera camera)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Invalid comparison between Unknown and I4
		return (int)camera.cameraType == 16;
	}

	public static DeferredIndirectLightingTextures Record_DrawIndirectLighting(RenderGraph renderGraph, Camera camera, Material material, CameraTextures cameraTextures, GBufferTextures gBufferTextures, Vector2Int attachmentSize, bool useHDR)
	{
		//IL_002a: Unknown result type (might be due to invalid IL or missing references)
		//IL_002f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0040: Unknown result type (might be due to invalid IL or missing references)
		//IL_0045: Unknown result type (might be due to invalid IL or missing references)
		//IL_0050: Unknown result type (might be due to invalid IL or missing references)
		//IL_0055: Unknown result type (might be due to invalid IL or missing references)
		//IL_0066: Unknown result type (might be due to invalid IL or missing references)
		//IL_0067: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0073: Unknown result type (might be due to invalid IL or missing references)
		//IL_0077: Unknown result type (might be due to invalid IL or missing references)
		//IL_007c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0093: Unknown result type (might be due to invalid IL or missing references)
		//IL_0098: Unknown result type (might be due to invalid IL or missing references)
		//IL_009c: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0100: Unknown result type (might be due to invalid IL or missing references)
		//IL_0105: Unknown result type (might be due to invalid IL or missing references)
		//IL_0131: Unknown result type (might be due to invalid IL or missing references)
		//IL_0137: Unknown result type (might be due to invalid IL or missing references)
		if (SkipPass(camera))
		{
			return new DeferredIndirectLightingTextures(TextureHandle.nullHandle, TextureHandle.nullHandle);
		}
		DeferredIndirectLightingPass deferredIndirectLightingPass = default(DeferredIndirectLightingPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<DeferredIndirectLightingPass>(drawIndirectLightingSampler.name, ref deferredIndirectLightingPass, drawIndirectLightingSampler);
		try
		{
			TextureDesc val2 = new TextureDesc(((Vector2Int)(ref attachmentSize)).x, ((Vector2Int)(ref attachmentSize)).y, false, false);
			val2.colorFormat = SystemInfo.GetGraphicsFormat((DefaultFormat)(useHDR ? 1 : 0));
			val2.name = "Indirect Diffuse";
			TextureDesc val3 = val2;
			DeferredIndirectLightingPass deferredIndirectLightingPass2 = deferredIndirectLightingPass;
			TextureHandle val4 = renderGraph.CreateTexture(ref val3);
			deferredIndirectLightingPass2.indirectDiffuseHandle = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val4);
			val3.name = "Indirect Specular";
			DeferredIndirectLightingPass deferredIndirectLightingPass3 = deferredIndirectLightingPass;
			val4 = renderGraph.CreateTexture(ref val3);
			deferredIndirectLightingPass3.indirectSpecularHandle = ((RenderGraphBuilder)(ref val)).WriteTexture(ref val4);
			deferredIndirectLightingPass.Setup(camera, material);
			for (int i = 0; i < deferredIndirectLightingPass.gBufferTextureHandles.Length; i++)
			{
				deferredIndirectLightingPass.gBufferTextureHandles[i] = ((RenderGraphBuilder)(ref val)).ReadTexture(ref gBufferTextures.gBufferTextureHandles[i]);
			}
			((RenderGraphBuilder)(ref val)).ReadTexture(ref cameraTextures.depthCopy);
			deferredIndirectLightingPass.cameraDepthHandle = ((RenderGraphBuilder)(ref val)).ReadTexture(ref cameraTextures.depthAttachment);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<DeferredIndirectLightingPass>((RenderFunc<DeferredIndirectLightingPass>)delegate(DeferredIndirectLightingPass pass, RenderGraphContext context)
			{
				pass.DrawIndirectLighting(context);
			});
			return new DeferredIndirectLightingTextures(deferredIndirectLightingPass.indirectDiffuseHandle, deferredIndirectLightingPass.indirectSpecularHandle);
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}

	public static void Record_CombineIndirectLighting(RenderGraph renderGraph, CameraTextures cameraTextures, Camera camera, Material material, DeferredIndirectLightingTextures indirectLightingTextures)
	{
		//IL_001b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_0033: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_0047: Unknown result type (might be due to invalid IL or missing references)
		//IL_004c: Unknown result type (might be due to invalid IL or missing references)
		//IL_005b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0060: Unknown result type (might be due to invalid IL or missing references)
		//IL_006f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0074: Unknown result type (might be due to invalid IL or missing references)
		if (SkipPass(camera))
		{
			return;
		}
		DeferredIndirectLightingPass deferredIndirectLightingPass = default(DeferredIndirectLightingPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<DeferredIndirectLightingPass>(combineIndirectLightingSampler.name, ref deferredIndirectLightingPass, combineIndirectLightingSampler);
		try
		{
			deferredIndirectLightingPass.Setup(camera, material);
			deferredIndirectLightingPass.indirectDiffuseHandle = ((RenderGraphBuilder)(ref val)).ReadTexture(ref indirectLightingTextures.indirectDiffuseHandle);
			deferredIndirectLightingPass.indirectSpecularHandle = ((RenderGraphBuilder)(ref val)).ReadTexture(ref indirectLightingTextures.indirectSpecularHandle);
			deferredIndirectLightingPass.cameraColorHandle = ((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref cameraTextures.colorAttachment);
			deferredIndirectLightingPass.cameraDepthHandle = ((RenderGraphBuilder)(ref val)).ReadTexture(ref cameraTextures.depthAttachment);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<DeferredIndirectLightingPass>((RenderFunc<DeferredIndirectLightingPass>)delegate(DeferredIndirectLightingPass pass, RenderGraphContext context)
			{
				pass.CombineIndirectLighting(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using UnityEngine.Experimental.Rendering.RenderGraphModule;

public readonly ref struct DeferredIndirectLightingTextures
{
	public readonly TextureHandle indirectDiffuseHandle;

	public readonly TextureHandle indirectSpecularHandle;

	public DeferredIndirectLightingTextures(TextureHandle indirectDiffuseHandle, TextureHandle indirectSpecularHandle)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		this.indirectDiffuseHandle = indirectDiffuseHandle;
		this.indirectSpecularHandle = indirectSpecularHandle;
	}
}


using System;
using System.Collections.Generic;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using Unity.Collections;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class DeferredLightingPass
{
	private enum ShaderPasses
	{
		StencilVolume,
		Lighting,
		DirectionalLighting
	}

	private const float STENCIL_SHAPE_GUARD = 1.06067f;

	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Deferred Lighting");

	private static readonly int gBuffer0Id = Shader.PropertyToID("_CameraGBufferTexture0");

	private static readonly int gBuffer1Id = Shader.PropertyToID("_CameraGBufferTexture1");

	private static readonly int gBuffer2Id = Shader.PropertyToID("_CameraGBufferTexture2");

	private static readonly int inverseViewProjId = Shader.PropertyToID("_InverseViewProj");

	private static readonly int spotLightScaleId = Shader.PropertyToID("_SpotLightScale");

	private static readonly int spotLightBiasId = Shader.PropertyToID("_SpotLightBias");

	private static readonly int spotLightGuardId = Shader.PropertyToID("_SpotLightGuard");

	private static readonly int lightColorId = Shader.PropertyToID("_LightColor");

	private static readonly int lightPositionAndRangeId = Shader.PropertyToID("_LightPositionAndRange");

	private static readonly int lightDirectionAndMaskId = Shader.PropertyToID("_LightDirectionAndMask");

	private static readonly int lightSpotAngleId = Shader.PropertyToID("_LightSpotAngles");

	private static readonly int lightShadowDataId = Shader.PropertyToID("_LightShadowData");

	private readonly TextureHandle[] gBufferTextureHandles = (TextureHandle[])(object)new TextureHandle[4];

	private CullingResults cullingResults;

	private Mesh icoSphere;

	private Mesh icoHemisphere;

	private Material deferredLightingMaterial;

	private Camera camera;

	private CameraSettings cameraSettings;

	private Dictionary<Light, Vector4> lightShadowData;

	private static Mesh CreateSphereMesh()
	{
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0033: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_004e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_0069: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0084: Unknown result type (might be due to invalid IL or missing references)
		//IL_0089: Unknown result type (might be due to invalid IL or missing references)
		//IL_009f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00da: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
		//IL_010c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0111: Unknown result type (might be due to invalid IL or missing references)
		//IL_0128: Unknown result type (might be due to invalid IL or missing references)
		//IL_012d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0144: Unknown result type (might be due to invalid IL or missing references)
		//IL_0149: Unknown result type (might be due to invalid IL or missing references)
		//IL_0160: Unknown result type (might be due to invalid IL or missing references)
		//IL_0165: Unknown result type (might be due to invalid IL or missing references)
		//IL_017c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0181: Unknown result type (might be due to invalid IL or missing references)
		//IL_0198: Unknown result type (might be due to invalid IL or missing references)
		//IL_019d: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b4: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d0: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d5: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ec: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f1: Unknown result type (might be due to invalid IL or missing references)
		//IL_0208: Unknown result type (might be due to invalid IL or missing references)
		//IL_020d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0224: Unknown result type (might be due to invalid IL or missing references)
		//IL_0229: Unknown result type (might be due to invalid IL or missing references)
		//IL_0240: Unknown result type (might be due to invalid IL or missing references)
		//IL_0245: Unknown result type (might be due to invalid IL or missing references)
		//IL_025c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0261: Unknown result type (might be due to invalid IL or missing references)
		//IL_0278: Unknown result type (might be due to invalid IL or missing references)
		//IL_027d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0294: Unknown result type (might be due to invalid IL or missing references)
		//IL_0299: Unknown result type (might be due to invalid IL or missing references)
		//IL_02b0: Unknown result type (might be due to invalid IL or missing references)
		//IL_02b5: Unknown result type (might be due to invalid IL or missing references)
		//IL_02cc: Unknown result type (might be due to invalid IL or missing references)
		//IL_02d1: Unknown result type (might be due to invalid IL or missing references)
		//IL_02e8: Unknown result type (might be due to invalid IL or missing references)
		//IL_02ed: Unknown result type (might be due to invalid IL or missing references)
		//IL_0304: Unknown result type (might be due to invalid IL or missing references)
		//IL_0309: Unknown result type (might be due to invalid IL or missing references)
		//IL_0320: Unknown result type (might be due to invalid IL or missing references)
		//IL_0325: Unknown result type (might be due to invalid IL or missing references)
		//IL_033c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0341: Unknown result type (might be due to invalid IL or missing references)
		//IL_0358: Unknown result type (might be due to invalid IL or missing references)
		//IL_035d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0374: Unknown result type (might be due to invalid IL or missing references)
		//IL_0379: Unknown result type (might be due to invalid IL or missing references)
		//IL_0390: Unknown result type (might be due to invalid IL or missing references)
		//IL_0395: Unknown result type (might be due to invalid IL or missing references)
		//IL_03ac: Unknown result type (might be due to invalid IL or missing references)
		//IL_03b1: Unknown result type (might be due to invalid IL or missing references)
		//IL_03c8: Unknown result type (might be due to invalid IL or missing references)
		//IL_03cd: Unknown result type (might be due to invalid IL or missing references)
		//IL_03e4: Unknown result type (might be due to invalid IL or missing references)
		//IL_03e9: Unknown result type (might be due to invalid IL or missing references)
		//IL_0400: Unknown result type (might be due to invalid IL or missing references)
		//IL_0405: Unknown result type (might be due to invalid IL or missing references)
		//IL_041c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0421: Unknown result type (might be due to invalid IL or missing references)
		//IL_0438: Unknown result type (might be due to invalid IL or missing references)
		//IL_043d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0454: Unknown result type (might be due to invalid IL or missing references)
		//IL_0459: Unknown result type (might be due to invalid IL or missing references)
		//IL_0470: Unknown result type (might be due to invalid IL or missing references)
		//IL_0475: Unknown result type (might be due to invalid IL or missing references)
		//IL_048c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0491: Unknown result type (might be due to invalid IL or missing references)
		//IL_04ad: Unknown result type (might be due to invalid IL or missing references)
		//IL_04b2: Unknown result type (might be due to invalid IL or missing references)
		//IL_04b9: Unknown result type (might be due to invalid IL or missing references)
		//IL_04c0: Unknown result type (might be due to invalid IL or missing references)
		//IL_04c7: Unknown result type (might be due to invalid IL or missing references)
		//IL_04d0: Expected O, but got Unknown
		Vector3[] vertices = (Vector3[])(object)new Vector3[42]
		{
			new Vector3(0f, 0f, -1.07f),
			new Vector3(0.174f, -0.535f, -0.91f),
			new Vector3(-0.455f, -0.331f, -0.91f),
			new Vector3(0.562f, 0f, -0.91f),
			new Vector3(-0.455f, 0.331f, -0.91f),
			new Vector3(0.174f, 0.535f, -0.91f),
			new Vector3(-0.281f, -0.865f, -0.562f),
			new Vector3(0.736f, -0.535f, -0.562f),
			new Vector3(0.296f, -0.91f, -0.468f),
			new Vector3(-0.91f, 0f, -0.562f),
			new Vector3(-0.774f, -0.562f, -0.478f),
			new Vector3(0f, -1.07f, 0f),
			new Vector3(-0.629f, -0.865f, 0f),
			new Vector3(0.629f, -0.865f, 0f),
			new Vector3(-1.017f, -0.331f, 0f),
			new Vector3(0.957f, 0f, -0.478f),
			new Vector3(0.736f, 0.535f, -0.562f),
			new Vector3(1.017f, -0.331f, 0f),
			new Vector3(1.017f, 0.331f, 0f),
			new Vector3(-0.296f, -0.91f, 0.478f),
			new Vector3(0.281f, -0.865f, 0.562f),
			new Vector3(0.774f, -0.562f, 0.478f),
			new Vector3(-0.736f, -0.535f, 0.562f),
			new Vector3(0.91f, 0f, 0.562f),
			new Vector3(0.455f, -0.331f, 0.91f),
			new Vector3(-0.174f, -0.535f, 0.91f),
			new Vector3(0.629f, 0.865f, 0f),
			new Vector3(0.774f, 0.562f, 0.478f),
			new Vector3(0.455f, 0.331f, 0.91f),
			new Vector3(0f, 0f, 1.07f),
			new Vector3(-0.562f, 0f, 0.91f),
			new Vector3(-0.957f, 0f, 0.478f),
			new Vector3(0.281f, 0.865f, 0.562f),
			new Vector3(-0.174f, 0.535f, 0.91f),
			new Vector3(0.296f, 0.91f, -0.478f),
			new Vector3(-1.017f, 0.331f, 0f),
			new Vector3(-0.736f, 0.535f, 0.562f),
			new Vector3(-0.296f, 0.91f, 0.478f),
			new Vector3(0f, 1.07f, 0f),
			new Vector3(-0.281f, 0.865f, -0.562f),
			new Vector3(-0.774f, 0.562f, -0.478f),
			new Vector3(-0.629f, 0.865f, 0f)
		};
		int[] triangles = new int[240]
		{
			0, 1, 2, 0, 3, 1, 2, 4, 0, 0,
			5, 3, 0, 4, 5, 1, 6, 2, 3, 7,
			1, 1, 8, 6, 1, 7, 8, 9, 4, 2,
			2, 6, 10, 10, 9, 2, 8, 11, 6, 6,
			12, 10, 11, 12, 6, 7, 13, 8, 8, 13,
			11, 10, 14, 9, 10, 12, 14, 3, 15, 7,
			5, 16, 3, 3, 16, 15, 15, 17, 7, 17,
			13, 7, 16, 18, 15, 15, 18, 17, 11, 19,
			12, 13, 20, 11, 11, 20, 19, 17, 21, 13,
			13, 21, 20, 12, 19, 22, 12, 22, 14, 17,
			23, 21, 18, 23, 17, 21, 24, 20, 23, 24,
			21, 20, 25, 19, 19, 25, 22, 24, 25, 20,
			26, 18, 16, 18, 27, 23, 26, 27, 18, 28,
			24, 23, 27, 28, 23, 24, 29, 25, 28, 29,
			24, 25, 30, 22, 25, 29, 30, 14, 22, 31,
			22, 30, 31, 32, 28, 27, 26, 32, 27, 33,
			29, 28, 30, 29, 33, 33, 28, 32, 34, 26,
			16, 5, 34, 16, 14, 31, 35, 14, 35, 9,
			31, 30, 36, 30, 33, 36, 35, 31, 36, 37,
			33, 32, 36, 33, 37, 38, 32, 26, 34, 38,
			26, 38, 37, 32, 5, 39, 34, 39, 38, 34,
			4, 39, 5, 9, 40, 4, 9, 35, 40, 4,
			40, 39, 35, 36, 41, 41, 36, 37, 41, 37,
			38, 40, 35, 41, 40, 41, 39, 41, 38, 39
		};
		return new Mesh
		{
			indexFormat = (IndexFormat)0,
			vertices = vertices,
			triangles = triangles,
			hideFlags = (HideFlags)61
		};
	}

	private static Mesh CreateHemisphereMesh()
	{
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0033: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_004e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_0069: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0084: Unknown result type (might be due to invalid IL or missing references)
		//IL_0089: Unknown result type (might be due to invalid IL or missing references)
		//IL_009f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00da: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
		//IL_010c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0111: Unknown result type (might be due to invalid IL or missing references)
		//IL_0128: Unknown result type (might be due to invalid IL or missing references)
		//IL_012d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0144: Unknown result type (might be due to invalid IL or missing references)
		//IL_0149: Unknown result type (might be due to invalid IL or missing references)
		//IL_0160: Unknown result type (might be due to invalid IL or missing references)
		//IL_0165: Unknown result type (might be due to invalid IL or missing references)
		//IL_017c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0181: Unknown result type (might be due to invalid IL or missing references)
		//IL_0198: Unknown result type (might be due to invalid IL or missing references)
		//IL_019d: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b4: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d0: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d5: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ec: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f1: Unknown result type (might be due to invalid IL or missing references)
		//IL_0208: Unknown result type (might be due to invalid IL or missing references)
		//IL_020d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0224: Unknown result type (might be due to invalid IL or missing references)
		//IL_0229: Unknown result type (might be due to invalid IL or missing references)
		//IL_0240: Unknown result type (might be due to invalid IL or missing references)
		//IL_0245: Unknown result type (might be due to invalid IL or missing references)
		//IL_025c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0261: Unknown result type (might be due to invalid IL or missing references)
		//IL_0278: Unknown result type (might be due to invalid IL or missing references)
		//IL_027d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0294: Unknown result type (might be due to invalid IL or missing references)
		//IL_0299: Unknown result type (might be due to invalid IL or missing references)
		//IL_02b0: Unknown result type (might be due to invalid IL or missing references)
		//IL_02b5: Unknown result type (might be due to invalid IL or missing references)
		//IL_02cc: Unknown result type (might be due to invalid IL or missing references)
		//IL_02d1: Unknown result type (might be due to invalid IL or missing references)
		//IL_02e8: Unknown result type (might be due to invalid IL or missing references)
		//IL_02ed: Unknown result type (might be due to invalid IL or missing references)
		//IL_0304: Unknown result type (might be due to invalid IL or missing references)
		//IL_0309: Unknown result type (might be due to invalid IL or missing references)
		//IL_0320: Unknown result type (might be due to invalid IL or missing references)
		//IL_0325: Unknown result type (might be due to invalid IL or missing references)
		//IL_033c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0341: Unknown result type (might be due to invalid IL or missing references)
		//IL_0358: Unknown result type (might be due to invalid IL or missing references)
		//IL_035d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0374: Unknown result type (might be due to invalid IL or missing references)
		//IL_0379: Unknown result type (might be due to invalid IL or missing references)
		//IL_0390: Unknown result type (might be due to invalid IL or missing references)
		//IL_0395: Unknown result type (might be due to invalid IL or missing references)
		//IL_03ac: Unknown result type (might be due to invalid IL or missing references)
		//IL_03b1: Unknown result type (might be due to invalid IL or missing references)
		//IL_03c8: Unknown result type (might be due to invalid IL or missing references)
		//IL_03cd: Unknown result type (might be due to invalid IL or missing references)
		//IL_03e4: Unknown result type (might be due to invalid IL or missing references)
		//IL_03e9: Unknown result type (might be due to invalid IL or missing references)
		//IL_0400: Unknown result type (might be due to invalid IL or missing references)
		//IL_0405: Unknown result type (might be due to invalid IL or missing references)
		//IL_041c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0421: Unknown result type (might be due to invalid IL or missing references)
		//IL_0438: Unknown result type (might be due to invalid IL or missing references)
		//IL_043d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0454: Unknown result type (might be due to invalid IL or missing references)
		//IL_0459: Unknown result type (might be due to invalid IL or missing references)
		//IL_0470: Unknown result type (might be due to invalid IL or missing references)
		//IL_0475: Unknown result type (might be due to invalid IL or missing references)
		//IL_048c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0491: Unknown result type (might be due to invalid IL or missing references)
		//IL_04ad: Unknown result type (might be due to invalid IL or missing references)
		//IL_04b2: Unknown result type (might be due to invalid IL or missing references)
		//IL_04b9: Unknown result type (might be due to invalid IL or missing references)
		//IL_04c0: Unknown result type (might be due to invalid IL or missing references)
		//IL_04c7: Unknown result type (might be due to invalid IL or missing references)
		//IL_04d0: Expected O, but got Unknown
		Vector3[] vertices = (Vector3[])(object)new Vector3[42]
		{
			new Vector3(0f, 0f, 0f),
			new Vector3(1f, 0f, 0f),
			new Vector3(0.92388f, 0.382683f, 0f),
			new Vector3(0.707107f, 0.707107f, 0f),
			new Vector3(0.382683f, 0.92388f, 0f),
			new Vector3(-0f, 1f, 0f),
			new Vector3(-0.382684f, 0.92388f, 0f),
			new Vector3(-0.707107f, 0.707107f, 0f),
			new Vector3(-0.92388f, 0.382683f, 0f),
			new Vector3(-1f, -0f, 0f),
			new Vector3(-0.92388f, -0.382683f, 0f),
			new Vector3(-0.707107f, -0.707107f, 0f),
			new Vector3(-0.382683f, -0.92388f, 0f),
			new Vector3(0f, -1f, 0f),
			new Vector3(0.382684f, -0.923879f, 0f),
			new Vector3(0.707107f, -0.707107f, 0f),
			new Vector3(0.92388f, -0.382683f, 0f),
			new Vector3(0f, 0f, 1f),
			new Vector3(0.707107f, 0f, 0.707107f),
			new Vector3(0f, -0.707107f, 0.707107f),
			new Vector3(0f, 0.707107f, 0.707107f),
			new Vector3(-0.707107f, 0f, 0.707107f),
			new Vector3(0.816497f, -0.408248f, 0.408248f),
			new Vector3(0.408248f, -0.408248f, 0.816497f),
			new Vector3(0.408248f, -0.816497f, 0.408248f),
			new Vector3(0.408248f, 0.816497f, 0.408248f),
			new Vector3(0.408248f, 0.408248f, 0.816497f),
			new Vector3(0.816497f, 0.408248f, 0.408248f),
			new Vector3(-0.816497f, 0.408248f, 0.408248f),
			new Vector3(-0.408248f, 0.408248f, 0.816497f),
			new Vector3(-0.408248f, 0.816497f, 0.408248f),
			new Vector3(-0.408248f, -0.816497f, 0.408248f),
			new Vector3(-0.408248f, -0.408248f, 0.816497f),
			new Vector3(-0.816497f, -0.408248f, 0.408248f),
			new Vector3(0f, -0.92388f, 0.382683f),
			new Vector3(0.92388f, 0f, 0.382683f),
			new Vector3(0f, -0.382683f, 0.92388f),
			new Vector3(0.382683f, 0f, 0.92388f),
			new Vector3(0f, 0.92388f, 0.382683f),
			new Vector3(0f, 0.382683f, 0.92388f),
			new Vector3(-0.92388f, 0f, 0.382683f),
			new Vector3(-0.382683f, 0f, 0.92388f)
		};
		int[] triangles = new int[240]
		{
			0, 2, 1, 0, 3, 2, 0, 4, 3, 0,
			5, 4, 0, 6, 5, 0, 7, 6, 0, 8,
			7, 0, 9, 8, 0, 10, 9, 0, 11, 10,
			0, 12, 11, 0, 13, 12, 0, 14, 13, 0,
			15, 14, 0, 16, 15, 0, 1, 16, 22, 23,
			24, 25, 26, 27, 28, 29, 30, 31, 32, 33,
			14, 24, 34, 35, 22, 16, 36, 23, 37, 2,
			27, 35, 38, 25, 4, 37, 26, 39, 6, 30,
			38, 40, 28, 8, 39, 29, 41, 10, 33, 40,
			34, 31, 12, 41, 32, 36, 15, 22, 24, 18,
			23, 22, 19, 24, 23, 3, 25, 27, 20, 26,
			25, 18, 27, 26, 7, 28, 30, 21, 29, 28,
			20, 30, 29, 11, 31, 33, 19, 32, 31, 21,
			33, 32, 13, 14, 34, 15, 24, 14, 19, 34,
			24, 1, 35, 16, 18, 22, 35, 15, 16, 22,
			17, 36, 37, 19, 23, 36, 18, 37, 23, 1,
			2, 35, 3, 27, 2, 18, 35, 27, 5, 38,
			4, 20, 25, 38, 3, 4, 25, 17, 37, 39,
			18, 26, 37, 20, 39, 26, 5, 6, 38, 7,
			30, 6, 20, 38, 30, 9, 40, 8, 21, 28,
			40, 7, 8, 28, 17, 39, 41, 20, 29, 39,
			21, 41, 29, 9, 10, 40, 11, 33, 10, 21,
			40, 33, 13, 34, 12, 19, 31, 34, 11, 12,
			31, 17, 41, 36, 21, 32, 41, 19, 36, 32
		};
		return new Mesh
		{
			indexFormat = (IndexFormat)0,
			vertices = vertices,
			triangles = triangles,
			hideFlags = (HideFlags)61
		};
	}

	private void Setup(Material deferredLightingMaterial, CullingResults cullingResults, ShadowSettings shadowSettings, int renderingLayerMask, Camera camera, CameraSettings cameraSettings)
	{
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		this.deferredLightingMaterial = deferredLightingMaterial;
		this.cullingResults = cullingResults;
		this.camera = camera;
		this.cameraSettings = cameraSettings;
		if ((Object)(object)icoSphere == (Object)null)
		{
			icoSphere = CreateSphereMesh();
		}
		if ((Object)(object)icoHemisphere == (Object)null)
		{
			icoHemisphere = CreateHemisphereMesh();
		}
	}

	private void Render(RenderGraphContext context)
	{
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_0025: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0036: Unknown result type (might be due to invalid IL or missing references)
		//IL_003b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0040: Unknown result type (might be due to invalid IL or missing references)
		//IL_0043: Unknown result type (might be due to invalid IL or missing references)
		//IL_0048: Unknown result type (might be due to invalid IL or missing references)
		//IL_004f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0062: Unknown result type (might be due to invalid IL or missing references)
		//IL_0067: Unknown result type (might be due to invalid IL or missing references)
		//IL_007e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0083: Unknown result type (might be due to invalid IL or missing references)
		//IL_0099: Unknown result type (might be due to invalid IL or missing references)
		//IL_009e: Unknown result type (might be due to invalid IL or missing references)
		//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
		CameraRenderer.ExecuteCameraEventCommandBuffers(context, camera, (CameraEvent)6);
		NativeArray<VisibleLight> visibleLights = ((CullingResults)(ref cullingResults)).visibleLights;
		CommandBuffer cmd = context.cmd;
		Matrix4x4 val = GL.GetGPUProjectionMatrix(camera.projectionMatrix, true) * camera.worldToCameraMatrix;
		Matrix4x4 inverse = ((Matrix4x4)(ref val)).inverse;
		cmd.SetGlobalMatrix(inverseViewProjId, inverse);
		cmd.SetGlobalTexture(gBuffer0Id, TextureHandle.op_Implicit(gBufferTextureHandles[0]));
		cmd.SetGlobalTexture(gBuffer1Id, TextureHandle.op_Implicit(gBufferTextureHandles[1]));
		cmd.SetGlobalTexture(gBuffer2Id, TextureHandle.op_Implicit(gBufferTextureHandles[2]));
		RenderPointLight(context, visibleLights);
		RenderSpotLight(context, visibleLights);
		RenderDirectionalLight(context, visibleLights);
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(context.cmd);
		context.cmd.Clear();
		CameraRenderer.ExecuteCameraEventCommandBuffers(context, camera, (CameraEvent)7);
	}

	private void RenderPointLight(RenderGraphContext context, NativeArray<VisibleLight> visibleLights)
	{
		//IL_0011: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		//IL_0019: Unknown result type (might be due to invalid IL or missing references)
		//IL_001f: Invalid comparison between Unknown and I4
		//IL_0043: Unknown result type (might be due to invalid IL or missing references)
		//IL_0048: Unknown result type (might be due to invalid IL or missing references)
		//IL_004d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0052: Unknown result type (might be due to invalid IL or missing references)
		//IL_0057: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_008b: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
		//IL_010e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0120: Unknown result type (might be due to invalid IL or missing references)
		//IL_0132: Unknown result type (might be due to invalid IL or missing references)
		//IL_0144: Unknown result type (might be due to invalid IL or missing references)
		//IL_0156: Unknown result type (might be due to invalid IL or missing references)
		//IL_0167: Unknown result type (might be due to invalid IL or missing references)
		//IL_017d: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		Matrix4x4 val2 = default(Matrix4x4);
		for (int i = 0; i < visibleLights.Length; i++)
		{
			VisibleLight visibleLight = visibleLights[i];
			if ((int)((VisibleLight)(ref visibleLight)).lightType == 2 && (((VisibleLight)(ref visibleLight)).light.renderingLayerMask & cameraSettings.renderingLayerMask) != 0)
			{
				Matrix4x4 localToWorldMatrix = ((VisibleLight)(ref visibleLight)).localToWorldMatrix;
				Vector3 val = Vector4.op_Implicit(((Matrix4x4)(ref localToWorldMatrix)).GetColumn(3));
				((Matrix4x4)(ref val2))..ctor(new Vector4(((VisibleLight)(ref visibleLight)).range, 0f, 0f, 0f), new Vector4(0f, ((VisibleLight)(ref visibleLight)).range, 0f, 0f), new Vector4(0f, 0f, ((VisibleLight)(ref visibleLight)).range, 0f), new Vector4(val.x, val.y, val.z, 1f));
				if (!lightShadowData.TryGetValue(((VisibleLight)(ref visibleLight)).light, out var value))
				{
					value = Vector4.zero;
				}
				AdditionalLightData additionalLightData = AdditionalLightData.CreatePointLight(ref visibleLight, ((VisibleLight)(ref visibleLight)).light, value);
				cmd.BeginSample("Point Light");
				cmd.SetGlobalVector(lightColorId, additionalLightData.color);
				cmd.SetGlobalVector(lightPositionAndRangeId, additionalLightData.position);
				cmd.SetGlobalVector(lightDirectionAndMaskId, additionalLightData.directionAndMask);
				cmd.SetGlobalVector(lightSpotAngleId, additionalLightData.spotAngle);
				cmd.SetGlobalVector(lightShadowDataId, additionalLightData.shadowData);
				cmd.DrawMesh(icoSphere, val2, deferredLightingMaterial, 0, 0);
				cmd.DrawMesh(icoSphere, val2, deferredLightingMaterial, 0, 1);
				cmd.EndSample("Point Light");
			}
		}
	}

	private void RenderSpotLight(RenderGraphContext context, NativeArray<VisibleLight> visibleLights)
	{
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0021: Unknown result type (might be due to invalid IL or missing references)
		//IL_0024: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
		//IL_010e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0130: Unknown result type (might be due to invalid IL or missing references)
		//IL_0150: Unknown result type (might be due to invalid IL or missing references)
		//IL_016f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0182: Unknown result type (might be due to invalid IL or missing references)
		//IL_019d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0095: Unknown result type (might be due to invalid IL or missing references)
		//IL_009a: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.EnableShaderKeyword("_SPOT");
		for (int i = 0; i < visibleLights.Length; i++)
		{
			VisibleLight visibleLight = visibleLights[i];
			if ((int)((VisibleLight)(ref visibleLight)).lightType == 0 && (((VisibleLight)(ref visibleLight)).light.renderingLayerMask & cameraSettings.renderingLayerMask) != 0)
			{
				float num = (float)Math.PI / 180f * ((VisibleLight)(ref visibleLight)).spotAngle * 0.5f;
				float num2 = Mathf.Cos(num);
				float num3 = Mathf.Sin(num);
				float num4 = Mathf.Lerp(1f, 1.06067f, num3);
				if (!lightShadowData.TryGetValue(((VisibleLight)(ref visibleLight)).light, out var value))
				{
					value = Vector4.zero;
				}
				AdditionalLightData additionalLightData = AdditionalLightData.CreateSpotLight(ref visibleLight, ((VisibleLight)(ref visibleLight)).light, value);
				cmd.BeginSample("Spot Light");
				cmd.SetGlobalColor(lightColorId, Color.op_Implicit(additionalLightData.color));
				cmd.SetGlobalVector(lightPositionAndRangeId, additionalLightData.position);
				cmd.SetGlobalVector(lightDirectionAndMaskId, additionalLightData.directionAndMask);
				cmd.SetGlobalVector(lightSpotAngleId, additionalLightData.spotAngle);
				cmd.SetGlobalVector(lightShadowDataId, additionalLightData.shadowData);
				cmd.SetGlobalVector(spotLightScaleId, new Vector4(num3, num3, 1f - num2, ((VisibleLight)(ref visibleLight)).range));
				cmd.SetGlobalVector(spotLightBiasId, new Vector4(0f, 0f, num2, 0f));
				cmd.SetGlobalVector(spotLightGuardId, new Vector4(num4, num4, num4, num2 * ((VisibleLight)(ref visibleLight)).range));
				cmd.DrawMesh(icoHemisphere, ((VisibleLight)(ref visibleLight)).localToWorldMatrix, deferredLightingMaterial, 0, 0);
				cmd.DrawMesh(icoHemisphere, ((VisibleLight)(ref visibleLight)).localToWorldMatrix, deferredLightingMaterial, 0, 1);
				cmd.EndSample("Spot Light");
			}
		}
		cmd.DisableShaderKeyword("_SPOT");
	}

	private void RenderDirectionalLight(RenderGraphContext context, NativeArray<VisibleLight> visibleLights)
	{
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0021: Unknown result type (might be due to invalid IL or missing references)
		//IL_0024: Unknown result type (might be due to invalid IL or missing references)
		//IL_002a: Invalid comparison between Unknown and I4
		//IL_0071: Unknown result type (might be due to invalid IL or missing references)
		//IL_008c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0091: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
		//IL_0062: Unknown result type (might be due to invalid IL or missing references)
		//IL_0067: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.EnableShaderKeyword("_DIRECTIONAL");
		for (int i = 0; i < visibleLights.Length; i++)
		{
			VisibleLight visibleLight = visibleLights[i];
			if ((int)((VisibleLight)(ref visibleLight)).lightType == 1 && (((VisibleLight)(ref visibleLight)).light.renderingLayerMask & cameraSettings.renderingLayerMask) != 0)
			{
				if (!lightShadowData.TryGetValue(((VisibleLight)(ref visibleLight)).light, out var value))
				{
					value = Vector4.zero;
				}
				DirectionalLightData directionalLightData = new DirectionalLightData(ref visibleLight, ((VisibleLight)(ref visibleLight)).light, value);
				cmd.BeginSample("Directional Light");
				cmd.SetGlobalColor(lightColorId, Color.op_Implicit(directionalLightData.color));
				cmd.SetGlobalVector(lightDirectionAndMaskId, directionalLightData.directionAndMask);
				cmd.SetGlobalVector(lightShadowDataId, directionalLightData.shadowData);
				cmd.DrawProcedural(Matrix4x4.identity, deferredLightingMaterial, 2, (MeshTopology)0, 3);
				cmd.EndSample("Directional Light");
			}
		}
		cmd.DisableShaderKeyword("_DIRECTIONAL");
	}

	public static void Record(RenderGraph renderGraph, Material deferredLightingMaterial, in CameraTextures cameraTextures, in GBufferTextures gBufferTextures, CullingResults cullingResults, ShadowSettings shadowSettings, int renderingLayerMask, Camera camera, CameraSettings cameraSettings, LightResources lightResources)
	{
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_004a: Unknown result type (might be due to invalid IL or missing references)
		//IL_004f: Unknown result type (might be due to invalid IL or missing references)
		//IL_007a: Unknown result type (might be due to invalid IL or missing references)
		//IL_007f: Unknown result type (might be due to invalid IL or missing references)
		//IL_008c: Unknown result type (might be due to invalid IL or missing references)
		//IL_009a: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
		//IL_00de: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
		DeferredLightingPass deferredLightingPass = default(DeferredLightingPass);
		RenderGraphBuilder val = renderGraph.AddRenderPass<DeferredLightingPass>(profilingSampler.name, ref deferredLightingPass);
		try
		{
			deferredLightingPass.Setup(deferredLightingMaterial, cullingResults, shadowSettings, renderingLayerMask, camera, cameraSettings);
			deferredLightingPass.lightShadowData = lightResources.lightShadowData;
			for (int i = 0; i < gBufferTextures.gBufferTextureHandles.Length - 1; i++)
			{
				deferredLightingPass.gBufferTextureHandles[i] = ((RenderGraphBuilder)(ref val)).ReadTexture(ref gBufferTextures.gBufferTextureHandles[i]);
			}
			deferredLightingPass.gBufferTextureHandles[3] = ((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref gBufferTextures.gBufferTextureHandles[3]);
			((RenderGraphBuilder)(ref val)).ReadWriteTexture(ref cameraTextures.depthAttachment);
			((RenderGraphBuilder)(ref val)).ReadTexture(ref cameraTextures.depthCopy);
			ShadowResources shadowResources = lightResources.shadowResources;
			((RenderGraphBuilder)(ref val)).ReadTexture(ref shadowResources.directionalAtlas);
			((RenderGraphBuilder)(ref val)).ReadTexture(ref shadowResources.additionalAtlas);
			((RenderGraphBuilder)(ref val)).ReadComputeBuffer(ref shadowResources.directionalShadowMatricesBuffer);
			((RenderGraphBuilder)(ref val)).ReadComputeBuffer(ref shadowResources.directionalShadowCascadesBuffer);
			((RenderGraphBuilder)(ref val)).ReadComputeBuffer(ref shadowResources.additionalShadowDataBuffer);
			((RenderGraphBuilder)(ref val)).SetRenderFunc<DeferredLightingPass>((RenderFunc<DeferredLightingPass>)delegate(DeferredLightingPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref val)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using Rust.RenderPipeline.Runtime;
using UnityEngine;
using UnityEngine.Rendering;

public struct DirectionalLightData
{
	public const int STRIDE = 48;

	public Vector4 color;

	public Vector4 directionAndMask;

	public Vector4 shadowData;

	public DirectionalLightData(ref VisibleLight visibleLight, Light light, Vector4 shadowData)
	{
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0007: Unknown result type (might be due to invalid IL or missing references)
		//IL_000c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_001c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0021: Unknown result type (might be due to invalid IL or missing references)
		//IL_0026: Unknown result type (might be due to invalid IL or missing references)
		//IL_0042: Unknown result type (might be due to invalid IL or missing references)
		//IL_0043: Unknown result type (might be due to invalid IL or missing references)
		color = Color.op_Implicit(((VisibleLight)(ref visibleLight)).finalColor);
		Matrix4x4 localToWorldMatrix = ((VisibleLight)(ref visibleLight)).localToWorldMatrix;
		directionAndMask = -((Matrix4x4)(ref localToWorldMatrix)).GetColumn(2);
		directionAndMask.w = light.renderingLayerMask.ReinterpretAsFloat();
		this.shadowData = shadowData;
	}
}


using UnityEngine;

public struct DirectionalShadowCascade
{
	public const int STRIDE = 32;

	public Vector4 cullingSphere;

	public Vector4 data;

	public DirectionalShadowCascade(Vector4 cullingSphere, float tileSize, float filterSize)
	{
		//IL_0005: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_0032: Unknown result type (might be due to invalid IL or missing references)
		//IL_0033: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		//IL_004c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		float num = 2f * cullingSphere.w / tileSize;
		filterSize *= num;
		cullingSphere.w -= filterSize;
		cullingSphere.w *= cullingSphere.w;
		this.cullingSphere = cullingSphere;
		data = new Vector4(1f / cullingSphere.w, filterSize * 1.4142137f);
	}
}


using Unity.Burst;
using Unity.Collections;
using Unity.Jobs;
using Unity.Mathematics;

[BurstCompile(/*Could not decode attribute arguments.*/)]
public struct ForwardPlusTilesJob : IJobFor
{
	[ReadOnly]
	public NativeArray<float4> lightBounds;

	[WriteOnly]
	[NativeDisableParallelForRestriction]
	public NativeArray<int> tileData;

	public int additionalLightCount;

	public float2 tileScreenUVSize;

	public int maxLightsPerTile;

	public int tilesPerRow;

	public int tileDataSize;

	public void Execute(int tileIndex)
	{
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0030: Unknown result type (might be due to invalid IL or missing references)
		//IL_0035: Unknown result type (might be due to invalid IL or missing references)
		//IL_0052: Unknown result type (might be due to invalid IL or missing references)
		//IL_0057: Unknown result type (might be due to invalid IL or missing references)
		//IL_005b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0062: Unknown result type (might be due to invalid IL or missing references)
		//IL_0067: Unknown result type (might be due to invalid IL or missing references)
		//IL_006e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0075: Unknown result type (might be due to invalid IL or missing references)
		//IL_007a: Unknown result type (might be due to invalid IL or missing references)
		//IL_007f: Unknown result type (might be due to invalid IL or missing references)
		int num = tileIndex / tilesPerRow;
		int num2 = tileIndex - num * tilesPerRow;
		float4 val = math.float4((float)num2, (float)num, (float)(num2 + 1), (float)(num + 1)) * ((float2)(ref tileScreenUVSize)).xyxy;
		int num3 = tileIndex * tileDataSize;
		int num4 = num3;
		int num5 = 0;
		for (int i = 0; i < additionalLightCount; i++)
		{
			float4 val2 = lightBounds[i];
			if (math.all(math.float4(((float4)(ref val2)).xy, ((float4)(ref val)).xy) <= math.float4(((float4)(ref val)).zw, ((float4)(ref val2)).zw)))
			{
				tileData[++num4] = i;
				if (++num5 >= maxLightsPerTile)
				{
					break;
				}
			}
		}
		tileData[num3] = num5;
	}
}


using System;
using System.Collections.Generic;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using Unity.Collections;
using Unity.Jobs;
using Unity.Mathematics;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class LightingPass
{
	private const int MAX_DIRECTIONAL_LIGHT_COUNT = 4;

	private const int MAX_ADDITIONAL_LIGHT_COUNT = 128;

	private static readonly ProfilingSampler profilingSampler = new ProfilingSampler("Lighting");

	private static readonly DirectionalLightData[] directionalLightData = new DirectionalLightData[4];

	private static readonly AdditionalLightData[] additionalLightData = new AdditionalLightData[128];

	private static readonly int dirLightCountId = Shader.PropertyToID("_DirectionalLightCount");

	private static readonly int directionalLightDataId = Shader.PropertyToID("_DirectionalLightData");

	private static readonly int additionalLightCountId = Shader.PropertyToID("_AdditionalLightCount");

	private static readonly int additionalLightDataId = Shader.PropertyToID("_AdditionalLightData");

	private static readonly int tilesId = Shader.PropertyToID("_ForwardPlusTiles");

	private static readonly int tileSettingsId = Shader.PropertyToID("_ForwardPlusTileSettings");

	private CullingResults cullingResults;

	private readonly Shadows shadows = new Shadows();

	private int directionalLightCount;

	private int additionalLightCount;

	private ComputeBufferHandle directionalLightDataBuffer;

	private ComputeBufferHandle additionalLightDataBuffer;

	private ComputeBufferHandle tilesBuffer;

	private Vector2 screenUvToTileCoordinates;

	private Vector2Int tileCount;

	private int maxLightsPerTile;

	private int tileDataSize;

	private int maxTileDataSize;

	private NativeArray<float4> lightBounds;

	private NativeArray<int> tileData;

	private JobHandle forwardPlusJobHandle;

	private readonly Dictionary<Light, Vector4> lightShadowData = new Dictionary<Light, Vector4>();

	private int TileCount => ((Vector2Int)(ref tileCount)).x * ((Vector2Int)(ref tileCount)).y;

	private void Setup(CullingResults cullingResults, Vector2Int attachmentSize, ForwardPlusSettings forwardPlusSettings, ShadowSettings shadowSettings, int renderingLayerMask)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0022: Unknown result type (might be due to invalid IL or missing references)
		this.cullingResults = cullingResults;
		shadows.Setup(cullingResults, shadowSettings);
		lightBounds = new NativeArray<float4>(128, (Allocator)3, (NativeArrayOptions)0);
		maxLightsPerTile = ((forwardPlusSettings.maxLightsPerTile <= 0) ? 31 : forwardPlusSettings.maxLightsPerTile);
		maxTileDataSize = (tileDataSize = maxLightsPerTile + 1);
		float num = ((forwardPlusSettings.tileSize <= ForwardPlusSettings.TileSize.Default) ? 64f : ((float)forwardPlusSettings.tileSize));
		screenUvToTileCoordinates.x = (float)((Vector2Int)(ref attachmentSize)).x / num;
		screenUvToTileCoordinates.y = (float)((Vector2Int)(ref attachmentSize)).y / num;
		((Vector2Int)(ref tileCount)).x = Mathf.CeilToInt(screenUvToTileCoordinates.x);
		((Vector2Int)(ref tileCount)).y = Mathf.CeilToInt(screenUvToTileCoordinates.y);
		SetupLights(renderingLayerMask);
	}

	private void SetupForwardPlus(int lightIndex, ref VisibleLight visibleLight)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_002a: Unknown result type (might be due to invalid IL or missing references)
		Rect screenRect = ((VisibleLight)(ref visibleLight)).screenRect;
		lightBounds[lightIndex] = math.float4(((Rect)(ref screenRect)).xMin, ((Rect)(ref screenRect)).yMin, ((Rect)(ref screenRect)).xMax, ((Rect)(ref screenRect)).yMax);
	}

	private void SetupLights(int renderingLayerMask)
	{
		//IL_0006: Unknown result type (might be due to invalid IL or missing references)
		//IL_000b: Unknown result type (might be due to invalid IL or missing references)
		//IL_004d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0052: Unknown result type (might be due to invalid IL or missing references)
		//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
		//IL_01e7: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f8: Unknown result type (might be due to invalid IL or missing references)
		//IL_01fd: Unknown result type (might be due to invalid IL or missing references)
		//IL_0205: Unknown result type (might be due to invalid IL or missing references)
		//IL_020a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0240: Unknown result type (might be due to invalid IL or missing references)
		//IL_0245: Unknown result type (might be due to invalid IL or missing references)
		//IL_0286: Unknown result type (might be due to invalid IL or missing references)
		//IL_028c: Unknown result type (might be due to invalid IL or missing references)
		//IL_028e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0293: Unknown result type (might be due to invalid IL or missing references)
		//IL_006d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0072: Unknown result type (might be due to invalid IL or missing references)
		//IL_0074: Unknown result type (might be due to invalid IL or missing references)
		//IL_0087: Expected I4, but got Unknown
		//IL_0178: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
		//IL_00da: Unknown result type (might be due to invalid IL or missing references)
		//IL_010f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0149: Unknown result type (might be due to invalid IL or missing references)
		NativeArray<VisibleLight> visibleLights = ((CullingResults)(ref cullingResults)).visibleLights;
		int num = Mathf.Min(maxLightsPerTile, visibleLights.Length);
		tileDataSize = num + 1;
		directionalLightCount = (additionalLightCount = 0);
		lightShadowData.Clear();
		for (int i = 0; i < visibleLights.Length; i++)
		{
			VisibleLight visibleLight = visibleLights[i];
			Light light = ((VisibleLight)(ref visibleLight)).light;
			if ((light.renderingLayerMask & renderingLayerMask) == 0)
			{
				continue;
			}
			LightType lightType = ((VisibleLight)(ref visibleLight)).lightType;
			switch ((int)lightType)
			{
			case 1:
				if (directionalLightCount < 4)
				{
					lightShadowData[light] = Vector4.op_Implicit(shadows.ReserveDirectionalShadows(light, i));
					directionalLightData[directionalLightCount++] = new DirectionalLightData(ref visibleLight, light, lightShadowData[light]);
				}
				break;
			case 2:
				if (additionalLightCount < 128)
				{
					lightShadowData[light] = shadows.ReserveAdditionalShadows(light, i);
					SetupForwardPlus(additionalLightCount, ref visibleLight);
					additionalLightData[additionalLightCount++] = AdditionalLightData.CreatePointLight(ref visibleLight, light, lightShadowData[light]);
				}
				break;
			case 0:
				if (additionalLightCount < 128)
				{
					lightShadowData[light] = shadows.ReserveAdditionalShadows(light, i);
					SetupForwardPlus(additionalLightCount, ref visibleLight);
					additionalLightData[additionalLightCount++] = AdditionalLightData.CreateSpotLight(ref visibleLight, light, lightShadowData[light]);
				}
				break;
			}
		}
		tileData = new NativeArray<int>(TileCount * tileDataSize, (Allocator)3, (NativeArrayOptions)1);
		forwardPlusJobHandle = IJobForExtensions.ScheduleParallel<ForwardPlusTilesJob>(new ForwardPlusTilesJob
		{
			lightBounds = lightBounds,
			tileData = tileData,
			additionalLightCount = additionalLightCount,
			tileScreenUVSize = math.float2(1f / screenUvToTileCoordinates.x, 1f / screenUvToTileCoordinates.y),
			maxLightsPerTile = num,
			tilesPerRow = ((Vector2Int)(ref tileCount)).x,
			tileDataSize = tileDataSize
		}, TileCount, ((Vector2Int)(ref tileCount)).x, default(JobHandle));
	}

	private void Render(RenderGraphContext context)
	{
		//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_005f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0082: Unknown result type (might be due to invalid IL or missing references)
		//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
		//IL_0119: Unknown result type (might be due to invalid IL or missing references)
		CommandBuffer cmd = context.cmd;
		cmd.SetGlobalInt(dirLightCountId, directionalLightCount);
		cmd.SetBufferData(ComputeBufferHandle.op_Implicit(directionalLightDataBuffer), (Array)directionalLightData, 0, 0, directionalLightCount);
		cmd.SetGlobalBuffer(directionalLightDataId, ComputeBufferHandle.op_Implicit(directionalLightDataBuffer));
		cmd.SetGlobalInt(additionalLightCountId, additionalLightCount);
		cmd.SetBufferData(ComputeBufferHandle.op_Implicit(additionalLightDataBuffer), (Array)additionalLightData, 0, 0, additionalLightCount);
		cmd.SetGlobalBuffer(additionalLightDataId, ComputeBufferHandle.op_Implicit(additionalLightDataBuffer));
		shadows.Render(context);
		((JobHandle)(ref forwardPlusJobHandle)).Complete();
		cmd.SetBufferData<int>(ComputeBufferHandle.op_Implicit(tilesBuffer), tileData, 0, 0, tileData.Length);
		cmd.SetGlobalBuffer(tilesId, ComputeBufferHandle.op_Implicit(tilesBuffer));
		cmd.SetGlobalVector(tileSettingsId, new Vector4(screenUvToTileCoordinates.x, screenUvToTileCoordinates.y, ((Vector2Int)(ref tileCount)).x.ReinterpretAsFloat(), tileDataSize.ReinterpretAsFloat()));
		((ScriptableRenderContext)(ref context.renderContext)).ExecuteCommandBuffer(cmd);
		cmd.Clear();
		lightBounds.Dispose();
		tileData.Dispose();
	}

	public static LightResources Record(RenderGraph renderGraph, CullingResults cullingResults, Vector2Int attachmentSize, ForwardPlusSettings forwardPlusSettings, ShadowSettings shadowSettings, int renderingLayerMask)
	{
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_0026: Unknown result type (might be due to invalid IL or missing references)
		//IL_004b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0050: Unknown result type (might be due to invalid IL or missing references)
		//IL_0053: Unknown result type (might be due to invalid IL or missing references)
		//IL_0058: Unknown result type (might be due to invalid IL or missing references)
		//IL_0063: Unknown result type (might be due to invalid IL or missing references)
		//IL_008c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0091: Unknown result type (might be due to invalid IL or missing references)
		//IL_0094: Unknown result type (might be due to invalid IL or missing references)
		//IL_0099: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
		//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
		//IL_0115: Unknown result type (might be due to invalid IL or missing references)
		//IL_011b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0121: Unknown result type (might be due to invalid IL or missing references)
		//IL_012d: Unknown result type (might be due to invalid IL or missing references)
		LightingPass lightingPass = default(LightingPass);
		RenderGraphBuilder builder = renderGraph.AddRenderPass<LightingPass>("Lighting", ref lightingPass, profilingSampler);
		try
		{
			lightingPass.Setup(cullingResults, attachmentSize, forwardPlusSettings, shadowSettings, renderingLayerMask);
			LightingPass lightingPass2 = lightingPass;
			ComputeBufferDesc val = new ComputeBufferDesc
			{
				name = "Directional Light Data",
				count = 4,
				stride = 48
			};
			ComputeBufferHandle val2 = renderGraph.CreateComputeBuffer(ref val);
			lightingPass2.directionalLightDataBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val2);
			LightingPass lightingPass3 = lightingPass;
			val = new ComputeBufferDesc
			{
				name = "Additional Light Data",
				count = 128,
				stride = 80
			};
			val2 = renderGraph.CreateComputeBuffer(ref val);
			lightingPass3.additionalLightDataBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val2);
			LightingPass lightingPass4 = lightingPass;
			val = new ComputeBufferDesc
			{
				name = "Forward+ Tiles",
				count = lightingPass.TileCount * lightingPass.maxTileDataSize,
				stride = 4
			};
			val2 = renderGraph.CreateComputeBuffer(ref val);
			lightingPass4.tilesBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val2);
			((RenderGraphBuilder)(ref builder)).SetRenderFunc<LightingPass>((RenderFunc<LightingPass>)delegate(LightingPass pass, RenderGraphContext context)
			{
				pass.Render(context);
			});
			((RenderGraphBuilder)(ref builder)).AllowPassCulling(false);
			return new LightResources(lightingPass.directionalLightDataBuffer, lightingPass.additionalLightDataBuffer, lightingPass.tilesBuffer, lightingPass.shadows.GetResources(renderGraph, builder), lightingPass.lightShadowData);
		}
		finally
		{
			((IDisposable)(RenderGraphBuilder)(ref builder)/*cast due to .constrained prefix*/).Dispose();
		}
	}
}


using System.Collections.Generic;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;

public readonly ref struct LightResources
{
	public readonly ComputeBufferHandle directionalLightDataBuffer;

	public readonly ComputeBufferHandle additionalLightDataBuffer;

	public readonly ComputeBufferHandle tilesBuffer;

	public readonly ShadowResources shadowResources;

	public readonly Dictionary<Light, Vector4> lightShadowData;

	public LightResources(ComputeBufferHandle directionalLightDataBuffer, ComputeBufferHandle additionalLightDataBuffer, ComputeBufferHandle tilesBuffer, ShadowResources shadowResources, Dictionary<Light, Vector4> lightShadowData)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		//IL_000f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		this.directionalLightDataBuffer = directionalLightDataBuffer;
		this.additionalLightDataBuffer = additionalLightDataBuffer;
		this.tilesBuffer = tilesBuffer;
		this.shadowResources = shadowResources;
		this.lightShadowData = lightShadowData;
	}
}


using UnityEngine.Experimental.Rendering.RenderGraphModule;

public readonly ref struct ShadowResources
{
	public readonly TextureHandle directionalAtlas;

	public readonly TextureHandle additionalAtlas;

	public readonly ComputeBufferHandle directionalShadowCascadesBuffer;

	public readonly ComputeBufferHandle directionalShadowMatricesBuffer;

	public readonly ComputeBufferHandle additionalShadowDataBuffer;

	public ShadowResources(TextureHandle directionalAtlas, TextureHandle additionalAtlas, ComputeBufferHandle directionalShadowCascadesBuffer, ComputeBufferHandle directionalShadowMatricesBuffer, ComputeBufferHandle additionalShadowDataBuffer)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		//IL_000f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0016: Unknown result type (might be due to invalid IL or missing references)
		//IL_0018: Unknown result type (might be due to invalid IL or missing references)
		//IL_001e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		this.directionalAtlas = directionalAtlas;
		this.additionalAtlas = additionalAtlas;
		this.directionalShadowCascadesBuffer = directionalShadowCascadesBuffer;
		this.directionalShadowMatricesBuffer = directionalShadowMatricesBuffer;
		this.additionalShadowDataBuffer = additionalShadowDataBuffer;
	}
}


using System;
using Rust.RenderPipeline.Runtime;
using Rust.RenderPipeline.Runtime.Passes.Lighting;
using UnityEngine;
using UnityEngine.Experimental.Rendering.RenderGraphModule;
using UnityEngine.Rendering;

public class Shadows
{
	private struct ShadowedDirectionalLight
	{
		public int visibleLightIndex;

		public float slopeScaleBias;

		public float nearPlaneOffset;
	}

	private struct ShadowedAdditionalLight
	{
		public int visibleLightIndex;

		public float slopeScaleBias;

		public float normalBias;

		public bool isPoint;
	}

	private const float ROOT_TWO = 1.4142137f;

	private const int MAX_SHADOWED_DIRECTIONAL_LIGHT_COUNT = 4;

	private const int MAX_SHADOWED_ADDITIONAL_LIGHT_COUNT = 16;

	private const int MAX_CASCADES = 4;

	private static readonly int directionalShadowAtlasId = Shader.PropertyToID("_DirectionalShadowAtlas");

	private static readonly int directionalShadowMatricesId = Shader.PropertyToID("_DirectionalShadowMatrices");

	private static readonly int directionalShadowCascadesId = Shader.PropertyToID("_DirectionalShadowCascades");

	private static readonly int cascadeCountId = Shader.PropertyToID("_CascadeCount");

	private static readonly int additionalShadowAtlasId = Shader.PropertyToID("_AdditionalShadowAtlas");

	private static readonly int additionalShadowDataId = Shader.PropertyToID("_AdditionalShadowData");

	private static readonly int shadowAtlasSizeId = Shader.PropertyToID("_ShadowAtlasSize");

	private static readonly int shadowDistanceFadeId = Shader.PropertyToID("_ShadowDistanceFade");

	private static readonly int shadowPancakingId = Shader.PropertyToID("_ShadowPancaking");

	private static readonly DirectionalShadowCascade[] directionalShadowCascades = new DirectionalShadowCascade[4];

	private static readonly Matrix4x4[] directionalShadowMatrices = (Matrix4x4[])(object)new Matrix4x4[16];

	private static readonly AdditionalShadowData[] additionalShadowData = new AdditionalShadowData[16];

	private static readonly GlobalKeyword[] filterQualityKeywords = (GlobalKeyword[])(object)new GlobalKeyword[2]
	{
		GlobalKeyword.Create("_SHADOW_FILTER_MEDIUM"),
		GlobalKeyword.Create("_SHADOW_FILTER_HIGH")
	};

	private static readonly GlobalKeyword softCascadeBlendKeyword = GlobalKeyword.Create("_SOFT_CASCADE_BLEND");

	private readonly ShadowedDirectionalLight[] shadowedDirectionalLights = new ShadowedDirectionalLight[4];

	private readonly ShadowedAdditionalLight[] shadowedAdditionalLights = new ShadowedAdditionalLight[16];

	private CommandBuffer commandBuffer;

	private TextureHandle directionalAtlas;

	private TextureHandle additionalAtlas;

	private ComputeBufferHandle directionalShadowCascadesBuffer;

	private ComputeBufferHandle directionalShadowMatricesBuffer;

	private ComputeBufferHandle additionalShadowDataBuffer;

	private ScriptableRenderContext context;

	private CullingResults cullingResults;

	private ShadowSettings settings;

	private int shadowedDirectionalLightCount;

	private int shadowedAdditionalLightCount;

	private Vector4 atlasSizes;

	public void Setup(CullingResults cullingResults, ShadowSettings settings)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		this.cullingResults = cullingResults;
		this.settings = settings;
		shadowedDirectionalLightCount = (shadowedAdditionalLightCount = 0);
	}

	public void Render(RenderGraphContext context)
	{
		//IL_000e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_005a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0075: Unknown result type (might be due to invalid IL or missing references)
		//IL_0090: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
		//IL_0154: Unknown result type (might be due to invalid IL or missing references)
		//IL_016a: Unknown result type (might be due to invalid IL or missing references)
		commandBuffer = context.cmd;
		this.context = context.renderContext;
		if (shadowedDirectionalLightCount > 0)
		{
			RenderDirectionalShadows();
		}
		if (shadowedAdditionalLightCount > 0)
		{
			RenderAdditionalShadows();
		}
		SetKeywords(filterQualityKeywords, (int)(settings.filterQuality - 1));
		commandBuffer.SetGlobalBuffer(directionalShadowCascadesId, ComputeBufferHandle.op_Implicit(directionalShadowCascadesBuffer));
		commandBuffer.SetGlobalBuffer(directionalShadowMatricesId, ComputeBufferHandle.op_Implicit(directionalShadowMatricesBuffer));
		commandBuffer.SetGlobalBuffer(additionalShadowDataId, ComputeBufferHandle.op_Implicit(additionalShadowDataBuffer));
		commandBuffer.SetGlobalTexture(directionalShadowAtlasId, TextureHandle.op_Implicit(directionalAtlas));
		commandBuffer.SetGlobalTexture(additionalShadowAtlasId, TextureHandle.op_Implicit(additionalAtlas));
		commandBuffer.SetGlobalInt(cascadeCountId, (shadowedDirectionalLightCount > 0) ? settings.directional.cascadeCount : 0);
		float num = 1f - settings.directional.cascadeFade;
		commandBuffer.SetGlobalVector(shadowDistanceFadeId, new Vector4(1f / settings.maxDistance, 1f / settings.distanceFade, 1f / (1f - num * num)));
		commandBuffer.SetGlobalVector(shadowAtlasSizeId, atlasSizes);
		ExecuteCommandBuffer();
	}

	public Vector3 ReserveDirectionalShadows(Light light, int visibleLightIndex)
	{
		//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
		Bounds val = default(Bounds);
		if (shadowedDirectionalLightCount < 4 && (int)light.shadows != 0 && light.shadowStrength > 0f && ((CullingResults)(ref cullingResults)).GetShadowCasterBounds(visibleLightIndex, ref val))
		{
			shadowedDirectionalLights[shadowedDirectionalLightCount] = new ShadowedDirectionalLight
			{
				visibleLightIndex = visibleLightIndex,
				slopeScaleBias = light.shadowBias,
				nearPlaneOffset = light.shadowNearPlane
			};
			return new Vector3(light.shadowStrength, (float)(settings.directional.cascadeCount * shadowedDirectionalLightCount++), light.shadowNormalBias);
		}
		return Vector3.zero;
	}

	public Vector4 ReserveAdditionalShadows(Light light, int visibleLightIndex)
	{
		//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_0030: Unknown result type (might be due to invalid IL or missing references)
		//IL_0036: Invalid comparison between Unknown and I4
		//IL_0073: Unknown result type (might be due to invalid IL or missing references)
		//IL_00de: Unknown result type (might be due to invalid IL or missing references)
		if ((int)light.shadows == 0 || light.shadowStrength <= 0f)
		{
			return new Vector4(0f, 0f, 0f, -1f);
		}
		bool flag = (int)light.type == 2;
		int num = shadowedAdditionalLightCount + ((!flag) ? 1 : 6);
		Bounds val = default(Bounds);
		if (num > 16 || !((CullingResults)(ref cullingResults)).GetShadowCasterBounds(visibleLightIndex, ref val))
		{
			return new Vector4(0f - light.shadowStrength, 0f, 0f, -1f);
		}
		shadowedAdditionalLights[shadowedAdditionalLightCount] = new ShadowedAdditionalLight
		{
			visibleLightIndex = visibleLightIndex,
			slopeScaleBias = light.shadowBias,
			normalBias = light.shadowNormalBias,
			isPoint = flag
		};
		Vector4 result = new Vector4(light.shadowStrength, (float)shadowedAdditionalLightCount, flag ? 1f : 0f, -1f);
		shadowedAdditionalLightCount = num;
		return result;
	}

	private void RenderDirectionalShadows()
	{
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_0105: Unknown result type (might be due to invalid IL or missing references)
		int atlasSize = (int)settings.directional.atlasSize;
		atlasSizes.x = atlasSize;
		atlasSizes.y = 1f / (float)atlasSize;
		commandBuffer.SetRenderTarget(TextureHandle.op_Implicit(directionalAtlas), (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		commandBuffer.ClearRenderTarget(true, false, Color.clear);
		commandBuffer.SetGlobalFloat(shadowPancakingId, 1f);
		commandBuffer.BeginSample("Directional Shadows");
		ExecuteCommandBuffer();
		int num = shadowedDirectionalLightCount * settings.directional.cascadeCount;
		int num2 = ((num <= 1) ? 1 : ((num <= 4) ? 2 : 4));
		int tileSize = atlasSize / num2;
		for (int i = 0; i < shadowedDirectionalLightCount; i++)
		{
			RenderDirectionalShadows(i, num2, tileSize);
		}
		commandBuffer.SetBufferData(ComputeBufferHandle.op_Implicit(directionalShadowCascadesBuffer), (Array)directionalShadowCascades, 0, 0, settings.directional.cascadeCount);
		commandBuffer.SetBufferData(ComputeBufferHandle.op_Implicit(directionalShadowMatricesBuffer), (Array)directionalShadowMatrices, 0, 0, shadowedDirectionalLightCount * settings.directional.cascadeCount);
		commandBuffer.SetKeyword(ref softCascadeBlendKeyword, settings.directional.softCascadeBlend);
		commandBuffer.EndSample("Directional Shadows");
		ExecuteCommandBuffer();
	}

	private void RenderDirectionalShadows(int index, int split, int tileSize)
	{
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_004c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		//IL_0096: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
		//IL_0102: Unknown result type (might be due to invalid IL or missing references)
		//IL_0109: Unknown result type (might be due to invalid IL or missing references)
		//IL_010e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0119: Unknown result type (might be due to invalid IL or missing references)
		//IL_011b: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
		ShadowedDirectionalLight shadowedDirectionalLight = shadowedDirectionalLights[index];
		ShadowDrawingSettings val = default(ShadowDrawingSettings);
		((ShadowDrawingSettings)(ref val))..ctor(cullingResults, shadowedDirectionalLight.visibleLightIndex, (BatchCullingProjectionType)2);
		((ShadowDrawingSettings)(ref val)).useRenderingLayerMaskTest = true;
		ShadowDrawingSettings val2 = val;
		int cascadeCount = settings.directional.cascadeCount;
		int num = index * cascadeCount;
		Vector3 cascadeRatios = settings.directional.CascadeRatios;
		float shadowCascadeBlendCullingFactor = Mathf.Max(0f, 0.8f - settings.directional.cascadeFade);
		float scale = 1f / (float)split;
		Matrix4x4 val3 = default(Matrix4x4);
		Matrix4x4 val4 = default(Matrix4x4);
		ShadowSplitData splitData = default(ShadowSplitData);
		for (int i = 0; i < cascadeCount; i++)
		{
			((CullingResults)(ref cullingResults)).ComputeDirectionalShadowMatricesAndCullingPrimitives(shadowedDirectionalLight.visibleLightIndex, i, cascadeCount, cascadeRatios, tileSize, shadowedDirectionalLight.nearPlaneOffset, ref val3, ref val4, ref splitData);
			((ShadowSplitData)(ref splitData)).shadowCascadeBlendCullingFactor = shadowCascadeBlendCullingFactor;
			((ShadowDrawingSettings)(ref val2)).splitData = splitData;
			if (index == 0)
			{
				directionalShadowCascades[i] = new DirectionalShadowCascade(((ShadowSplitData)(ref splitData)).cullingSphere, tileSize, settings.DirectionalFilterSize);
			}
			int num2 = num + i;
			directionalShadowMatrices[num2] = ConvertToAtlasMatrix(val4 * val3, SetTileViewport(num2, split, tileSize), scale);
			commandBuffer.SetViewProjectionMatrices(val3, val4);
			commandBuffer.SetGlobalDepthBias(0f, shadowedDirectionalLight.slopeScaleBias);
			ExecuteCommandBuffer();
			((ScriptableRenderContext)(ref context)).DrawShadows(ref val2);
			commandBuffer.SetGlobalDepthBias(0f, 0f);
		}
	}

	private void RenderAdditionalShadows()
	{
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0051: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
		int atlasSize = (int)settings.additional.atlasSize;
		atlasSizes.z = atlasSize;
		atlasSizes.w = 1f / (float)atlasSize;
		commandBuffer.SetRenderTarget(TextureHandle.op_Implicit(additionalAtlas), (RenderBufferLoadAction)2, (RenderBufferStoreAction)0);
		commandBuffer.ClearRenderTarget(true, false, Color.clear);
		commandBuffer.SetGlobalFloat(shadowPancakingId, 0f);
		commandBuffer.BeginSample("Additional Shadows");
		ExecuteCommandBuffer();
		int num = shadowedAdditionalLightCount;
		int num2 = ((num <= 1) ? 1 : ((num <= 4) ? 2 : 4));
		int tileSize = atlasSize / num2;
		int num3 = 0;
		while (num3 < shadowedAdditionalLightCount)
		{
			if (shadowedAdditionalLights[num3].isPoint)
			{
				RenderPointShadows(num3, num2, tileSize);
				num3 += 6;
			}
			else
			{
				RenderSpotShadows(num3, num2, tileSize);
				num3++;
			}
		}
		commandBuffer.SetBufferData(ComputeBufferHandle.op_Implicit(additionalShadowDataBuffer), (Array)additionalShadowData, 0, 0, shadowedAdditionalLightCount);
		commandBuffer.EndSample("Additional Shadows");
		ExecuteCommandBuffer();
	}

	private void RenderSpotShadows(int index, int split, int tileSize)
	{
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0046: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_0080: Unknown result type (might be due to invalid IL or missing references)
		//IL_0085: Unknown result type (might be due to invalid IL or missing references)
		//IL_0097: Unknown result type (might be due to invalid IL or missing references)
		//IL_00af: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
		//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
		ShadowedAdditionalLight shadowedAdditionalLight = shadowedAdditionalLights[index];
		ShadowDrawingSettings val = default(ShadowDrawingSettings);
		((ShadowDrawingSettings)(ref val))..ctor(cullingResults, shadowedAdditionalLight.visibleLightIndex, (BatchCullingProjectionType)1);
		((ShadowDrawingSettings)(ref val)).useRenderingLayerMaskTest = true;
		ShadowDrawingSettings val2 = val;
		Matrix4x4 val3 = default(Matrix4x4);
		Matrix4x4 val4 = default(Matrix4x4);
		ShadowSplitData splitData = default(ShadowSplitData);
		((CullingResults)(ref cullingResults)).ComputeSpotShadowMatricesAndCullingPrimitives(shadowedAdditionalLight.visibleLightIndex, ref val3, ref val4, ref splitData);
		((ShadowDrawingSettings)(ref val2)).splitData = splitData;
		float num = 2f / ((float)tileSize * val4.m00) * settings.AdditionalFilterSize;
		float bias = shadowedAdditionalLight.normalBias * num * 1.4142137f;
		Vector2 offset = SetTileViewport(index, split, tileSize);
		float scale = 1f / (float)split;
		additionalShadowData[index] = new AdditionalShadowData(offset, scale, bias, atlasSizes.w * 0.5f, ConvertToAtlasMatrix(val4 * val3, offset, scale));
		commandBuffer.SetViewProjectionMatrices(val3, val4);
		commandBuffer.SetGlobalDepthBias(0f, shadowedAdditionalLight.slopeScaleBias);
		ExecuteCommandBuffer();
		((ScriptableRenderContext)(ref context)).DrawShadows(ref val2);
		commandBuffer.SetGlobalDepthBias(0f, 0f);
	}

	private void RenderPointShadows(int index, int split, int tileSize)
	{
		//IL_0010: Unknown result type (might be due to invalid IL or missing references)
		//IL_0029: Unknown result type (might be due to invalid IL or missing references)
		//IL_002b: Unknown result type (might be due to invalid IL or missing references)
		//IL_003f: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
		//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
		//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00db: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
		//IL_0113: Unknown result type (might be due to invalid IL or missing references)
		//IL_0115: Unknown result type (might be due to invalid IL or missing references)
		//IL_0117: Unknown result type (might be due to invalid IL or missing references)
		//IL_011c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0120: Unknown result type (might be due to invalid IL or missing references)
		//IL_0135: Unknown result type (might be due to invalid IL or missing references)
		//IL_0137: Unknown result type (might be due to invalid IL or missing references)
		ShadowedAdditionalLight shadowedAdditionalLight = shadowedAdditionalLights[index];
		ShadowDrawingSettings val = default(ShadowDrawingSettings);
		((ShadowDrawingSettings)(ref val))..ctor(cullingResults, shadowedAdditionalLight.visibleLightIndex, (BatchCullingProjectionType)1);
		((ShadowDrawingSettings)(ref val)).useRenderingLayerMaskTest = true;
		ShadowDrawingSettings val2 = val;
		float num = 2f / (float)tileSize * ((float)settings.additional.filter + 1f);
		float num2 = shadowedAdditionalLight.normalBias * num * 1.4142137f;
		float scale = 1f / (float)split;
		Matrix4x4 val3 = default(Matrix4x4);
		Matrix4x4 val4 = default(Matrix4x4);
		ShadowSplitData splitData = default(ShadowSplitData);
		for (int i = 0; i < 6; i++)
		{
			float num3 = Mathf.Atan(1f + num2 + num) * 57.29578f * 2f - 90f;
			((CullingResults)(ref cullingResults)).ComputePointShadowMatricesAndCullingPrimitives(shadowedAdditionalLight.visibleLightIndex, (CubemapFace)i, num3, ref val3, ref val4, ref splitData);
			val3.m11 = 0f - val3.m11;
			val3.m12 = 0f - val3.m12;
			val3.m13 = 0f - val3.m13;
			((ShadowDrawingSettings)(ref val2)).splitData = splitData;
			int num4 = index + i;
			Vector2 offset = SetTileViewport(num4, split, tileSize);
			additionalShadowData[num4] = new AdditionalShadowData(offset, scale, num2, atlasSizes.w * 0.5f, ConvertToAtlasMatrix(val4 * val3, offset, scale));
			commandBuffer.SetViewProjectionMatrices(val3, val4);
			commandBuffer.SetGlobalDepthBias(0f, shadowedAdditionalLight.slopeScaleBias);
			ExecuteCommandBuffer();
			((ScriptableRenderContext)(ref context)).DrawShadows(ref val2);
			commandBuffer.SetGlobalDepthBias(0f, 0f);
		}
	}

	private void SetKeywords(GlobalKeyword[] keywords, int enabledIndex)
	{
		for (int i = 0; i < keywords.Length; i++)
		{
			commandBuffer.SetKeyword(ref keywords[i], i == enabledIndex);
		}
	}

	private Vector2 SetTileViewport(int index, int split, float tileSize)
	{
		//IL_0015: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Unknown result type (might be due to invalid IL or missing references)
		//IL_0027: Unknown result type (might be due to invalid IL or missing references)
		//IL_0031: Unknown result type (might be due to invalid IL or missing references)
		Vector2 val = default(Vector2);
		((Vector2)(ref val))..ctor((float)(index % split), (float)(index / split));
		commandBuffer.SetViewport(new Rect(val.x * tileSize, val.y * tileSize, tileSize, tileSize));
		return val;
	}

	private Matrix4x4 ConvertToAtlasMatrix(Matrix4x4 m, Vector2 offset, float scale)
	{
		//IL_0046: Unknown result type (might be due to invalid IL or missing references)
		//IL_004c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0054: Unknown result type (might be due to invalid IL or missing references)
		//IL_005a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0070: Unknown result type (might be due to invalid IL or missing references)
		//IL_0076: Unknown result type (might be due to invalid IL or missing references)
		//IL_007e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0084: Unknown result type (might be due to invalid IL or missing references)
		//IL_009a: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
		//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
		//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
		//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
		//IL_0102: Unknown result type (might be due to invalid IL or missing references)
		//IL_0118: Unknown result type (might be due to invalid IL or missing references)
		//IL_011e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0126: Unknown result type (might be due to invalid IL or missing references)
		//IL_012c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0142: Unknown result type (might be due to invalid IL or missing references)
		//IL_0148: Unknown result type (might be due to invalid IL or missing references)
		//IL_0150: Unknown result type (might be due to invalid IL or missing references)
		//IL_0156: Unknown result type (might be due to invalid IL or missing references)
		//IL_016c: Unknown result type (might be due to invalid IL or missing references)
		//IL_0172: Unknown result type (might be due to invalid IL or missing references)
		//IL_017a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0180: Unknown result type (might be due to invalid IL or missing references)
		//IL_0196: Unknown result type (might be due to invalid IL or missing references)
		//IL_019c: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b0: Unknown result type (might be due to invalid IL or missing references)
		//IL_01b6: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
		//IL_01d0: Unknown result type (might be due to invalid IL or missing references)
		//IL_01e4: Unknown result type (might be due to invalid IL or missing references)
		//IL_01ea: Unknown result type (might be due to invalid IL or missing references)
		//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)
		//IL_0017: Unknown result type (might be due to invalid IL or missing references)
		//IL_0025: Unknown result type (might be due to invalid IL or missing references)
		//IL_0033: Unknown result type (might be due to invalid IL or missing references)
		if (SystemInfo.usesReversedZBuffer)
		{
			m.m20 = 0f - m.m20;
			m.m21 = 0f - m.m21;
			m.m22 = 0f - m.m22;
			m.m23 = 0f - m.m23;
		}
		m.m00 = (0.5f * (m.m00 + m.m30) + offset.x * m.m30) * scale;
		m.m01 = (0.5f * (m.m01 + m.m31) + offset.x * m.m31) * scale;
		m.m02 = (0.5f * (m.m02 + m.m32) + offset.x * m.m32) * scale;
		m.m03 = (0.5f * (m.m03 + m.m33) + offset.x * m.m33) * scale;
		m.m10 = (0.5f * (m.m10 + m.m30) + offset.y * m.m30) * scale;
		m.m11 = (0.5f * (m.m11 + m.m31) + offset.y * m.m31) * scale;
		m.m12 = (0.5f * (m.m12 + m.m32) + offset.y * m.m32) * scale;
		m.m13 = (0.5f * (m.m13 + m.m33) + offset.y * m.m33) * scale;
		m.m20 = 0.5f * (m.m20 + m.m30);
		m.m21 = 0.5f * (m.m21 + m.m31);
		m.m22 = 0.5f * (m.m22 + m.m32);
		m.m23 = 0.5f * (m.m23 + m.m33);
		return m;
	}

	public ShadowResources GetResources(RenderGraph renderGraph, RenderGraphBuilder builder)
	{
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)
		//IL_0039: Unknown result type (might be due to invalid IL or missing references)
		//IL_003a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0057: Unknown result type (might be due to invalid IL or missing references)
		//IL_005c: Unknown result type (might be due to invalid IL or missing references)
		//IL_005f: Unknown result type (might be due to invalid IL or missing references)
		//IL_004b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0064: Unknown result type (might be due to invalid IL or missing references)
		//IL_006f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0094: Unknown result type (might be due to invalid IL or missing references)
		//IL_0099: Unknown result type (might be due to invalid IL or missing references)
		//IL_009d: Unknown result type (might be due to invalid IL or missing references)
		//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
		//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
		//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
		//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
		//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
		//IL_0133: Unknown result type (might be due to invalid IL or missing references)
		//IL_0138: Unknown result type (might be due to invalid IL or missing references)
		//IL_013b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0127: Unknown result type (might be due to invalid IL or missing references)
		//IL_0140: Unknown result type (might be due to invalid IL or missing references)
		//IL_014b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0171: Unknown result type (might be due to invalid IL or missing references)
		//IL_0176: Unknown result type (might be due to invalid IL or missing references)
		//IL_017a: Unknown result type (might be due to invalid IL or missing references)
		//IL_017f: Unknown result type (might be due to invalid IL or missing references)
		//IL_0185: Unknown result type (might be due to invalid IL or missing references)
		//IL_018b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0191: Unknown result type (might be due to invalid IL or missing references)
		//IL_0197: Unknown result type (might be due to invalid IL or missing references)
		//IL_019d: Unknown result type (might be due to invalid IL or missing references)
		int atlasSize = (int)settings.directional.atlasSize;
		TextureDesc val = default(TextureDesc);
		((TextureDesc)(ref val))..ctor(atlasSize, atlasSize, false, false);
		val.depthBufferBits = (DepthBits)32;
		val.isShadowMap = true;
		val.name = "Directional Shadow Atlas";
		TextureDesc val2 = val;
		TextureHandle val3;
		if (shadowedDirectionalLightCount <= 0)
		{
			val3 = renderGraph.defaultResources.defaultShadowTexture;
		}
		else
		{
			TextureHandle val4 = renderGraph.CreateTexture(ref val2);
			val3 = ((RenderGraphBuilder)(ref builder)).WriteTexture(ref val4);
		}
		directionalAtlas = val3;
		ComputeBufferDesc val5 = new ComputeBufferDesc
		{
			name = "Shadow Cascades",
			stride = 32,
			count = 4
		};
		ComputeBufferHandle val6 = renderGraph.CreateComputeBuffer(ref val5);
		directionalShadowCascadesBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val6);
		val5 = new ComputeBufferDesc
		{
			name = "Directional Shadow Matrices",
			stride = 64,
			count = 16
		};
		val6 = renderGraph.CreateComputeBuffer(ref val5);
		directionalShadowMatricesBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val6);
		atlasSize = (int)settings.additional.atlasSize;
		val2.width = (val2.height = atlasSize);
		val2.name = "Additional Shadow Atlas";
		TextureHandle val7;
		if (shadowedAdditionalLightCount <= 0)
		{
			val7 = renderGraph.defaultResources.defaultShadowTexture;
		}
		else
		{
			TextureHandle val4 = renderGraph.CreateTexture(ref val2);
			val7 = ((RenderGraphBuilder)(ref builder)).WriteTexture(ref val4);
		}
		additionalAtlas = val7;
		val5 = new ComputeBufferDesc
		{
			name = "Additional Shadow Data",
			stride = 80,
			count = 16
		};
		val6 = renderGraph.CreateComputeBuffer(ref val5);
		additionalShadowDataBuffer = ((RenderGraphBuilder)(ref builder)).WriteComputeBuffer(ref val6);
		return new ShadowResources(directionalAtlas, additionalAtlas, directionalShadowCascadesBuffer, directionalShadowMatricesBuffer, additionalShadowDataBuffer);
	}

	private void ExecuteCommandBuffer()
	{
		((ScriptableRenderContext)(ref context)).ExecuteCommandBuffer(commandBuffer);
		commandBuffer.Clear();
	}
}


private struct MonoScriptData
{
	public byte[] FilePathsData;

	public byte[] TypesData;

	public int TotalTypes;

	public int TotalFiles;

	public bool IsEditorOnly;
}


using System;
using UnityEngine;

[Serializable]
public struct FxaaSettings
{
	public enum Quality
	{
		Low,
		Medium,
		High
	}

	public bool enabled;

	public Quality quality;

	[Range(0.0312f, 0.0833f)]
	public float fixedThreshold;

	[Range(0.063f, 0.333f)]
	public float relativeThreshold;

	[Range(0f, 1f)]
	public float subpixelBlending;
}


public enum BicubicRescalingMode
{
	Off,
	UpOnly,
	UpAndDown
}


public enum RenderScaleMode
{
	Inherit,
	Multiply,
	Override
}


using System;
using UnityEngine.Rendering;

[Serializable]
public struct FinalBlendMode
{
	public BlendMode source;

	public BlendMode destination;
}


public enum TileSize
{
	Default = 0,
	_16 = 0x10,
	_32 = 0x20,
	_64 = 0x40,
	_128 = 0x80,
	_256 = 0x100
}


using System;
using UnityEngine;

[Serializable]
public struct BloomSettings
{
	public enum Mode
	{
		Additive,
		Scattering
	}

	public bool ignoreRenderScale;

	[Range(0f, 16f)]
	public int maxIterations;

	[Min(1f)]
	public int downscaleLimit;

	public bool bicubicUpsampling;

	[Min(0f)]
	public float threshold;

	[Range(0f, 1f)]
	public float thresholdKnee;

	[Min(0f)]
	public float intensity;

	public bool fadeFireflies;

	public Mode mode;

	[Range(0.05f, 0.95f)]
	public float scatter;
}


using System;
using UnityEngine;

[Serializable]
public struct ColorAdjustmentsSettings
{
	public float postExposure;

	[Range(-100f, 100f)]
	public float contrast;

	[ColorUsage(false, true)]
	public Color colorFilter;

	[Range(-180f, 180f)]
	public float hueShift;

	[Range(-100f, 100f)]
	public float saturation;
}


using System;
using UnityEngine;

[Serializable]
public struct ChannelMixerSettings
{
	public Vector3 red;

	public Vector3 green;

	public Vector3 blue;
}


using System;
using UnityEngine;

[Serializable]
public struct WhiteBalanceSettings
{
	[Range(-100f, 100f)]
	public float temperature;

	[Range(-100f, 100f)]
	public float tint;
}


using System;
using UnityEngine;

[Serializable]
public struct SplitToningSettings
{
	[ColorUsage(false)]
	public Color shadows;

	[ColorUsage(false)]
	public Color highlights;

	[Range(-100f, 100f)]
	public float balance;
}


using System;

[Serializable]
public struct ToneMappingSettings
{
	public enum Mode
	{
		None,
		ACES,
		Neutral,
		Reinhard
	}

	public Mode mode;
}


using System;
using UnityEngine;

[Serializable]
public struct ShadowsMidtonesHighlightsSettings
{
	[ColorUsage(false, true)]
	public Color shadows;

	[ColorUsage(false, true)]
	public Color midtones;

	[ColorUsage(false, true)]
	public Color highlights;

	[Range(0f, 2f)]
	public float shadowsStart;

	[Range(0f, 2f)]
	public float shadowsEnd;

	[Range(0f, 2f)]
	public float highlightsStart;

	[Range(0f, 2f)]
	public float highLightsEnd;
}


using System.Runtime.InteropServices;

[StructLayout(LayoutKind.Explicit)]
private struct IntFloat
{
	[FieldOffset(0)]
	public int intValue;

	[FieldOffset(0)]
	public float floatValue;
}


using UnityEngine;
using UnityEngine.Rendering;

public readonly struct PipelineMaterials
{
	public readonly Material cameraRendererMaterial;

	public readonly Material cameraDebuggerMaterial;

	public readonly Material deferredLightingMaterial;

	public readonly Material deferredIndirectLightingMaterial;

	public PipelineMaterials(RustRenderPipelineSettings.PipelineShaders pipelineShaders)
	{
		cameraRendererMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.cameraRendererShader);
		cameraDebuggerMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.cameraDebuggerShader);
		deferredLightingMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.deferredLightingShader);
		deferredIndirectLightingMaterial = CoreUtils.CreateEngineMaterial(pipelineShaders.deferredIndirectLightingShader);
	}

	public void Dispose()
	{
		CoreUtils.Destroy((Object)(object)cameraRendererMaterial);
		CoreUtils.Destroy((Object)(object)cameraDebuggerMaterial);
		CoreUtils.Destroy((Object)(object)deferredLightingMaterial);
		CoreUtils.Destroy((Object)(object)deferredIndirectLightingMaterial);
	}
}


public enum ColorLutResolution
{
	_16 = 0x10,
	_32 = 0x20,
	_64 = 0x40
}


public enum RenderPath
{
	ForwardPlus,
	Deferred
}


using System;
using UnityEngine;

[Serializable]
public struct PipelineShaders
{
	public Shader cameraRendererShader;

	public Shader cameraDebuggerShader;

	public Shader deferredLightingShader;

	public Shader deferredIndirectLightingShader;
}


public enum FilterQuality
{
	Low,
	Medium,
	High
}


public enum MapSize
{
	_256 = 0x100,
	_512 = 0x200,
	_1024 = 0x400,
	_2048 = 0x800,
	_4096 = 0x1000,
	_8192 = 0x2000
}


using System;
using UnityEngine;

[Serializable]
public struct DirectionalLight
{
	public MapSize atlasSize;

	[Range(1f, 4f)]
	public int cascadeCount;

	[Range(0f, 1f)]
	public float cascadeRatio1;

	[Range(0f, 1f)]
	public float cascadeRatio2;

	[Range(0f, 1f)]
	public float cascadeRatio3;

	[Range(0.001f, 1f)]
	public float cascadeFade;

	public bool softCascadeBlend;

	public Vector3 CascadeRatios => new Vector3(cascadeRatio1, cascadeRatio2, cascadeRatio3);
}


using System;
using UnityEngine;

[Serializable]
public struct AdditionalLight
{
	public MapSize atlasSize;

	public FilterMode filter;
}


private enum ScaleMode
{
	None,
	Bilinear,
	Bicubic
}


public enum Pass
{
	BloomPrefilter,
	BloomPrefilterFireflies,
	BloomHorizontal,
	BloomVertical,
	BloomAdd,
	BloomScatter,
	BloomScatterFinal,
	ColorGradingNone,
	ColorGradingACES,
	ColorGradingNeutral,
	ColorGradingReinhard,
	ApplyColorGrading,
	ApplyColorGradingWithLuma,
	FXAA,
	FXAAWithLuma,
	FinalRescale,
	Copy
}


private enum Pass
{
	IndirectLighting,
	Combine
}


private enum ShaderPasses
{
	StencilVolume,
	Lighting,
	DirectionalLighting
}


private struct ShadowedDirectionalLight
{
	public int visibleLightIndex;

	public float slopeScaleBias;

	public float nearPlaneOffset;
}


private struct ShadowedAdditionalLight
{
	public int visibleLightIndex;

	public float slopeScaleBias;

	public float normalBias;

	public bool isPoint;
}


public enum Quality
{
	Low,
	Medium,
	High
}


public enum Mode
{
	Additive,
	Scattering
}


public enum Mode
{
	None,
	ACES,
	Neutral,
	Reinhard
}


